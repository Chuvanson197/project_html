{"version":3,"sources":["serviceWorker.js","utils/createOperation.js","api/auth/authApi.js","utils/apiService.js","utils/createResourceHandler.js","modules/layout/store/index.js","modules/languageSwitcher/store/index.js","modules/project/store/index.js","modules/customer/store/index.js","modules/member/store/index.js","modules/setting/store/index.js","reducers/layoutReducer.js","reducers/authReducer.js","store/index.js","languageProvider/entries/en_US.js","languageProvider/entries/vi_VN.js","languageProvider/index.js","actions/layout.js","actions/auth.js","pages/LoadingPage.js","hocs/RouteNormal.js","hocs/RouteWithManager.js","hocs/RouteWithAdmin.js","modules/dashbroad/Gantt/Gantt.js","pages/Dashbroad.page.js","components/Content/HeaderTitle.js","modules/project/projects/components/ProjectsList.js","components/Notification/Error.js","components/Notification/Success.js","modules/project/createProject/components/CreateProject.js","hocs/WithRole.js","pages/Projects.page.js","modules/member/memberDiagram/MemberDiagram.js","utils/roles.js","modules/project/addMember/components/AddMemberModal.js","modules/project/updateProject/components/UpdateProjectDrawer.js","modules/project/updateMember/components/UpdateMemberDrawer.js","modules/project/projectDetails/components/ProjectDetail.js","components/Button/BackButton.js","pages/ProjectDetail.page.js","modules/project/projectMemberHistory/components/TableMemberHistory.js","modules/project/projectMemberHistory/components/ProjectMemberHistory.js","pages/ProjectMemberHistory.page.js","pages/Login.page.js","utils/searchColumn.js","modules/member/editMember/components/EditMember.js","modules/member/listMember/components/Members.js","utils/modal.config.js","modules/member/createMember/components/CreateMember.js","pages/ListMember.page.js","modules/customer/createCustomer/components/CreateCustomerModal.js","modules/customer/customers/components/CustomersTable.js","pages/Customers.page.js","pages/NotFound.js","pages/CallbackOAuth.js","modules/user/editUser/components/UpdateUserDrawer.js","modules/user/users/components/UsersTable.js","pages/User.page.js","modules/setting/createCustomField/CreateCustomField.js","modules/setting/updateCustomField/UpdateCustomFieldDrawer.js","modules/setting/tableCustomFields/TableCustomFields.js","modules/setting/firstSettingCustomField/firstSettingCustomField.js","pages/Setting.page.js","modules/customer/updateCustomer/components/UpdateCustomerDrawer.js","modules/customer/customerDetail/customerDetail.js","pages/CustomerDetail.page.js","AppRoutes.js","modules/languageSwitcher/components/options.js","modules/languageSwitcher/components/LanguagaSwitcher.js","modules/layout/components/Header.js","modules/layout/components/CustomMenu.js","modules/layout/components/Sider.js","App.js","index.js"],"names":["Boolean","window","location","hostname","match","actions","process","payload","dispatch","getState","a","execute","startAction","successAction","failAction","result","params","response","status","data","authApi","login","accessCode","axios","post","withCredentials","userLogin","refreshLogin","get","refreshToken","logout","staff_code","expresIn","localStorage","getItem","now","Date","parseInt","getTime","res","statusCode","Cookies","set","access_token","secure","path","Api","GET","option","param","headers","then","POST","body","PUT","put","DELETE","delete","CreateResourceHandler","moduleName","apiActions","reducerActions","defaultState","initialState","loading","forEach","value","stateName","undefined","lastState","initialReducerActions","actionName","state","slice","createSlice","reducers","exportApiActions","createOperation","api","method","reducer","store","createResourceHandler","selectedItem","selectedSubMenu","isCollapsed","locale","list","project","members","joinedMembers","createProjectResult","updateProjectResult","removeProjectResult","addMemberResult","updateMemberResult","removeMemberResult","apiUrl","customer","projectsOfCustomer","createCustomerResult","updateCustomerResult","removeCustomerResult","createMemberResult","customfields","customfield","createCustomFieldResult","removeCustomFieldResult","getCustomFieldResult","updateCustomFieldResult","createAssigneeProjectResult","removeAssigneeProjectResult","initState","isShow","isLogin","user","history","createBrowserHistory","routeMiddleware","routerMiddleware","rootReducer","combineReducers","router","routerReducer","layout","action","type","layoutSlider","layoutSliderReducer","languageSwitcher","languageSwitcherReducer","auth","projects","projectsReducer","customers","customersReducer","membersReducer","setting","settingReducer","configureStore","middleware","getDefaultMiddleware","serializableCheck","devTools","EnLang","messages","antd","antdEn","appLocaleData","AppLocale","en","Enlang","vi","antdVi","addLocaleData","dispatchHideLayout","dispatchShowLayout","dispatchLogin","LoadingPage","props","useDispatch","useEffect","remove","push","userInfo","jwtDecode","setItem","exp","search","override","css","style","backgroundColor","width","height","paddingTop","display","flexDirection","justifyContent","alignItems","color","marginRight","sizeUnit","size","RouteNormal","Component","component","rest","checkAuth","useSelector","render","RouteWithManager","checkRole","renderRoute","RouteWithAdmin","Gantt","tasks","intl","ganttContainer","gantt","config","scale_unit","xml_date","showLightbox","id","templates","tooltip_text","start","end","task","formatMessage","text","tooltip_date_format","columns","name","label","align","date_scale","init","clearAll","parse","ref","input","DashbroadPage","RangePicker","useState","setData","moment","subtract","setValue","mode","setMode","colors","length","startTime","_d","format","endTime","filter","start_time","end_time","map","end_date","start_date","readonly","layoutActions","selectItem","projectActions","getProjects","className","Group","defaultValue","onChange","e","target","Button","placeholder","onPanelChange","defaultProps","injectIntl","propTypes","title","PropTypes","oneOfType","string","shape","isRequired","HeaderTitle","React","memo","Fragment","Title","level","styles","listItem","ProjectsList","itemLayout","dataSource","renderItem","item","Item","onClick","onSelectProject","active","Meta","marginLeft","description","Paragraph","margin","ErrorNotification","message","notification","open","fontWeight","duration","icon","SuccessNotification","formItemLayout","labelCol","span","wrapperCol","listStatus","CreateProject","visible","close","form","selectedCustomer","createProject","getCustomers","customerDetail","setCustomerDetail","getCustomersError","getCustomersErrors","customersList","customerLoading","createProjectError","createProjectErrors","createProjectCleanData","createProjectCleanError","customerActions","getCustomersCleanError","handleSubmit","validateFields","err","values","customer_id","estimated","setTimeout","reload","cancelText","onCancel","maskClosable","footer","key","justify","onConfirm","okText","onSubmit","marginBottom","Text","validateStatus","getFieldError","getFieldDecorator","rules","required","allowClear","Option","autoClearSearchValue","onSelect","handleSelect","notFoundContent","column","email","phone_number","address","CreateProjectForm","create","WithRole","includes","addCustomerButton","ButtonAdd","handleCreateModal","ProjectsPage","getProjectsError","getProjectsErrors","setVisible","getProjectsCleanError","useCallback","gutter","defaultActiveKey","TabPane","tab","paragraph","rows","MemberDiagram","engine","createEngine","listPo","listPm","listBrse","listComtor","listDev","model","DiagramModel","listAssigneeUnDefault","assigneeProject","member_be_link_id","listAssignee","member","role","nodePoTitle","DefaultNodeModel","locked","setPosition","po","index","node","full_name","addNode","nodePmTitle","pm","nodeBrseTitle","brse","nodeComtorTitle","comtor","nodeDevTitle","dev","allNode","getModels","linkAssignee","member_link_id","options","portOut","addOutPort","listPoLink","portIn","addInPort","linkPO","link","addLink","listPmLink","linkPM","addAll","listBrseLink","linkBRSE","linkComtor","nodeLink","nodeBeLink","linkNode","setModel","centered","placement","zoomToFit","roles","descItem","AddMemberModal","selectedMember","getMembers","getJoinedMembers","getProject","addMember","getMembersError","memberLoading","addMemberError","addMemberErrors","memberDetail","setMemberDetail","disabledLink","setDisabledLink","addMemberCleanError","addMemberCleanData","memberActions","cleanError","project_id","time_in","time_out","assignee","modal","showSearch","setFieldsValue","getFieldsValue","disabled","joinedMember","member_detail","min","max","step","AddMemberForm","drawerBody","drawerFooter","deletedCustomerMsg","UpdateProjectDrawer","updateProject","onClose","drawerVisible","updateProjectError","updateProjectErrors","updateProjectCleanError","updateProjectCleanData","customField","indexCustomField","idInfoCustomField","Object","keys","hidden","initialValue","find","obj","require","UpdateProjectForm","UpdateMemberDrawer","updateMember","updateMemberError","updateMemberErrors","updateMemberCleanError","updateMemberCleanData","effort","member_status","oldBody","JSON","stringify","paddingBottom","UpdateMemberForm","ButtonEditProject","handleEditProjectDrawer","ButtonEditMember","handleControlMemberDrawer","record","ButtonDeleteMember","handleConfirmDelete","ButtonAddMember","handleAddMemberModal","ProjectDetail","removeMember","setDrawerVisible","memberDrawerVisible","setMemberDrawerVisible","openAddModal","setOpenAddModal","selectMember","removeMemberError","removeMemberErrors","getProjectError","getProjectErrors","getJoinedMembersError","getJoinedMembersErrors","getProjectCleanError","getJoinedMembersCleanError","removeMemberCleanData","dataIndex","date","total","fontSize","str","href","rowKey","pagination","BackButton","onBack","ButtonRemoveProject","removeProject","removeProjectError","removeProjectErrors","getJoinedMembersCleanData","getProjectCleanData","removeProjectCleanData","removeProjectCleanError","back","TableMemberHistory","datePicker","ProjectMemberHistory","getMemberHistory","startOf","endOf","dateRange","setDateRange","getMemberHistoryError","getMemberHistoryErrors","getMemberHistoryCleanError","ProjectMemberHistoryPage","LoginPage","searchColumn","currValue","replace","normalize","toLowerCase","EditMember","EditMemberForm","handleEditSelected","Members","dataItem","setDataItem","removeMemberCleanError","keyboard","closable","CreateMember","createMember","createMemberError","createMemberErrors","createMemberCleanError","createMemberCleanData","modalConfig","CreateMemberForm","ListMemberPage","openCreateModal","setOpenCreateModal","searchInput","setSearchInput","getMembersErrors","filteredData","setFilteredData","getMembersCleanError","createNewMember","offset","CreateCustomerModal","getCutomers","addCustomer","createCustomerError","createCustomerErrors","createCustomerCleanError","createCustomerCleanData","listCustomer","CreateCustomerForm","CustomersTable","onRow","onSelectCustomer","container","ButtonCreateCustomer","CustomersPage","createCustomer","removeCustomer","NotFound","CallbackOAuth","split","deletedUserMsg","listRole","permission","UpdateUserDrawer","userChange","setUserChange","newRole","UpdateUserForm","UsersTable","users","table","UsersPage","formShape","createCustomField","func","bool","buttonSubmit","FormCreateCustomfield","getCustomFields","global","valueTypes","settingActions","getValueTypes","setDefaultValue","createCustomFieldError","createCustomFieldErrors","createCustomFieldCleanData","createCustomFieldCleanError","is_global","handleChangeInput","re","regex","help","textTransform","TextArea","valuePropName","UpdateCustomFieldDrawer","updateCustomField","removeAssigneeProject","createAssigneeProject","updateCustomFieldError","updateCustomFieldErrors","removeAssigneeProjectError","removeAssigneeProjectErrors","createAssigneeProjectError","createAssigneeProjectErrors","arrRemove","setArrRemove","arrCreate","setArrCreate","updateCustomFieldCleanError","updateCustomFieldCleanData","removeAssigneeProjectCleanError","createAssigneeProjectCleanError","infocustomField","bodyCreateAssignee","idCustomField","bodyRemoveAssignee","onDeselect","created","listProject","reduce","accumulator","currentValue","removed","UpdateCustomFieldForm","ButtonEditCustomField","ButtonDeleteCustomField","removeCustomField","TableCustomFields","removeCustomFieldError","removeCustomFieldErrors","i","removeCustomFieldCleanData","removeCustomFieldCleanError","handleDelete","EditableCell","editable","children","handleSave","validateCell","restProps","getBaseCustomFields","validate","setValidate","save","childNode","onPressEnter","onBlur","FirstSettingCustomField","baseCustomFields","globalCustomFields","setGlobalCustomFields","setDataSource","count","setCount","validateError","setValidateError","row","newData","findIndex","splice","fieldName","boolean","cloneValidateCell","error","onCell","valueType","float","listCustomField","rowClassName","components","cell","marginTop","default_value","value_type","addCustomFieldButton","addGlobalCustomFieldButton","ButtonCreateCustomField","ButtonCreateGlobalCustomField","SettingPage","getCustomFieldsError","getCustomFieldsErrors","visibleCustomField","setVisibleCustomField","visibleGlobalCustomField","setVisibleGlobalCustomField","setCustomField","globalCustomField","setGlobalCustomField","getCustomFieldsCleanError","dataGlobal","UpdateCustomer","getCustomer","updateCustomerError","updateCustomerErrors","updateCustomerCleanError","updateCustomer","UpdateCustomerForm","ButtonEditCustomer","handleEditCustomerDrawer","CustomerDetail","joinedProjects","UpdateCustomerDrawer","updateCustomerCleanData","ButtonRemoveCustomer","removeCustomerError","removeCustomerErrors","getProjectsByCustomer","removeCustomerCleanData","removeCustomerCleanError","AppRoutes","Dashboard","exact","ProjectPage","Customerpage","languageOptions","LanguageSwitcher","switchLanguage","handleChangeLanguage","header","trigger","leftContents","rightContents","Header","layoutCheck","setCollapse","CustomMenu","to","typeIcon","SubMenu","sider","menu","menu_collapse","logo","user_collapse","Sider","dispacth","collapsible","collapsed","theme","selectedKeys","openKeys","onOpenChange","selectSubMenu","handleSelectSubMenu","clear","App","currentAppLocale","content","padding","Content","ReactDOM","Provider","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.592b8b1a.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","export default ({ actions = {}, process = () => {} }) => (payload) => async (\r\n  dispatch,\r\n  getState\r\n) => {\r\n  const execute = async () => {\r\n    const { startAction, successAction, failAction } = actions;\r\n\r\n    startAction && dispatch(startAction(payload));\r\n    try {\r\n      const result = await process({ payload, dispatch, getState });\r\n\r\n      successAction && dispatch(successAction({ result, params: payload }));\r\n\r\n      return result;\r\n    } catch (error) {\r\n      if (error.response && error.response.status) {\r\n        return failAction && dispatch(failAction(error.response.data));\r\n      }\r\n      return failAction && dispatch(failAction(error));\r\n    }\r\n  };\r\n\r\n  return execute();\r\n};\r\n","import axios from 'axios';\r\n\r\nconst login = async (accessCode) => {\r\n  let userLogin = await axios.post(\r\n    `${process.env.REACT_APP_API}/auth/login`,\r\n    { accessCode },\r\n    { withCredentials: true }\r\n  );\r\n  return userLogin;\r\n};\r\n\r\nconst refreshLogin = async () => {\r\n  let userLogin = await axios.get(`${process.env.REACT_APP_API}/auth/refreshLogin`, {\r\n    withCredentials: true\r\n  });\r\n  return userLogin;\r\n};\r\n\r\nconst refreshToken = async () => {\r\n  let refreshToken = await axios.get(`${process.env.REACT_APP_API}/auth/refreshToken`, {\r\n    withCredentials: true\r\n  });\r\n  return refreshToken;\r\n};\r\n\r\nconst logout = async (staff_code) =>\r\n  axios.post(\r\n    `${process.env.REACT_APP_API}/auth/logout`,\r\n    { staff_code },\r\n    {\r\n      withCredentials: true\r\n    }\r\n  );\r\n\r\nexport const authApi = {\r\n  login,\r\n  refreshLogin,\r\n  refreshToken,\r\n  logout\r\n};\r\n","import axios from 'axios';\r\nimport { authApi } from '../api/auth/authApi';\r\nimport Cookies from 'js-cookie';\r\n\r\nconst getHeaders = () => ({});\r\n\r\nconst refreshToken = async () => {\r\n  let expresIn = localStorage.getItem('expresIn');\r\n  let now = new Date();\r\n  if (expresIn && parseInt(expresIn) < now.getTime()) {\r\n    let res = await authApi.refreshToken();\r\n    if (res.data.statusCode !== 400) {\r\n      Cookies.set('access-token', res.data.access_token, { secure: false, path: '/' });\r\n    }\r\n  }\r\n};\r\n\r\nconst apiGet = async (payload) => {\r\n  const option = payload && payload.option ? payload.option : {};\r\n  await refreshToken();\r\n  return axios\r\n    .get(\r\n      payload && payload.param\r\n        ? `${process.env.REACT_APP_API}/${payload.path}/${payload.param}`\r\n        : `${process.env.REACT_APP_API}/${payload.path}`,\r\n      {\r\n        ...option,\r\n        headers: getHeaders(),\r\n        withCredentials: true\r\n      }\r\n    )\r\n    .then((res) => res.data);\r\n};\r\n\r\nconst apiPost = async (payload) => {\r\n  const body = payload && payload.body ? payload.body : {};\r\n  const option = payload && payload.option ? payload.option : {};\r\n  await refreshToken();\r\n  return axios\r\n    .post(\r\n      payload.param\r\n        ? `${process.env.REACT_APP_API}/${payload.path}/${payload.param}`\r\n        : `${process.env.REACT_APP_API}/${payload.path}`,\r\n      body,\r\n      {\r\n        ...option,\r\n        headers: getHeaders(),\r\n        withCredentials: true\r\n      }\r\n    )\r\n    .then((res) => res.data);\r\n};\r\n\r\nconst apiPut = async (payload) => {\r\n  const body = payload && payload.body ? payload.body : {};\r\n  const option = payload && payload.option ? payload.option : {};\r\n  await refreshToken();\r\n  return axios\r\n    .put(\r\n      payload.param\r\n        ? `${process.env.REACT_APP_API}/${payload.path}/${payload.param}`\r\n        : `${process.env.REACT_APP_API}/${payload.path}`,\r\n      body,\r\n      {\r\n        ...option,\r\n        headers: getHeaders(),\r\n        withCredentials: true\r\n      }\r\n    )\r\n    .then((res) => res.data);\r\n};\r\n\r\nconst apiDelete = async (payload) => {\r\n  const body = payload && payload.body ? payload.body : {};\r\n  const option = payload && payload.option ? payload.option : {};\r\n  await refreshToken();\r\n  return axios\r\n    .delete(\r\n      payload.param\r\n        ? `${process.env.REACT_APP_API}/${payload.path}/${payload.param}`\r\n        : `${process.env.REACT_APP_API}/${payload.path}`,\r\n      {\r\n        data: body,\r\n        ...option,\r\n        headers: getHeaders(),\r\n        withCredentials: true\r\n      }\r\n    )\r\n    .then((res) => res.data);\r\n};\r\n\r\nconst Api = {\r\n  GET: apiGet,\r\n  POST: apiPost,\r\n  PUT: apiPut,\r\n  DELETE: apiDelete\r\n};\r\n\r\nexport default Api;\r\n","import { createSlice } from 'redux-starter-kit';\r\nimport createOperation from './createOperation';\r\nimport api from './apiService';\r\n\r\n/**\r\n * // name of module\r\n * @param moduleName : string\r\n * // provide api action list you want generate\r\n * // parm method include ['GET', 'POST', 'PUT', 'DELETE']\r\n * @param apiActions : arrayOf[\r\n *   {actionName: string, stateName: string, method: string}\r\n * ]\r\n * // provide reducer actions list you want generate\r\n * @param reducerActions: arrayOf[{actionName: string, stateName: string}]\r\n * // provide default value for state if need\r\n * @param defaultState: object\r\n */\r\n\r\nconst CreateResourceHandler = (\r\n  moduleName,\r\n  apiActions = [],\r\n  reducerActions = [],\r\n  defaultState = {}\r\n) => {\r\n  let initialState = {\r\n    loading: false\r\n  };\r\n  apiActions.forEach((value) => {\r\n    const lastState = initialState;\r\n    initialState = {\r\n      ...lastState,\r\n      [value.stateName]: undefined\r\n    };\r\n  });\r\n  reducerActions.forEach((value) => {\r\n    const lastState = initialState;\r\n    initialState = {\r\n      ...lastState,\r\n      [value.stateName]: undefined\r\n    };\r\n  });\r\n  if (defaultState) {\r\n    const lastState = initialState;\r\n    initialState = {\r\n      ...lastState,\r\n      ...defaultState\r\n    };\r\n  }\r\n\r\n  let initialReducerActions = {};\r\n  apiActions.forEach((value) => {\r\n    const lastReducer = initialReducerActions;\r\n    initialReducerActions = {\r\n      ...lastReducer,\r\n      [`${value.actionName}Started`]: (state) => ({\r\n        ...state,\r\n        loading: true,\r\n        [`${value.actionName}Error`]: false,\r\n        [`${value.actionName}Errors`]: null\r\n      }),\r\n      [`${value.actionName}Success`]: (state, { payload }) => ({\r\n        ...state,\r\n        loading: false,\r\n        [value.stateName]: payload.result\r\n      }),\r\n      [`${value.actionName}Failed`]: (state, { payload }) => ({\r\n        ...state,\r\n        loading: false,\r\n        [`${value.actionName}Errors`]: payload,\r\n        [`${value.actionName}Error`]: true\r\n      }),\r\n      [`${value.actionName}CleanError`]: (state) => ({\r\n        ...state,\r\n        [`${value.actionName}Errors`]: null,\r\n        [`${value.actionName}Error`]: false\r\n      }),\r\n      [`${value.actionName}CleanData`]: (state) => ({\r\n        ...state,\r\n        [value.stateName]: null\r\n      })\r\n    };\r\n  });\r\n  reducerActions.forEach((value) => {\r\n    const lastReducer = initialReducerActions;\r\n    initialReducerActions = {\r\n      ...lastReducer,\r\n      [value.actionName]: (state, { payload }) => ({\r\n        ...state,\r\n        [value.stateName]: payload\r\n      })\r\n    };\r\n  });\r\n\r\n  const slice = createSlice({\r\n    slice: moduleName,\r\n    initialState,\r\n    reducers: initialReducerActions\r\n  });\r\n\r\n  let exportApiActions = {};\r\n  apiActions.forEach((value) => {\r\n    const lastExportActions = exportApiActions;\r\n    exportApiActions = {\r\n      ...lastExportActions,\r\n      [value.actionName]: createOperation({\r\n        actions: {\r\n          startAction: slice.actions[`${value.actionName}Started`],\r\n          successAction: slice.actions[`${value.actionName}Success`],\r\n          failAction: slice.actions[`${value.actionName}Failed`]\r\n        },\r\n        process: ({ payload }) => api[value.method](payload)\r\n      })\r\n    };\r\n  });\r\n\r\n  return {\r\n    reducer: slice.reducer,\r\n    actions: { ...slice.actions, ...exportApiActions }\r\n  };\r\n};\r\n\r\nexport default CreateResourceHandler;\r\n","import createResourceHandler from '../../../utils/createResourceHandler';\r\n\r\nconst reducerActions = [\r\n  {\r\n    actionName: 'selectItem',\r\n    stateName: 'selectedItem'\r\n  },\r\n  {\r\n    actionName: 'selectSubMenu',\r\n    stateName: 'selectedSubMenu'\r\n  },\r\n  {\r\n    actionName: 'setCollapse',\r\n    stateName: 'isCollapsed'\r\n  }\r\n];\r\nconst defaultState = {\r\n  selectedItem: [],\r\n  selectedSubMenu: [],\r\n  isCollapsed: false\r\n};\r\n\r\nconst store = createResourceHandler('layout', [], reducerActions, defaultState);\r\n\r\nexport const { actions, reducer } = store;\r\n","import createResourceHandler from '../../../utils/createResourceHandler';\r\n\r\nconst reducerActions = [\r\n  {\r\n    actionName: 'switchLanguage',\r\n    stateName: 'locale'\r\n  }\r\n];\r\nconst defaultState = {\r\n  locale: 'vi'\r\n};\r\n\r\nconst store = createResourceHandler('languageSwitcher', [], reducerActions, defaultState);\r\n\r\nexport const { actions, reducer } = store;\r\n","import createResourceHandler from '../../../utils/createResourceHandler';\r\n\r\nconst apiActions = [\r\n  {\r\n    actionName: 'getProjects',\r\n    stateName: 'list',\r\n    method: 'GET'\r\n  },\r\n  {\r\n    actionName: 'getProject',\r\n    stateName: 'project',\r\n    method: 'GET'\r\n  },\r\n  {\r\n    actionName: 'createProject',\r\n    stateName: 'createProjectResult',\r\n    method: 'POST'\r\n  },\r\n  {\r\n    actionName: 'updateProject',\r\n    stateName: 'updateProjectResult',\r\n    method: 'PUT'\r\n  },\r\n  {\r\n    actionName: 'removeProject',\r\n    stateName: 'removeProjectResult',\r\n    method: 'POST'\r\n  },\r\n  {\r\n    actionName: 'getJoinedMembers',\r\n    stateName: 'joinedMembers',\r\n    method: 'GET'\r\n  },\r\n  {\r\n    actionName: 'addMember',\r\n    stateName: 'addMemberResult',\r\n    method: 'POST'\r\n  },\r\n  {\r\n    actionName: 'removeMember',\r\n    stateName: 'removeMemberResult',\r\n    method: 'POST'\r\n  },\r\n  {\r\n    actionName: 'updateMember',\r\n    stateName: 'updateMemberResult',\r\n    method: 'PUT'\r\n  },\r\n  {\r\n    actionName: 'getMemberHistory',\r\n    stateName: 'members',\r\n    method: 'POST'\r\n  }\r\n];\r\n\r\nconst reducerActions = [];\r\n\r\nconst defaultState = {\r\n  list: [],\r\n  project: null,\r\n  members: null,\r\n  joinedMembers: null,\r\n  createProjectResult: null,\r\n  updateProjectResult: null,\r\n  removeProjectResult: null,\r\n  addMemberResult: null,\r\n  updateMemberResult: null,\r\n  removeMemberResult: null\r\n};\r\n\r\nconst store = createResourceHandler('projects', apiActions, reducerActions, defaultState);\r\n\r\nexport const { actions, reducer } = store;\r\n","import createResourceHandler from '../../../utils/createResourceHandler';\r\n\r\nconst apiActions = [\r\n  {\r\n    actionName: 'getCustomers',\r\n    stateName: 'list',\r\n    method: 'GET'\r\n  },\r\n  {\r\n    actionName: 'getProjectsByCustomer',\r\n    stateName: 'projectsOfCustomer',\r\n    method: 'GET'\r\n  },\r\n  {\r\n    actionName: 'getCustomer',\r\n    stateName: 'customer',\r\n    method: 'GET'\r\n  },\r\n  {\r\n    actionName: 'createCustomer',\r\n    stateName: 'createCustomerResult',\r\n    method: 'POST'\r\n  },\r\n  {\r\n    actionName: 'updateCustomer',\r\n    stateName: 'updateCustomerResult',\r\n    apiUrl: 'customers',\r\n    method: 'PUT'\r\n  },\r\n  {\r\n    actionName: 'removeCustomer',\r\n    stateName: 'removeCustomerResult',\r\n    method: 'POST'\r\n  },\r\n];\r\n\r\nconst reducerActions = [\r\n  {\r\n    actionName: 'cleanGetCustomersError',\r\n    stateName: 'getCustomersError'\r\n  }\r\n];\r\n\r\nconst defaultState = {\r\n  list: [],\r\n  customer: null,\r\n  projectsOfCustomer:[], \r\n  createCustomerResult: null,\r\n  updateCustomerResult: null,\r\n  removeCustomerResult: null\r\n};\r\n\r\nconst store = createResourceHandler('customers', apiActions, reducerActions, defaultState);\r\n\r\nexport const { actions, reducer } = store;\r\n","import createResourceHandler from '../../../utils/createResourceHandler';\r\n\r\nconst apiActions = [\r\n  {\r\n    actionName: 'getMembers',\r\n    stateName: 'list',\r\n    method: 'GET'\r\n  },\r\n  {\r\n    actionName: 'createMember',\r\n    stateName: 'createMemberResult',\r\n    method: 'POST'\r\n  },\r\n  {\r\n    actionName: 'updateMember',\r\n    stateName: 'updateMemberResult',\r\n    apiUrl: 'members',\r\n    method: 'PUT'\r\n  },\r\n  {\r\n    actionName: 'removeMember',\r\n    stateName: 'removeMemberResult',\r\n    method: 'POST'\r\n  },\r\n];\r\n\r\nconst reducerActions = [\r\n  {\r\n    actionName: 'cleanGetMembersError',\r\n    stateName: 'getMembersError'\r\n  }\r\n];\r\n\r\nconst defaultState = {\r\n  list: [],\r\n  createMemberResult: null,\r\n  updateMemberResult: null,\r\n  removeMemberResult: null,\r\n};\r\n\r\nconst store = createResourceHandler('members', apiActions, reducerActions, defaultState);\r\n\r\nexport const { actions, reducer } = store;\r\n","import createResourceHandler from '../../../utils/createResourceHandler';\r\n\r\nconst apiActions = [\r\n  {\r\n    actionName: 'getValueTypes',\r\n    stateName: 'valueTypes',\r\n    method: 'GET'\r\n  },\r\n  {\r\n    actionName: 'getBaseCustomFields',\r\n    stateName: 'baseCustomFields',\r\n    method: 'GET'\r\n  },\r\n  {\r\n    actionName: 'createCustomField',\r\n    stateName: 'createCustomFieldResult',\r\n    method: 'POST'\r\n  },\r\n  {\r\n    actionName: 'getCustomFields',\r\n    stateName: 'customfields',\r\n    method: 'GET'\r\n  },\r\n  {\r\n    actionName: 'removeCustomField',\r\n    stateName: 'removeCustomFieldResult',\r\n    method: 'DELETE'\r\n  },\r\n  {\r\n    actionName: 'updateCustomField',\r\n    stateName: 'updateCustomFieldResult',\r\n    method: 'PUT'\r\n  },\r\n  {\r\n    actionName: 'createAssigneeProject',\r\n    stateName: 'createAssigneeProjectResult',\r\n    method: 'POST'\r\n  },\r\n  {\r\n    actionName: 'removeAssigneeProject',\r\n    stateName: 'removeAssigneeProjectResult',\r\n    method: 'DELETE'\r\n  },\r\n];\r\n\r\nconst reducerActions = [\r\n  {\r\n    actionName: 'cleanCustomFieldError',\r\n    stateName: 'getCustomFieldError'\r\n  }\r\n];\r\n\r\nconst defaultState = {\r\n  customfields: [],\r\n  customfield: null,\r\n  createCustomFieldResult: null,\r\n  removeCustomFieldResult: null,\r\n  getCustomFieldResult: null,\r\n  updateCustomFieldResult: null,\r\n  createAssigneeProjectResult: null,\r\n  removeAssigneeProjectResult: null\r\n};\r\n\r\nconst store = createResourceHandler('setting', apiActions, reducerActions, defaultState);\r\n\r\nexport const { actions, reducer } = store;\r\n","const initState = {\r\n  isShow: true\r\n};\r\n\r\nexport const layoutReducer = (state = initState, action) => {\r\n  switch (action.type) {\r\n    case 'HIDE_LAYOUT':\r\n      return {\r\n        ...state,\r\n        isShow: false\r\n      };\r\n    case 'SHOW_LAYOUT':\r\n      return {\r\n        ...state,\r\n        isShow: true\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","const initState = {\r\n  isLogin: false,\r\n  user: {}\r\n};\r\n\r\nexport const authReducer = (state = initState, action) => {\r\n  switch (action.type) {\r\n    case 'LOGIN':\r\n      return {\r\n        ...state,\r\n        isLogin: true,\r\n        user: action.user\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { configureStore, getDefaultMiddleware, combineReducers } from 'redux-starter-kit';\r\nimport { routerReducer, routerMiddleware } from 'react-router-redux';\r\nimport { createBrowserHistory } from 'history';\r\n\r\nimport { reducer as layoutSliderReducer } from '../modules/layout/store';\r\nimport { reducer as languageSwitcherReducer } from '../modules/languageSwitcher/store';\r\nimport { reducer as projectsReducer } from '../modules/project/store';\r\nimport { reducer as customersReducer } from '../modules/customer/store';\r\nimport { reducer as membersReducer } from '../modules/member/store';\r\nimport { reducer as settingReducer } from '../modules/setting/store';\r\n\r\nimport { layoutReducer } from '../reducers/layoutReducer';\r\nimport { authReducer } from '../reducers/authReducer';\r\n\r\n\r\nexport const history = createBrowserHistory();\r\nconst routeMiddleware = routerMiddleware(history);\r\n\r\nexport const rootReducer = combineReducers({\r\n  router: routerReducer,\r\n  layout: layoutReducer,\r\n  layoutSlider: layoutSliderReducer,\r\n  languageSwitcher: languageSwitcherReducer,\r\n  auth: authReducer,\r\n  projects: projectsReducer,\r\n  customers: customersReducer,\r\n  members: membersReducer,\r\n  setting: settingReducer\r\n});\r\n\r\nconst store = configureStore({\r\n  reducer: rootReducer,\r\n  middleware: [routeMiddleware, ...getDefaultMiddleware({ serializableCheck: false })],\r\n  devTools: process.env.NODE_ENV !== 'production'\r\n});\r\n\r\nexport default store;\r\n","import antdEn from 'antd/lib/locale-provider/en_US';\r\nimport appLocaleData from 'react-intl/locale-data/en';\r\nimport enMessages from '../locales/en_US';\r\n\r\nconst EnLang = {\r\n  messages: {\r\n    ...enMessages\r\n  },\r\n  antd: antdEn,\r\n  locale: 'en-US',\r\n  data: appLocaleData\r\n};\r\n\r\nexport default EnLang;\r\n","import antdVi from 'antd/lib/locale-provider/vi_VN';\r\nimport appLocaleData from 'react-intl/locale-data/vi';\r\nimport viMessages from '../locales/vi_VN';\r\n\r\nconst ViLang = {\r\n  messages: {\r\n    ...viMessages\r\n  },\r\n  antd: antdVi,\r\n  locale: 'vi-VN',\r\n  data: appLocaleData\r\n};\r\n\r\nexport default ViLang;\r\n","import Enlang from './entries/en_US';\r\nimport Vilang from './entries/vi_VN';\r\n\r\nimport { addLocaleData } from 'react-intl';\r\n\r\nconst AppLocale = {\r\n  en: Enlang,\r\n  vi: Vilang\r\n};\r\naddLocaleData(AppLocale.en.data);\r\naddLocaleData(AppLocale.vi.data);\r\n\r\nexport default AppLocale;\r\n","const hideLayout = 'HIDE_LAYOUT';\r\nconst showLayout = 'SHOW_LAYOUT';\r\n\r\nexport const dispatchHideLayout = (dispatch) => {\r\n  dispatch({ type: hideLayout });\r\n};\r\n\r\nexport const dispatchShowLayout = (dispatch) => {\r\n  dispatch({ type: showLayout });\r\n};\r\n","const login = 'LOGIN';\r\n\r\nexport const dispatchLogin = (dispatch, user) => {\r\n  dispatch({ type: login, user });\r\n};\r\n","import React, { useEffect } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { SyncLoader } from 'react-spinners';\r\nimport { css } from '@emotion/core';\r\nimport jwtDecode from 'jwt-decode';\r\nimport Cookies from 'js-cookie';\r\nimport { Row } from 'antd';\r\n\r\nimport { dispatchHideLayout, dispatchShowLayout } from '../actions/layout';\r\nimport { dispatchLogin } from '../actions/auth';\r\nimport { authApi } from '../api/auth/authApi';\r\n\r\nfunction LoadingPage(props) {\r\n  const dispatch = useDispatch();\r\n  useEffect(() => {\r\n    dispatchHideLayout(dispatch);\r\n\r\n    authApi.refreshLogin().then((userLogin) => {\r\n      if (userLogin.data.statusCode === 400) {\r\n        Cookies.remove('access-token', { path: '/' });\r\n        props.history.push('/login');\r\n      } else {\r\n        const userInfo = jwtDecode(userLogin.data.access_token);\r\n        localStorage.setItem('expresIn', userInfo.exp * 1000);\r\n        Cookies.set('access-token', userLogin.data.access_token, { secure: false, path: '/' });\r\n        dispatchShowLayout(dispatch);\r\n        dispatchLogin(dispatch, { ...userInfo });\r\n      }\r\n    });\r\n    // eslint-disable-next-line react/destructuring-assignment\r\n  }, [dispatch, props.location.search, props.history]);\r\n\r\n  const override = css`\r\n    display: block;\r\n\r\n    color: red;\r\n  `;\r\n\r\n  return (\r\n    <Row\r\n      style={{\r\n        backgroundColor: '#fff',\r\n        width: '100vw',\r\n        height: '100vh',\r\n        paddingTop: 100,\r\n        display: 'flex',\r\n        flexDirection: 'row',\r\n        justifyContent: 'center',\r\n        alignItems: 'center'\r\n      }}>\r\n      <h2 style={{ color: '#747CDD', marginRight: 10 }}>Loading</h2>\r\n      <SyncLoader css={override} sizeUnit=\"px\" size={10} color=\"#747CDD\" />\r\n    </Row>\r\n  );\r\n}\r\n\r\nexport default LoadingPage;\r\n","import React from 'react';\r\nimport { Route } from 'react-router-dom';\r\nimport { useSelector } from 'react-redux';\r\nimport LoadingPage from '../pages/LoadingPage';\r\n\r\nfunction RouteNormal({ component: Component, ...rest }) {\r\n  const user = useSelector((state) => state.auth);\r\n  const checkAuth = user.isLogin;\r\n  return (\r\n    <>\r\n      {checkAuth ? (\r\n        <Route {...rest} render={(props) => <Component {...props}></Component>} />\r\n      ) : (\r\n        <Route {...rest} component={LoadingPage} />\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default RouteNormal;\r\n","import React from 'react';\r\nimport { Route } from 'react-router-dom';\r\nimport { useSelector } from 'react-redux';\r\nimport LoadingPage from '../pages/LoadingPage';\r\n\r\nfunction RouteWithManager({ component: Component, ...rest }) {\r\n  const user = useSelector((state) => state.auth);\r\n  const checkAuth = user.isLogin;\r\n  const checkRole = user.user.type === 'manager' || user.user.type === 'admin';\r\n  const renderRoute = (props) => {\r\n    if (checkRole) {\r\n      return <Component {...props}></Component>;\r\n    }\r\n    return <p>Ban khong co quyen truy cap</p>;\r\n  };\r\n  return (\r\n    <>\r\n      {checkAuth ? (\r\n        <Route {...rest} render={(props) => renderRoute(props)}></Route>\r\n      ) : (\r\n        <Route {...rest} component={LoadingPage}></Route>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default RouteWithManager;\r\n","import React from 'react';\r\nimport { Route } from 'react-router-dom';\r\nimport { useSelector } from 'react-redux';\r\nimport LoadingPage from '../pages/LoadingPage';\r\n\r\nfunction RouteWithAdmin({ component: Component, ...rest }) {\r\n  const user = useSelector((state) => state.auth);\r\n  const checkAuth = user.isLogin;\r\n  const checkRole = user.user.type === 'admin';\r\n  const renderRoute = (props) => {\r\n    if (checkRole) {\r\n      return <Component {...props}></Component>;\r\n    }\r\n    return <p>Ban khong co quyen</p>;\r\n  };\r\n  return (\r\n    <>\r\n      {checkAuth ? (\r\n        <Route {...rest} render={(props) => renderRoute(props)}></Route>\r\n      ) : (\r\n        <Route {...rest} component={LoadingPage}></Route>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default RouteWithAdmin;\r\n","import React, { useEffect } from 'react';\r\nimport { gantt } from 'dhtmlx-gantt';\r\nimport 'dhtmlx-gantt/codebase/dhtmlxgantt.css';\r\nimport 'dhtmlx-gantt/codebase/ext/dhtmlxgantt_tooltip.js';\r\n\r\nconst Gantt = ({ tasks, intl }) => {\r\n  let ganttContainer = null\r\n  useEffect(() => {\r\n    gantt.config = {\r\n      ...gantt.config,\r\n      scale_unit: 'month',\r\n      xml_date: \"%Y-%m-%d %H:%i\"\r\n    };\r\n    gantt.showLightbox = function (id) {\r\n      return null\r\n    }\r\n  }, [])\r\n  //fix language\r\n  useEffect(() => {\r\n    gantt.templates.tooltip_text = function (start, end, task) {\r\n      return `<b>${intl.formatMessage({ id: 'dashboard.projectName' })}:</b> ` + task.text + `<br/><b>${intl.formatMessage({ id: 'dashboard.startTime' })}:</b> `\r\n        + gantt.templates.tooltip_date_format(start)\r\n        + `<br/><b>${intl.formatMessage({ id: 'dashboard.endTime' })}:</b> `\r\n        + gantt.templates.tooltip_date_format(end);\r\n    };\r\n    gantt.config = {\r\n      ...gantt.config,\r\n      columns: [\r\n        { name: \"text\", label: intl.formatMessage({ id: 'dashboard.projectName' }), align: \"center\", width: \"*\" },\r\n        { name: \"start_date\", label: intl.formatMessage({ id: 'dashboard.startTime' }), align: \"center\", width: \"*\" },\r\n        { name: \"end_date\", label: intl.formatMessage({ id: 'dashboard.endTime' }), align: \"center\", width: \"*\" },\r\n      ],\r\n      date_scale: intl.formatMessage({ id: 'dashboard.config.scale' }),\r\n    }\r\n    gantt.init(ganttContainer);\r\n  }, [intl, ganttContainer])\r\n  //config\r\n  useEffect(() => {\r\n    gantt.clearAll();\r\n    gantt.init(ganttContainer);\r\n    gantt.parse(tasks);\r\n    gantt.render();\r\n  }, [ganttContainer, tasks])\r\n  return (\r\n    <div\r\n      ref={(input) => { ganttContainer = input }}\r\n      style={{ width: '100%', height: '100%' }}\r\n    ></div>\r\n  );\r\n}\r\nexport default Gantt;\r\n","import React, { useEffect, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport Gantt from \"../modules/dashbroad/Gantt/Gantt\";\r\nimport { actions as layoutActions } from '../modules/layout/store';\r\nimport { actions as projectActions } from '../modules/project/store';\r\nimport moment from 'moment';\r\nimport { DatePicker, Radio } from 'antd';\r\nimport '../assets/styles/gantt/main.scss';\r\nimport { FormattedMessage, injectIntl } from 'react-intl';\r\n\r\n\r\nconst propTypes = {\r\n  history: PropTypes.shape({}).isRequired,\r\n  intl: PropTypes.shape({}).isRequired\r\n\r\n};\r\n\r\nconst defaultProps = {};\r\nconst DashbroadPage = ({ history, intl }) => {\r\n  const dispatch = useDispatch();\r\n  const { RangePicker } = DatePicker;\r\n  const [data, setData] = useState({ data: null })\r\n  const [value, setValue] = useState([moment(new Date()).subtract(3, 'months'), moment(new Date())])\r\n  const [mode, setMode] = useState(['month', 'month'])\r\n  const { list } = useSelector(\r\n    (state) => state.projects\r\n  );\r\n  const { user } = useSelector(\r\n    (state) => state.auth\r\n  );\r\n  //hanlde when change time on monthpicker\r\n  const handlePanelChange = (value, mode) => {\r\n    setValue(value);\r\n    setMode([mode[0] === 'date' ? 'month' : mode[0], mode[1] === 'date' ? 'month' : mode[1]]);\r\n  }\r\n  //handle when change time on fast selector 3 months, 6 months, 1 year\r\n  const handleChange = (e) => {\r\n    setValue([moment(new Date()).subtract(e.target.value, 'months'), moment(new Date())])\r\n  }\r\n  //reload time space when change on buttons\r\n  useEffect(() => {\r\n    let colors = [\"#99cc00\", \"#BDC667\", \"#3C6174\", \"#0672AA\", \"#77966D\", \"#56282D\", \"#cc0000\", \"#0000ff\", \"#00ffcc\"];\r\n    if (value.length > 0) {\r\n      let startTime = moment(value[0]._d).format('YYYYMM');\r\n      let endTime = moment(value[1]._d).format('YYYYMM');\r\n      const result = list.filter(project =>\r\n        !(parseInt(moment(new Date(parseInt(project.start_time))).format('YYYYMM')) > parseInt(endTime) ||\r\n          parseInt(moment(new Date(parseInt(project.end_time))).format('YYYYMM')) < parseInt(startTime))\r\n      )\r\n      setData({ data: null })\r\n      setData({\r\n        data: result.map(project => {\r\n          return {\r\n            id: project.id, text: project.name,\r\n            end_date: moment(parseInt(project.end_time, 10)).format('YYYY-MM-DD'),\r\n            start_date: moment(parseInt(project.start_time, 10)).format('YYYY-MM-DD'),\r\n            readonly: true,\r\n            color: colors[project.id % colors.length],\r\n          }\r\n        })\r\n      })\r\n    }\r\n  }, [value, list])\r\n  useEffect(() => {\r\n    dispatch(layoutActions.selectItem(['dashboard']));\r\n    user.type === \"admin\" ?\r\n      dispatch(\r\n        projectActions.getProjects({\r\n          path: 'projects'\r\n        })\r\n      ) : dispatch(\r\n        projectActions.getProjects({\r\n          path: `projects/byUser/${user.staff_code}`\r\n        })\r\n      );\r\n  }, [dispatch, user]);\r\n  return (\r\n    <div>\r\n      <div className=\"zoom-bar\">\r\n        <div className=\"tool-bar\">\r\n          <div>\r\n            <Radio.Group defaultValue=\"3\" onChange={handleChange}>\r\n              <Radio.Button value=\"3\"><FormattedMessage id=\"dashboard.threeMonths\" /></Radio.Button>\r\n              <Radio.Button value=\"6\"><FormattedMessage id=\"dashboard.sixMonths\" /></Radio.Button>\r\n              <Radio.Button value=\"12\"><FormattedMessage id=\"dashboard.oneYear\" /></Radio.Button>\r\n            </Radio.Group>\r\n          </div>\r\n          <div>\r\n            <RangePicker\r\n              placeholder={['Start month', 'End month']}\r\n              format=\"YYYY-MM\"\r\n              mode={mode}\r\n              value={value}\r\n              onPanelChange={handlePanelChange}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {data.data &&\r\n        <div className=\"gantt-container\">\r\n          {data.data && <Gantt\r\n            tasks={data}\r\n            intl={intl}\r\n          />}\r\n        </div>}\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nDashbroadPage.propTypes = propTypes;\r\n\r\nDashbroadPage.defaultProps = defaultProps;\r\n\r\nexport default injectIntl(DashbroadPage, {});\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Typography, Divider } from 'antd';\r\n\r\nconst propTypes = {\r\n  title: PropTypes.oneOfType([PropTypes.string, PropTypes.shape()]).isRequired\r\n};\r\n\r\nconst defaultProps = {};\r\n\r\nconst HeaderTitle = React.memo(({ title }) => (\r\n  <React.Fragment>\r\n    <Typography.Title level={2}>{title}</Typography.Title>\r\n    <Divider />\r\n  </React.Fragment>\r\n));\r\n\r\nHeaderTitle.propTypes = propTypes;\r\n\r\nHeaderTitle.defaultProps = defaultProps;\r\n\r\nexport default HeaderTitle;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { history } from '../../../../store';\r\nimport moment from 'moment';\r\nimport { css } from 'emotion';\r\n\r\nimport { List, Skeleton, Typography, Row, Tag } from 'antd';\r\nimport { FormattedMessage } from 'react-intl';\r\n\r\nconst propTypes = {\r\n  list: PropTypes.arrayOf(PropTypes.shape({})).isRequired\r\n};\r\n\r\nconst styles = {\r\n  title: css`\r\n    font-size: 17px;\r\n    font-weight: bold;\r\n  `,\r\n  listItem: css`\r\n    cursor: pointer;\r\n    &:hover {\r\n      background-color: #f1f1f1;\r\n    }\r\n  `\r\n};\r\n\r\nconst ProjectsList = ({ list }) => {\r\n  const onSelectProject = (item) => {\r\n    history.push(`/project/detail/${item.id}`);\r\n  };\r\n\r\n  return (\r\n    <List\r\n      itemLayout=\"horizontal\"\r\n      dataSource={list}\r\n      renderItem={(item) => (\r\n        <List.Item onClick={() => onSelectProject(item)} className={styles.listItem}>\r\n          <Skeleton loading={false} active>\r\n            <List.Item.Meta\r\n              title={\r\n                <Row style={{ marginLeft: 5 }} className={styles.title}>\r\n                  {item.name}\r\n                </Row>\r\n              }\r\n              description={\r\n                <Row style={{ marginLeft: 5 }}>\r\n                  <Typography.Paragraph style={{ margin: 0 }}>\r\n                  <FormattedMessage id=\"projects.getProjects.customer\" />:&nbsp;{item.customer.name}\r\n                  </Typography.Paragraph>\r\n                  <Typography.Paragraph style={{ margin: 0 }}>\r\n                    <FormattedMessage id=\"projects.getProjects.date\" />\r\n                    :&nbsp;\r\n                    {moment(parseInt(item.start_time, 10)).format('DD/MM/YYYY')} -&nbsp;\r\n                    {item.end_time\r\n                      ? moment(parseInt(item.end_time, 10)).format('DD/MM/YYYY')\r\n                      : null}\r\n                  </Typography.Paragraph>\r\n                </Row>\r\n              }\r\n            />\r\n            <Row>\r\n              {item.status === 'running' && <Tag color=\"#108ee9\"><FormattedMessage id=\"projects.status.running\" /></Tag>}\r\n              {item.status === 'stopped' && <Tag color=\"#f5222D\"><FormattedMessage id=\"projects.status.stopped\" /></Tag>}\r\n              {item.status === 'completed' && <Tag color=\"#87d068\"><FormattedMessage id=\"projects.status.completed\" /></Tag>}\r\n            </Row>\r\n          </Skeleton>\r\n        </List.Item>\r\n      )}\r\n    />\r\n  );\r\n};\r\n\r\nProjectsList.propTypes = propTypes;\r\n\r\nexport default ProjectsList;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { notification, Icon } from 'antd';\r\n\r\nconst propTypes = {\r\n  title: PropTypes.oneOfType([PropTypes.shape({}), PropTypes.string]).isRequired,\r\n  message: PropTypes.oneOfType([PropTypes.shape({}), PropTypes.string]).isRequired\r\n};\r\n\r\nconst ErrorNotification = (title, message) =>\r\n  notification.open({\r\n    message: <span style={{ color: '#f5222d', fontWeight: 'bold' }}>{title}</span>,\r\n    description: message,\r\n    duration: 2.5,\r\n    icon: <Icon type=\"frown\" style={{ color: '#f5222d' }} />\r\n  });\r\n\r\nErrorNotification.propTypes = propTypes;\r\n\r\nexport default ErrorNotification;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { notification, Icon } from 'antd';\r\n\r\nconst propTypes = {\r\n  title: PropTypes.oneOfType([PropTypes.shape({}), PropTypes.string]).isRequired,\r\n  message: PropTypes.oneOfType([PropTypes.shape({}), PropTypes.string]).isRequired\r\n};\r\n\r\nconst SuccessNotification = (title, message) =>\r\n  notification.open({\r\n    message: <span style={{ color: '#4cd964', fontWeight: 'bold' }}>{title}</span>,\r\n    description: message,\r\n    duration: 2.5,\r\n    icon: <Icon type=\"smile\" style={{ color: '#4cd964' }} />\r\n  });\r\n\r\nSuccessNotification.propTypes = propTypes;\r\n\r\nexport default SuccessNotification;\r\n","import React, { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { formShape } from 'rc-form';\r\nimport { FormattedMessage, injectIntl } from 'react-intl';\r\nimport moment from 'moment';\r\n\r\nimport {\r\n  Row,\r\n  Col,\r\n  Modal,\r\n  Button,\r\n  Input,\r\n  DatePicker,\r\n  Select,\r\n  Form,\r\n  Typography,\r\n  Descriptions,\r\n  Icon,\r\n  Popconfirm,\r\n  Spin\r\n} from 'antd';\r\n\r\nimport ErrorNotification from '../../../../components/Notification/Error';\r\nimport SuccessNotification from '../../../../components/Notification/Success';\r\nimport { actions as customerActions } from '../../../customer/store';\r\nimport { actions as projectActions } from '../../store';\r\n\r\nconst propTypes = {\r\n  visible: PropTypes.bool.isRequired,\r\n  close: PropTypes.func.isRequired,\r\n  form: formShape.isRequired,\r\n  intl: PropTypes.shape({}).isRequired,\r\n\r\n  selectedCustomer: PropTypes.shape({}),\r\n\r\n  createProject: PropTypes.func.isRequired,\r\n  getProjects: PropTypes.func.isRequired,\r\n  getCustomers: PropTypes.func.isRequired\r\n};\r\n\r\nconst defaultProps = {\r\n  selectedCustomer: {}\r\n};\r\n\r\nconst formItemLayout = {\r\n  labelCol: {\r\n    span: 5\r\n  },\r\n  wrapperCol: {\r\n    span: 19\r\n  }\r\n};\r\n\r\nconst listStatus = [\r\n  { id: 1, name: 'running' },\r\n  { id: 2, name: 'completed' },\r\n  { id: 3, name: 'stopped' }\r\n];\r\n\r\nconst CreateProject = ({\r\n  visible,\r\n  close,\r\n  form,\r\n  selectedCustomer,\r\n  intl,\r\n  createProject,\r\n  getProjects,\r\n  getCustomers\r\n}) => {\r\n  const dispatch = useDispatch();\r\n  const [customerDetail, setCustomerDetail] = useState(selectedCustomer);\r\n  const { getCustomersError, getCustomersErrors } = useSelector((state) => state.customers);\r\n  const customersList = useSelector((state) => state.customers.list);\r\n  const customerLoading = useSelector((state) => state.customers.loading);\r\n  const { createProjectError, createProjectErrors, createProjectResult, loading } = useSelector(\r\n    (state) => state.projects\r\n  );\r\n\r\n  const {\r\n    user: { staff_code }\r\n  } = useSelector((state) => state.auth);\r\n  // Get all customers after open modal\r\n  useEffect(() => {\r\n    getCustomers && getCustomers();\r\n    dispatch(projectActions.createProjectCleanData());\r\n    dispatch(projectActions.createProjectCleanError());\r\n  }, [getCustomers, dispatch]);\r\n\r\n  // show notification if get customers failure\r\n  useEffect(() => {\r\n    if (getCustomersError) {\r\n      const title = intl.formatMessage({ id: 'notification.error' });\r\n      const message = intl.formatMessage({\r\n        id: 'customers.getCustomers.message.error'\r\n      });\r\n      ErrorNotification(title, message);\r\n      // clean error\r\n      dispatch(customerActions.getCustomersCleanError());\r\n    }\r\n  }, [dispatch, getCustomersError, getCustomersErrors, intl]);\r\n\r\n  // Handle showing notification after add new project\r\n  useEffect(() => {\r\n    // show success notification\r\n    if (createProjectResult) {\r\n      const title = intl.formatMessage({ id: 'notification.success' });\r\n      const message = intl.formatMessage({ id: createProjectResult.message });\r\n      SuccessNotification(title, message);\r\n      // close the modal and clean state\r\n      close();\r\n      // re-call get all projects api\r\n      getProjects && getProjects();\r\n    }\r\n  }, [close, dispatch, intl, createProjectResult, getProjects]);\r\n\r\n  useEffect(() => {\r\n    // show error notification\r\n    if (createProjectError) {\r\n      const title = intl.formatMessage({ id: 'notification.error' });\r\n      const message = intl.formatMessage({\r\n        id: createProjectErrors.message\r\n          ? createProjectError.message\r\n          : 'projects.createProject.message.error'\r\n      });\r\n      ErrorNotification(title, message);\r\n      // clean error\r\n      dispatch(projectActions.createProjectCleanError());\r\n    }\r\n  }, [dispatch, intl, createProjectError, createProjectErrors]);\r\n\r\n  // Form submit\r\n  const handleSubmit = () => {\r\n    form.validateFields((err, values) => {\r\n      if (!err) {\r\n        const body = {\r\n          customer_id: values.customer_id,\r\n          name: values.name,\r\n          status: values.status,\r\n          start_time: parseInt(moment(values.estimated[0]).format('x'), 10),\r\n          end_time: parseInt(moment(values.estimated[1]).format('x'), 10),\r\n          staff_code\r\n        };\r\n        // call api when valid data\r\n        createProject && createProject(body);\r\n        // form.resetFields();\r\n        setTimeout(() => {\r\n          window.location.reload()\r\n        }, 0)\r\n      } else {\r\n        // showing error form input notification\r\n        const title = intl.formatMessage({ id: 'notification.error' });\r\n        const message = intl.formatMessage({ id: 'notification.message.form.error' });\r\n        ErrorNotification(title, message);\r\n      }\r\n    });\r\n  };\r\n\r\n  const handleSelect = (value) => {\r\n    customersList.map((customer) => {\r\n      if (customer.id === value) {\r\n        setCustomerDetail(customer);\r\n      }\r\n      return customer;\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Modal\r\n      title={<FormattedMessage id=\"projects.createProject.title\" />}\r\n      cancelText=\"Close\"\r\n      visible={visible}\r\n      width=\"50vw\"\r\n      onCancel={() => close()}\r\n      maskClosable={false}\r\n      footer={[\r\n        <Row type=\"flex\" key=\"cp_footer\" justify=\"end\">\r\n          <Popconfirm\r\n            title={<FormattedMessage id=\"projects.createProject.confirm.add\" />}\r\n            onConfirm={() => handleSubmit()}\r\n            okText={<FormattedMessage id=\"button.confirm.yes\" />}\r\n            cancelText={<FormattedMessage id=\"button.confirm.no\" />}>\r\n            <Button icon=\"plus\" type=\"primary\" loading={loading}>\r\n              {<FormattedMessage id=\"button.add\" />}\r\n            </Button>\r\n          </Popconfirm>\r\n\r\n          <Button icon=\"close-circle\" type=\"default\" key=\"close\" onClick={() => close()}>\r\n            {<FormattedMessage id=\"button.close\" />}\r\n          </Button>\r\n        </Row>\r\n      ]}>\r\n      <Form onSubmit={() => handleSubmit()} {...formItemLayout}>\r\n        <Row style={{ marginBottom: 10 }}>\r\n          <Icon type=\"project\" style={{ marginRight: 10 }} />\r\n          <Typography.Text style={{ fontWeight: 'bold' }}>\r\n            {<FormattedMessage id=\"projects.createProject.projectInformation\" />}\r\n          </Typography.Text>\r\n        </Row>\r\n\r\n        <Form.Item\r\n          style={{ display: 'flex' }}\r\n          label={<FormattedMessage id=\"projects.createProject.projectName\" />}\r\n          validateStatus={form.getFieldError('name') ? 'error' : 'validating'}>\r\n          {form.getFieldDecorator('name', {\r\n            rules: [\r\n              {\r\n                required: true,\r\n                message: intl.formatMessage({ id: 'projects.createProject.error.name' })\r\n              }\r\n            ]\r\n          })(<Input />)}\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          style={{ display: 'flex' }}\r\n          label={<FormattedMessage id=\"projects.createProject.status\" />}\r\n          validateStatus={form.getFieldError('status') ? 'error' : 'validating'}>\r\n          {form.getFieldDecorator('status', {\r\n            rules: [\r\n              {\r\n                required: true,\r\n                message: intl.formatMessage({ id: 'projects.createProject.error.status' })\r\n              }\r\n            ]\r\n          })(\r\n            <Select allowClear>\r\n              {(listStatus || []).map((e) => {\r\n                return (\r\n                  <Select.Option key={e.id} value={e.name}>\r\n                    <FormattedMessage id={`projects.status.${e.name}`} />\r\n                  </Select.Option>\r\n                );\r\n              })}\r\n            </Select>\r\n          )}\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          style={{ display: 'flex' }}\r\n          label={<FormattedMessage id=\"projects.createProject.Estimated\" />}\r\n          validateStatus={form.getFieldError('estimated') ? 'error' : 'validating'}>\r\n          {form.getFieldDecorator('estimated', {\r\n            rules: [\r\n              {\r\n                required: true,\r\n                message: intl.formatMessage({ id: 'projects.createProject.error.estimated' })\r\n              }\r\n            ]\r\n          })(\r\n            <DatePicker.RangePicker\r\n              format=\"DD/MM/YYYY\"\r\n              placeholder={[\r\n                intl.formatMessage({ id: 'projects.createProject.startDate' }),\r\n                intl.formatMessage({ id: 'projects.createProject.endDate' })\r\n              ]}\r\n            />\r\n          )}\r\n        </Form.Item>\r\n\r\n        <Row style={{ marginBottom: 10 }}>\r\n          <Icon type=\"user\" style={{ marginRight: 10 }} />\r\n          <Typography.Text style={{ fontWeight: 'bold' }}>\r\n            <FormattedMessage id=\"projects.createProject.customerInformation\" />\r\n          </Typography.Text>\r\n        </Row>\r\n\r\n        <Form.Item\r\n          style={{ display: 'flex' }}\r\n          label={<FormattedMessage id=\"projects.createProject.customer\" />}\r\n          validateStatus={form.getFieldError('customer_id') ? 'error' : 'validating'}>\r\n          {form.getFieldDecorator('customer_id', {\r\n            rules: [\r\n              {\r\n                required: true,\r\n                message: intl.formatMessage({ id: 'projects.createProject.error.customer' })\r\n              }\r\n            ]\r\n          })(\r\n            <Select\r\n              allowClear\r\n              autoClearSearchValue\r\n              onSelect={(value) => handleSelect(value)}\r\n              notFoundContent={customerLoading && <Spin size=\"small\" />}>\r\n              {(customersList || []).map((e) => {\r\n                return (\r\n                  <Select.Option key={e.id} value={e.id}>\r\n                    {e.name}\r\n                  </Select.Option>\r\n                );\r\n              })}\r\n            </Select>\r\n          )}\r\n        </Form.Item>\r\n\r\n        <Row>\r\n          <Col span={5}></Col>\r\n          <Col span={19}>\r\n            <Descriptions column={1}>\r\n              <Descriptions.Item\r\n                label={<FormattedMessage id=\"projects.createProject.customerEmail\" />}>\r\n                {customerDetail.email || null}\r\n              </Descriptions.Item>\r\n              <Descriptions.Item\r\n                label={<FormattedMessage id=\"projects.createProject.customerPhonenumber\" />}>\r\n                {customerDetail.phone_number || null}\r\n              </Descriptions.Item>\r\n              <Descriptions.Item\r\n                label={<FormattedMessage id=\"projects.createProject.customerAddress\" />}>\r\n                {customerDetail.address || null}\r\n              </Descriptions.Item>\r\n            </Descriptions>\r\n          </Col>\r\n        </Row>\r\n      </Form>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nCreateProject.propTypes = propTypes;\r\n\r\nCreateProject.defaultProps = defaultProps;\r\n\r\nconst CreateProjectForm = Form.create({ name: 'createProject' })(CreateProject);\r\n\r\nexport default injectIntl(CreateProjectForm, {});\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\n\r\nfunction WithRole({ component: Component, type = [], ...rest }) {\r\n  const user = useSelector((state) => state.auth);\r\n  const checkRole = type.includes(user.user.type);\r\n\r\n  return <>{checkRole ? <Component {...rest}/> : null }</>;\r\n}\r\n\r\nexport default WithRole;\r\n","import React, { useEffect, useState, useCallback } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { FormattedMessage, injectIntl } from 'react-intl';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Row, Col, Tabs, Tag, Button, Skeleton } from 'antd';\r\nimport { css } from 'emotion';\r\n\r\nimport { actions as layoutActions } from '../modules/layout/store';\r\nimport { actions as projectActions } from '../modules/project/store';\r\nimport { actions as customerActions } from '../modules/customer/store';\r\n\r\nimport HeaderTitle from '../components/Content/HeaderTitle';\r\nimport ProjectsList from '../modules/project/projects/components/ProjectsList';\r\nimport CreateProject from '../modules/project/createProject/components/CreateProject';\r\nimport ErrorNotification from '../components/Notification/Error';\r\nimport WithRole from '../hocs/WithRole';\r\n\r\nconst propTypes = {\r\n  history: PropTypes.shape({}).isRequired,\r\n  intl: PropTypes.shape({}).isRequired\r\n};\r\n\r\nconst defaultProps = {};\r\n\r\nconst styles = {\r\n  addCustomerButton: css`\r\n    background: #49a32b !important;\r\n    color: #fff !important;\r\n    margin-bottom: 15px;\r\n  `\r\n};\r\n\r\nconst ButtonAdd = ({ handleCreateModal }) => {\r\n  return (\r\n    <Button icon=\"folder-add\" className={styles.addCustomerButton} onClick={handleCreateModal}>\r\n      <FormattedMessage id=\"button.add\" />\r\n    </Button>\r\n  );\r\n};\r\n\r\nconst ProjectsPage = ({ history, intl }) => {\r\n  const dispatch = useDispatch();\r\n  const { list, loading, getProjectsError, getProjectsErrors } = useSelector(\r\n    (state) => state.projects\r\n  );\r\n  const { user } = useSelector((state) => state.auth);\r\n  const [visible, setVisible] = useState(false);\r\n\r\n  // check authencation if not redirect to login page\r\n\r\n  // get projects list\r\n  useEffect(() => {\r\n    dispatch(layoutActions.selectItem(['project']));\r\n    user.type === \"admin\" ?\r\n      dispatch(\r\n        projectActions.getProjects({\r\n          path: 'projects'\r\n        })\r\n      ) : dispatch(\r\n        projectActions.getProjects({\r\n          path: `projects/byUser/${user.staff_code}`\r\n        })\r\n      );\r\n  }, [dispatch, user]);\r\n\r\n  // show notification if get projects list failure\r\n  useEffect(() => {\r\n    if (getProjectsError) {\r\n      const title = intl.formatMessage({ id: 'notification.error' });\r\n      const message = intl.formatMessage({\r\n        id: getProjectsErrors.message\r\n          ? getProjectsErrors.message\r\n          : 'projects.getProjects.message.error'\r\n      });\r\n      ErrorNotification(title, message);\r\n      dispatch(projectActions.getProjectsCleanError());\r\n    }\r\n  }, [dispatch, getProjectsError, getProjectsErrors, intl]);\r\n\r\n  const getProjects = useCallback(() => {\r\n    user.type === \"admin\" ?\r\n      dispatch(\r\n        projectActions.getProjects({\r\n          path: 'projects'\r\n        })\r\n      ) : dispatch(\r\n        projectActions.getProjects({\r\n          path: `projects/byUser/${user.staff_code}`\r\n        })\r\n      );\r\n  }, [dispatch, user]);\r\n\r\n  const getCustomers = useCallback(() => {\r\n    dispatch(\r\n      customerActions.getCustomers({\r\n        path: 'customers'\r\n      })\r\n    );\r\n  }, [dispatch]);\r\n\r\n  const createProject = useCallback(\r\n    (body) => {\r\n      dispatch(projectActions.createProject({ body, path: 'projects' }));\r\n    },\r\n    [dispatch]\r\n  );\r\n  const handleCreateModal = () => {\r\n    setVisible(!visible);\r\n  };\r\n  return (\r\n    <React.Fragment>\r\n      <HeaderTitle title={<FormattedMessage id=\"projects.getProjects.title\" />} />\r\n      <WithRole type={['admin']} component={ButtonAdd} handleCreateModal={handleCreateModal} />\r\n      <Row gutter={16}>\r\n        <Col span={12}>\r\n          <Tabs defaultActiveKey=\"1\">\r\n            <Tabs.TabPane\r\n              tab={\r\n                <Tag color=\"#108ee9\">\r\n                  <FormattedMessage id=\"projects.status.running\" />\r\n                </Tag>\r\n              }\r\n              key=\"1\">\r\n              <Skeleton loading={loading} active paragraph={{ rows: 10 }}>\r\n                <ProjectsList list={list.filter((item) => item.status === 'running')} />\r\n              </Skeleton>\r\n            </Tabs.TabPane>\r\n            <Tabs.TabPane\r\n              tab={\r\n                <Tag color=\"#87d068\">\r\n                  <FormattedMessage id=\"projects.status.completed\" />\r\n                </Tag>\r\n              }\r\n              key=\"3\">\r\n              <Skeleton loading={loading} active paragraph={{ rows: 10 }}>\r\n                <ProjectsList list={list.filter((item) => item.status === 'completed')} />\r\n              </Skeleton>\r\n            </Tabs.TabPane>\r\n            <Tabs.TabPane\r\n              tab={\r\n                <Tag color=\"#f5222D\">\r\n                  <FormattedMessage id=\"projects.status.stopped\" />\r\n                </Tag>\r\n              }\r\n              key=\"2\">\r\n              <Skeleton loading={loading} active paragraph={{ rows: 10 }}>\r\n                <ProjectsList list={list.filter((item) => item.status === 'stopped')} />\r\n              </Skeleton>\r\n            </Tabs.TabPane>\r\n          </Tabs>\r\n        </Col>\r\n      </Row>\r\n      {visible && (\r\n        <CreateProject\r\n          visible={visible}\r\n          close={() => setVisible(!visible)}\r\n          getProjects={getProjects}\r\n          createProject={createProject}\r\n          getCustomers={getCustomers}\r\n        />\r\n      )}\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nProjectsPage.propTypes = propTypes;\r\n\r\nProjectsPage.defaultProps = defaultProps;\r\n\r\nexport default injectIntl(ProjectsPage, {});\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Modal, Button, Tooltip } from 'antd';\r\nimport '../../../assets/styles/diagrams/main.scss';\r\nimport createEngine, { DefaultNodeModel, DiagramModel } from '@projectstorm/react-diagrams';\r\nimport { CanvasWidget } from '@projectstorm/react-canvas-core';\r\nimport { FormattedMessage } from 'react-intl';\r\n\r\n\r\nconst propTypes = {\r\n  visible: PropTypes.bool.isRequired,\r\n  close: PropTypes.func.isRequired\r\n};\r\n\r\nconst MemberDiagram = ({ visible, close, project, joinedMembers }) => {\r\n  const engine = createEngine();\r\n  const listPo = [];\r\n  const listPm = [];\r\n  const listBrse = [];\r\n  const listComtor = [];\r\n  const listDev = [];\r\n  const model = new DiagramModel();\r\n\r\n  const listAssigneeUnDefault = project && project.assigneeProject.filter(e => e.member_be_link_id !== \"Default\");\r\n  const listAssignee = project && project.assigneeProject;\r\n\r\n  joinedMembers &&\r\n    joinedMembers.list.forEach((member) => {\r\n      switch (member.role) {\r\n        case 'po':\r\n          listPo.push(member);\r\n          break;\r\n        case 'pm':\r\n          listPm.push(member);\r\n          break;\r\n        case 'brse':\r\n          listBrse.push(member);\r\n          break;\r\n        case 'comtor':\r\n          listComtor.push(member);\r\n          break;\r\n        case 'dev':\r\n          listDev.push(member);\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    });\r\n  if (listPo.length > 0) {\r\n    var nodePoTitle = new DefaultNodeModel({\r\n      name: <FormattedMessage id=\"projects.addMember.role.po\" />,\r\n      color: '#A4CFBB',\r\n      locked: true,\r\n      key:'po'\r\n    });\r\n    nodePoTitle.setPosition(150, 150);\r\n    listPo.forEach((po, index) => {\r\n      const node = new DefaultNodeModel({\r\n        name: po['member_detail'].full_name,\r\n        color: '#A4CFBB',\r\n        id: `${po['member_detail'].staff_code}`,\r\n        role: 'po',\r\n        width: 500,\r\n        height: 200,\r\n        key:`${po['member_detail'].staff_code}`\r\n      });\r\n      node.setPosition(150, 150 + (1 + index) * 70);\r\n      model.addNode(node);\r\n    });\r\n  }\r\n  if (listPm.length > 0) {\r\n    var nodePmTitle = new DefaultNodeModel({\r\n      name: <FormattedMessage id=\"projects.addMember.role.pm\" />,\r\n      color: '#0B3954',\r\n      locked: true,\r\n      key:\"pm\"\r\n    });\r\n    nodePmTitle.setPosition(350, 150);\r\n    listPm.forEach((pm, index) => {\r\n      const node = new DefaultNodeModel({\r\n        name: pm['member_detail'].full_name,\r\n        color: '#0B3954',\r\n        id: `${pm['member_detail'].staff_code}`,\r\n        role: 'pm',\r\n        key:`${pm['member_detail'].staff_code}`\r\n      });\r\n      node.setPosition(350, 150 + (1 + index) * 70);\r\n      model.addNode(node);\r\n    });\r\n  }\r\n  if (listBrse.length > 0) {\r\n    var nodeBrseTitle = new DefaultNodeModel({\r\n      name: <FormattedMessage id=\"projects.addMember.role.brse\" />,\r\n      color: '#087E8B',\r\n      locked: true,\r\n      key:\"brse\"\r\n    });\r\n    nodeBrseTitle.setPosition(550, 150);\r\n    listBrse.forEach((brse, index) => {\r\n      const node = new DefaultNodeModel({\r\n        name: brse['member_detail'].full_name,\r\n        color: '#087E8B',\r\n        id: `${brse['member_detail'].staff_code}`,\r\n        role: 'brse',\r\n        key:`${brse['member_detail'].staff_code}`\r\n      });\r\n      node.setPosition(550, 150 + (1 + index) * 70);\r\n      model.addNode(node);\r\n    });\r\n  }\r\n  if (listComtor.length > 0) {\r\n    var nodeComtorTitle = new DefaultNodeModel({\r\n      name: <FormattedMessage id=\"projects.addMember.role.comtor\" />,\r\n      color: '#FF5A5F',\r\n      locked: true,\r\n      key:\"comtor\"\r\n    });\r\n    nodeComtorTitle.setPosition(750, 150);\r\n    listComtor.forEach((comtor, index) => {\r\n      const node = new DefaultNodeModel({\r\n        name: comtor['member_detail'].full_name,\r\n        color: '#FF5A5F',\r\n        id: `${comtor['member_detail'].staff_code}`,\r\n        role: 'comtor',\r\n        key:`${comtor['member_detail'].staff_code}`\r\n      });\r\n      node.setPosition(750, 150 + (1 + index) * 70);\r\n      model.addNode(node);\r\n    });\r\n  }\r\n  if (listDev.length > 0) {\r\n    var nodeDevTitle = new DefaultNodeModel({\r\n      name: <FormattedMessage id=\"projects.addMember.role.dev\" />,\r\n      color: '#C81D25',\r\n      locked: true,\r\n      key:\"dev\"\r\n    });\r\n    nodeDevTitle.setPosition(950, 150);\r\n    listDev.forEach((dev, index) => {\r\n      const node = new DefaultNodeModel({\r\n        name: dev['member_detail'].full_name,\r\n        color: '#C81D25',\r\n        id: `${dev['member_detail'].staff_code}`,\r\n        role: 'dev',\r\n        key:`${dev['member_detail'].staff_code}`\r\n      });\r\n      node.setPosition(950, 150 + (1 + index) * 70);\r\n      model.addNode(node);\r\n    });\r\n  }\r\n  let allNode = model.getModels();\r\n  allNode.forEach((node) => {\r\n    const linkAssignee = listAssignee && listAssignee.filter(e => e.member_link_id === node.options.id);\r\n    if(linkAssignee && linkAssignee.length > 0 && linkAssignee[0].member_be_link_id === \"Default\"){\r\n    switch (node.options.role) {\r\n      case 'po': {\r\n        const portOut = node.addOutPort(' ');\r\n        let listPoLink = [];\r\n          if (allNode.includes((node) => node.options.role === 'pm')) {\r\n            listPoLink = allNode.filter((node) => node.options.role === 'pm')\r\n          } else if (allNode.includes((node) => node.options.role === 'brse')) {\r\n            listPoLink = allNode.filter((node) => node.options.role === 'brse')\r\n          } else if (allNode.includes((node) => node.options.role === 'comtor')) {\r\n            listPoLink = allNode.filter((node) => node.options.role === 'comtor')\r\n          } else if (allNode.includes((node) => node.options.role === 'dev')) {\r\n            listPoLink = allNode.filter((node) => node.options.role === 'dev')\r\n          }\r\n          listPoLink.forEach((pm) => {\r\n            const portIn = pm.addInPort(`${node.options.name}`);\r\n            const linkPO = portOut.link(portIn);\r\n            model.addLink(linkPO);\r\n          });\r\n        break;\r\n      }\r\n      case 'pm': {\r\n        const portOut = node.addOutPort(' ');\r\n        let listPmLink = [];\r\n          if (allNode.includes((node) => node.options.role === 'brse')) {\r\n            listPmLink = allNode.filter((node) => node.options.role === 'brse')\r\n          } else if (allNode.includes((node) => node.options.role === 'comtor')) {\r\n            listPmLink = allNode.filter((node) => node.options.role === 'comtor')\r\n          } else if (allNode.includes((node) => node.options.role === 'dev')) {\r\n            listPmLink = allNode.filter((node) => node.options.role === 'dev')\r\n          }\r\n          listPmLink.forEach((brse) => {\r\n            const portIn = brse.addInPort(`${node.options.name}`);\r\n            const linkPM = portOut.link(portIn);\r\n            model.addAll(linkPM);\r\n          });\r\n        }\r\n        break;\r\n      case 'brse': {\r\n        const portOut = node.addOutPort(' ');\r\n        let listBrseLink = [];\r\n          if (allNode.includes((node) => node.options.role === 'comtor')) {\r\n            listBrseLink = (allNode.filter((node) => node.options.role === 'comtor'))\r\n          } else if (allNode.includes((node) => node.options.role === 'dev')) {\r\n            listBrseLink = (allNode.filter((node) => node.options.role === 'dev'))\r\n          }\r\n          listBrseLink.forEach((comtor) => {\r\n            const portIn = comtor.addInPort(`${node.options.name}`);\r\n            const linkBRSE = portOut.link(portIn);\r\n            model.addAll(linkBRSE);\r\n          });\r\n        }\r\n        break;\r\n      case 'comtor': {\r\n        const portOut = node.addOutPort(' ');\r\n        let listComtorLink = [];\r\n          listComtorLink = allNode.filter((node) => node.options.role === 'dev');\r\n          listComtorLink.forEach((dev) => {\r\n            const portIn = dev.addInPort(`${node.options.name}`);\r\n            const linkComtor = portOut.link(portIn);\r\n            model.addAll(linkComtor);\r\n          });\r\n        }\r\n        break;\r\n      case 'dev':\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  });\r\n\r\n  listAssigneeUnDefault && listAssigneeUnDefault.length > 0 && listAssigneeUnDefault.forEach((link) => {\r\n    const nodeLink = allNode && allNode.filter(node => node.options.id === link.member_link_id);\r\n    const nodeBeLink = allNode && allNode.filter(node => node.options.id === link.member_be_link_id);\r\n    const portOut = nodeLink.length > 0 && nodeLink[0].addOutPort(' ');\r\n    const portIn = nodeLink.length > 0 && nodeBeLink.length > 0 && nodeBeLink[0].addInPort(`${nodeLink[0].options.name}`)\r\n    const linkNode = portOut && portOut.link(portIn);\r\n    model.addAll(linkNode);\r\n  })\r\n  model.addAll(nodePoTitle, nodePmTitle, nodeBrseTitle, nodeComtorTitle, nodeDevTitle);\r\n  engine.setModel(model);\r\n  return (\r\n    <Modal\r\n      centered\r\n      title={[\r\n        <React.Fragment key=\"1\">\r\n          <FormattedMessage id=\"projects.memberdiagram.title\" />\r\n          <Tooltip placement=\"right\" title=\"Zoom to fit\">\r\n            <Button\r\n              style={{ marginLeft: 10 }}\r\n              onClick={() => engine.zoomToFit()}\r\n              type=\"primary\"\r\n              shape=\"circle\"\r\n              icon=\"search\"\r\n            />\r\n          </Tooltip>\r\n        </React.Fragment>\r\n      ]}\r\n      cancelText=\"Close\"\r\n      visible={visible}\r\n      width=\"85vw\"\r\n      onCancel={() => close()}\r\n      footer={[\r\n        <Button type=\"primary\" key=\"close\" onClick={() => close()}>\r\n          <FormattedMessage id=\"button.close\" />\r\n        </Button>\r\n      ]}\r\n      >\r\n      <div style={{ height: '70vh' }}>\r\n        <CanvasWidget className=\"srd-demo-canvas\" engine={engine}/>\r\n      </div>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nMemberDiagram.propTypes = propTypes;\r\n\r\nexport default MemberDiagram;\r\n","export const roles = [\r\n  {\r\n    id: 1,\r\n    name: 'Project Owner',\r\n    key: 'po',\r\n    level: 1\r\n  },\r\n  {\r\n    id: 2,\r\n    name: 'Project Manager',\r\n    key: 'pm',\r\n    level: 2\r\n  },\r\n  {\r\n    id: 3,\r\n    name: 'Bridge System Engineer',\r\n    key: 'brse',\r\n    level: 3\r\n  },\r\n  {\r\n    id: 4,\r\n    name: 'Comtor',\r\n    key: 'comtor',\r\n    level: 4\r\n  },\r\n  {\r\n    id: 5,\r\n    name: 'Developer',\r\n    key: 'dev',\r\n    level: 4\r\n  }\r\n];\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { formShape } from 'rc-form';\r\nimport PropTypes from 'prop-types';\r\nimport moment from 'moment';\r\nimport { FormattedMessage, injectIntl } from 'react-intl';\r\nimport { css } from 'emotion';\r\n\r\nimport {\r\n  Row,\r\n  Col,\r\n  Modal,\r\n  Button,\r\n  DatePicker,\r\n  Select,\r\n  InputNumber,\r\n  Popconfirm,\r\n  Form,\r\n  Typography,\r\n  Descriptions,\r\n  Icon,\r\n  Spin\r\n} from 'antd';\r\n\r\nimport ErrorNotification from '../../../../components/Notification/Error';\r\nimport SuccessNotification from '../../../../components/Notification/Success';\r\nimport { actions as memberActions } from '../../../member/store';\r\nimport { actions as projectActions } from '../../store';\r\nimport { roles } from '../../../../utils/roles';\r\n\r\nconst propTypes = {\r\n  visible: PropTypes.bool.isRequired,\r\n  close: PropTypes.func.isRequired,\r\n  form: formShape.isRequired,\r\n  intl: PropTypes.shape({}).isRequired,\r\n  match: PropTypes.shape({}).isRequired,\r\n\r\n  selectedMember: PropTypes.shape({}),\r\n  joinedMembers: PropTypes.arrayOf(PropTypes.shape({})),\r\n\r\n  getMembers: PropTypes.func.isRequired,\r\n  getJoinedMembers: PropTypes.func.isRequired,\r\n  getProject: PropTypes.func.isRequired,\r\n  addMember: PropTypes.func.isRequired\r\n};\r\n\r\nconst defaultProps = {\r\n  selectedMember: {},\r\n  joinedMembers: []\r\n};\r\n\r\nconst styles = {\r\n  descItem: css`\r\n    padding-bottom: 0 !important;\r\n  `\r\n};\r\n\r\nconst formItemLayout = {\r\n  labelCol: {\r\n    span: 5\r\n  },\r\n  wrapperCol: {\r\n    span: 19\r\n  }\r\n};\r\n\r\nconst listStatus = [\r\n  { id: 1, name: 'working' },\r\n  { id: 2, name: 'leave' },\r\n  { id: 3, name: 'idle' }\r\n];\r\n\r\nconst AddMemberModal = ({\r\n  visible,\r\n  close,\r\n  form,\r\n  selectedMember,\r\n  joinedMembers,\r\n  intl,\r\n  match,\r\n  getMembers,\r\n  getJoinedMembers,\r\n  getProject,\r\n  addMember\r\n}) => {\r\n  const dispatch = useDispatch();\r\n  const { list, getMembersError } = useSelector((state) => state.members);\r\n  const memberLoading = useSelector((state) => state.members.loading);\r\n  const { addMemberError, addMemberErrors, addMemberResult, loading } = useSelector(\r\n    (state) => state.projects\r\n  );\r\n  const [memberDetail, setMemberDetail] = useState(selectedMember);\r\n  //variable disabled field assignee\r\n  const [disabledLink, setDisabledLink] = useState(true);\r\n  // Get all members after open modal\r\n  useEffect(() => {\r\n    getMembers && getMembers();\r\n    return () => {\r\n      dispatch(projectActions.addMemberCleanError());\r\n      dispatch(projectActions.addMemberCleanData());\r\n    };\r\n  }, [getMembers, dispatch]);\r\n\r\n  // show notification if get members failure\r\n  useEffect(() => {\r\n    if (getMembersError) {\r\n      const title = intl.formatMessage({ id: 'notification.error' });\r\n      const message = intl.formatMessage({ id: 'members.membersList.message.error' });\r\n      ErrorNotification(title, message);\r\n      // clean error\r\n      dispatch(memberActions.cleanError(false));\r\n    }\r\n  }, [dispatch, getMembersError, intl]);\r\n\r\n  // Handle showing notification after add new members into project\r\n  useEffect(() => {\r\n    if (addMemberResult) {\r\n      const title = intl.formatMessage({ id: 'notification.success' });\r\n      const message = intl.formatMessage({ id: addMemberResult.message });\r\n      SuccessNotification(title, message);\r\n      // close the modal and clean state\r\n      close();\r\n      // re-call get project detail api\r\n      getProject && getProject();\r\n      // re-call get project's members api\r\n      getJoinedMembers && getJoinedMembers();\r\n    }\r\n  }, [close, intl, addMemberResult, getJoinedMembers, getProject]);\r\n\r\n  useEffect(() => {\r\n    // show error notification\r\n    if (addMemberError) {\r\n      const title = intl.formatMessage({ id: 'notification.error' });\r\n      const message = intl.formatMessage({\r\n        id: addMemberErrors.message\r\n          ? addMemberErrors.message\r\n          : 'projects.addMemberIntoProject.message.error'\r\n      });\r\n      ErrorNotification(title, message);\r\n      // clean state\r\n      dispatch(projectActions.cleanError(false));\r\n    }\r\n  }, [dispatch, intl, addMemberError, addMemberErrors]);\r\n\r\n  // Form submit\r\n  const handleSubmit = () => {\r\n    form.validateFields((err, values) => {\r\n      if (!err) {\r\n        const body = {\r\n          ...values,\r\n          project_id: match.params.id,\r\n          time_in: parseInt(moment(values.time_in).format('x'), 10),\r\n          time_out: values.time_out ? parseInt(moment(values.time_out).format('x'), 10) : null,\r\n          assignee: values.assignee\r\n        };\r\n        // call api when valid data\r\n        addMember && addMember(body);\r\n      } else {\r\n        // showing error form input notification\r\n        const title = intl.formatMessage({ id: 'notification.error' });\r\n        const message = intl.formatMessage({ id: 'notification.message.form.error' });\r\n        ErrorNotification(title, message);\r\n      }\r\n    });\r\n  };\r\n\r\n  const handleSelect = (value) => {\r\n    list.map((member) => {\r\n      if (member.staff_code === value) {\r\n        setMemberDetail(member);\r\n      }\r\n      return member;\r\n    });\r\n  };\r\n  // when member not selected, disabled field assignee \r\n  // When selected, chose default for field assignee: All member under rank\r\n  const handleChange = (value) => {\r\n    if (value) {\r\n      setDisabledLink(false);\r\n      form.setFieldsValue({ ...form.getFieldsValue(), assignee: [\"Default\"] });\r\n    }\r\n    else {\r\n      setDisabledLink(true);\r\n      form.setFieldsValue({ ...form.getFieldsValue(), assignee: undefined });\r\n    }\r\n  }\r\n  return (\r\n    <Modal\r\n      title={<FormattedMessage id=\"projects.addMember.title\" />}\r\n      cancelText=\"Close\"\r\n      visible={visible}\r\n      width=\"50vw\"\r\n      className={styles.modal}\r\n      onCancel={() => close()}\r\n      maskClosable={false}\r\n      footer={[\r\n        <Row type=\"flex\" key=\"am_footer\" justify=\"end\">\r\n          <Popconfirm\r\n            title={<FormattedMessage id=\"projects.addMember.confirm.add\" />}\r\n            onConfirm={() => handleSubmit()}\r\n            okText={<FormattedMessage id=\"button.confirm.yes\" />}\r\n            cancelText={<FormattedMessage id=\"button.confirm.no\" />}>\r\n            <Button icon=\"plus\" type=\"primary\" loading={loading}>\r\n              {<FormattedMessage id=\"button.add\" />}\r\n            </Button>\r\n          </Popconfirm>\r\n\r\n          <Button icon=\"close-circle\" type=\"default\" key=\"close\" onClick={() => close()}>\r\n            {<FormattedMessage id=\"button.close\" />}\r\n          </Button>\r\n        </Row>\r\n      ]}>\r\n      <Form onSubmit={() => handleSubmit()} {...formItemLayout}>\r\n        <Row style={{ marginBottom: 10 }}>\r\n          <Icon type=\"user\" style={{ marginRight: 10 }} />\r\n          <Typography.Text style={{ fontWeight: 'bold' }}>\r\n            {<FormattedMessage id=\"projects.addMember.memberInformation\" />}\r\n          </Typography.Text>\r\n        </Row>\r\n        <Form.Item\r\n          style={{ display: 'flex' }}\r\n          label={<FormattedMessage id=\"projects.addMember.member\" />}\r\n          validateStatus={form.getFieldError('staff_code') ? 'error' : 'validating'}>\r\n          {form.getFieldDecorator('staff_code', {\r\n            rules: [\r\n              {\r\n                required: true,\r\n                message: intl.formatMessage({ id: 'projects.addMember.error.member' })\r\n              }\r\n            ]\r\n          })(\r\n            <Select\r\n              showSearch\r\n              allowClear\r\n              autoClearSearchValue\r\n              notFoundContent={memberLoading && <Spin size=\"small\" />}\r\n              onSelect={handleSelect}\r\n              onChange={handleChange}\r\n            >\r\n              {(list || []).map((member) => {\r\n                return (\r\n                  <Select.Option\r\n                    disabled={\r\n                      !!joinedMembers.filter(\r\n                        (joinedMember) =>\r\n                          joinedMember.member_detail.staff_code === member.staff_code\r\n                      ).length\r\n                    }\r\n                    key={member.staff_code}\r\n                    value={member.staff_code}>\r\n                    {member.staff_code} - {member.full_name}\r\n                  </Select.Option>\r\n                );\r\n              })}\r\n            </Select>\r\n          )}\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          style={{ display: 'flex' }}\r\n          label={<FormattedMessage id=\"projects.addMember.status\" />}\r\n          validateStatus={form.getFieldError('member_status') ? 'error' : 'validating'}>\r\n          {form.getFieldDecorator('member_status', {\r\n            rules: [\r\n              {\r\n                required: true,\r\n                message: intl.formatMessage({ id: 'projects.addMember.error.status' })\r\n              }\r\n            ]\r\n          })(\r\n            <Select allowClear>\r\n              {(listStatus || []).map((e) => {\r\n                return (\r\n                  <Select.Option key={e.id} value={e.name}>\r\n                    <FormattedMessage id={`projects.addMember.status.${e.name}`} />\r\n                  </Select.Option>\r\n                );\r\n              })}\r\n            </Select>\r\n          )}\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          style={{ display: 'flex' }}\r\n          label={<FormattedMessage id=\"projects.addMember.role\" />}\r\n          validateStatus={form.getFieldError('role') ? 'error' : 'validating'}>\r\n          {form.getFieldDecorator('role', {\r\n            rules: [\r\n              {\r\n                required: true,\r\n                message: intl.formatMessage({ id: 'projects.addMember.error.role' })\r\n              }\r\n            ]\r\n          })(\r\n            <Select allowClear>\r\n              {(roles || []).map((e) => {\r\n                return (\r\n                  <Select.Option key={e.id} value={e.key}>\r\n                    <FormattedMessage id={`projects.addMember.role.${e.key}`} />\r\n                  </Select.Option>\r\n                );\r\n              })}\r\n            </Select>\r\n          )}\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          style={{ display: 'flex' }}\r\n          label={<FormattedMessage id=\"projects.addMember.time_in\" />}\r\n          validateStatus={form.getFieldError('time_in') ? 'error' : 'validating'}>\r\n          {form.getFieldDecorator('time_in', {\r\n            rules: [\r\n              {\r\n                required: true,\r\n                message: intl.formatMessage({ id: 'projects.addMember.error.time_in' })\r\n              }\r\n            ]\r\n          })(\r\n            <DatePicker\r\n              format=\"DD/MM/YYYY\"\r\n              placeholder={intl.formatMessage({ id: 'projects.addMember.placeholer.time_in' })}\r\n            />\r\n          )}\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          style={{ display: 'flex' }}\r\n          label={<FormattedMessage id=\"projects.addMember.time_out\" />}\r\n          validateStatus={form.getFieldError('time_out') ? 'error' : 'validating'}>\r\n          {form.getFieldDecorator('time_out', {\r\n            rules: []\r\n          })(\r\n            <DatePicker\r\n              format=\"DD/MM/YYYY\"\r\n              placeholder={intl.formatMessage({ id: 'projects.addMember.placeholer.time_out' })}\r\n            />\r\n          )}\r\n        </Form.Item>\r\n        <Form.Item\r\n          style={{ display: 'flex' }}\r\n          label={<FormattedMessage id=\"projects.addMember.assignee\" />}\r\n          validateStatus={form.getFieldError('assignee') ? 'error' : 'validating'}>\r\n          {form.getFieldDecorator('assignee', {\r\n            rules: [],\r\n          })(\r\n            <Select\r\n              disabled={disabledLink}\r\n              mode=\"multiple\"\r\n              placeholder={intl.formatMessage({ id: 'projects.addMember.placeholer.link' })}\r\n            >\r\n              <Select.Option title={intl.formatMessage({ id: 'projects.addMember.title.defaultAssignee' })} value=\"Default\">\r\n                <FormattedMessage id={`projects.addMember.defaultAssignee`} />\r\n              </Select.Option>\r\n              {(joinedMembers || []).map(\r\n                (e) => {\r\n                  return (\r\n                    <Select.Option key={e.id} value={e.member_detail.staff_code}>\r\n                      {e.member_detail.full_name} - <FormattedMessage id={`projects.addMember.role.${e.role}`} />\r\n                    </Select.Option>\r\n                  );\r\n                })}\r\n            </Select>\r\n          )}\r\n        </Form.Item>\r\n        <Form.Item\r\n          style={{ display: 'flex' }}\r\n          label={<FormattedMessage id=\"projects.addMember.effort\" />}\r\n          validateStatus={form.getFieldError('effort') ? 'error' : 'validating'}>\r\n          {form.getFieldDecorator('effort', {\r\n            rules: [\r\n              {\r\n                required: true,\r\n                message: intl.formatMessage({ id: 'projects.addMember.error.effort' })\r\n              }\r\n            ]\r\n          })(<InputNumber min={0.1} max={1} step={0.1} />)}\r\n        </Form.Item>\r\n\r\n        <Row>\r\n          <Col span={5}></Col>\r\n          <Col span={19}>\r\n            <Descriptions column={1}>\r\n              <Descriptions.Item label={<FormattedMessage id=\"projects.addMember.email\" />}>\r\n                {memberDetail.email || null}\r\n              </Descriptions.Item>\r\n              <Descriptions.Item\r\n                className={styles.descItem}\r\n                label={<FormattedMessage id=\"projects.addMember.phone_number\" />}>\r\n                {memberDetail.phone_number || null}\r\n              </Descriptions.Item>\r\n            </Descriptions>\r\n          </Col>\r\n        </Row>\r\n      </Form>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nAddMemberModal.propTypes = propTypes;\r\n\r\nAddMemberModal.defaultProps = defaultProps;\r\n\r\nconst AddMemberForm = Form.create({ name: 'memberAdd' })(AddMemberModal);\r\n\r\nexport default injectIntl(AddMemberForm, {});\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { css } from 'emotion';\r\nimport { formShape } from 'rc-form';\r\nimport { FormattedMessage, injectIntl } from 'react-intl';\r\nimport moment from 'moment';\r\n\r\nimport {\r\n  Drawer,\r\n  Form,\r\n  Input,\r\n  DatePicker,\r\n  Icon,\r\n  Row,\r\n  Col,\r\n  Select,\r\n  Descriptions,\r\n  Typography,\r\n  Spin,\r\n  Button,\r\n  Popconfirm\r\n} from 'antd';\r\n\r\nimport ErrorNotification from '../../../../components/Notification/Error';\r\nimport SuccessNotification from '../../../../components/Notification/Success';\r\nimport { actions as customerActions } from '../../../customer/store';\r\nimport { actions as projectActions } from '../../store';\r\n\r\nconst propTypes = {\r\n  intl: PropTypes.shape({}).isRequired,\r\n  onClose: PropTypes.func.isRequired,\r\n  drawerVisible: PropTypes.bool.isRequired,\r\n  form: formShape.isRequired,\r\n\r\n  project: PropTypes.shape({}),\r\n\r\n  getCustomers: PropTypes.func.isRequired,\r\n  updateProject: PropTypes.func.isRequired,\r\n  getProject: PropTypes.func.isRequired\r\n};\r\n\r\nconst defaultProps = {\r\n  project: {}\r\n};\r\n\r\nconst styles = {\r\n  drawerBody: css`\r\n    padding: 0px 0px 56px 0px !important;\r\n  `,\r\n  drawerFooter: css`\r\n    position: absolute;\r\n    bottom: 0;\r\n    right: 24px;\r\n    left: 24px;\r\n    padding: 24px 0px;\r\n    background-color: #ffffff;\r\n    border-top: '1px solid #e8e8e8';\r\n  `,\r\n  deletedCustomerMsg: css`\r\n    color: red !important;\r\n  `\r\n};\r\n\r\nconst listStatus = [\r\n  { id: 1, name: 'running' },\r\n  { id: 2, name: 'completed' },\r\n  { id: 3, name: 'stopped' }\r\n];\r\n\r\nconst formItemLayout = {\r\n  labelCol: {\r\n    span: 8\r\n  },\r\n  wrapperCol: {\r\n    span: 16\r\n  }\r\n};\r\n\r\nconst UpdateProjectDrawer = ({\r\n  getCustomers,\r\n  updateProject,\r\n  getProject,\r\n  intl,\r\n  onClose,\r\n  drawerVisible,\r\n  form,\r\n  project\r\n}) => {\r\n  const dispatch = useDispatch();\r\n  const [customerDetail, setCustomerDetail] = useState(project.customer);\r\n  const { getCustomersError, getCustomersErrors } = useSelector((state) => state.customers);\r\n  const customersList = useSelector((state) => state.customers.list);\r\n  const { updateProjectResult, updateProjectError, updateProjectErrors, loading } = useSelector(\r\n    (state) => state.projects\r\n  );\r\n  const customerLoading = useSelector((state) => state.customers.loading);\r\n\r\n  // Get all customers after open modal\r\n  useEffect(() => {\r\n    getCustomers && getCustomers();\r\n    return () => {\r\n      dispatch(projectActions.updateProjectCleanError());\r\n      dispatch(projectActions.updateProjectCleanData());\r\n    };\r\n  }, [getCustomers, dispatch]);\r\n\r\n  // show notification if get customers failure\r\n  useEffect(() => {\r\n    if (getCustomersError) {\r\n      const title = intl.formatMessage({ id: 'notification.error' });\r\n      const message = intl.formatMessage({\r\n        id: getCustomersErrors.message\r\n          ? getCustomersErrors.message\r\n          : 'customers.customersList.message.error'\r\n      });\r\n      ErrorNotification(title, message);\r\n      // clean error\r\n      dispatch(customerActions.cleanError(false));\r\n    }\r\n  }, [dispatch, getCustomersError, getCustomersErrors, intl]);\r\n\r\n  // Handle showing notification after update project\r\n  useEffect(() => {\r\n    // show success notification\r\n    if (updateProjectResult) {\r\n      const title = intl.formatMessage({ id: 'notification.success' });\r\n      const message = intl.formatMessage({ id: updateProjectResult.message });\r\n      SuccessNotification(title, message);\r\n      // close the modal and clean state\r\n      onClose();\r\n      // re-call get project detail api\r\n      getProject && getProject(project);\r\n    }\r\n    // show error notification\r\n  }, [onClose, intl, updateProjectResult, dispatch, project, getProject]);\r\n\r\n  useEffect(() => {\r\n    if (updateProjectError) {\r\n      const title = intl.formatMessage({ id: 'notification.error' });\r\n      const message = intl.formatMessage({ id: 'projects.updateProject.message.error' });\r\n      ErrorNotification(title, message);\r\n      // clean state\r\n      dispatch(projectActions.updateProjectCleanError());\r\n    }\r\n  }, [dispatch, intl, updateProjectError, updateProjectErrors]);\r\n\r\n  const handleSubmit = () => {\r\n    form.validateFields((err, values) => {\r\n      if (!err) {\r\n        //anphan 1/10/2020 clone new customField from values to compare  with project.customField\r\n        const customField = [];\r\n        let indexCustomField = 3;\r\n        do {\r\n          customField.push({\r\n            idInfoCustomField: project.customField[indexCustomField - 3].idInfoCustomField,\r\n            value: Object.values(values)[indexCustomField]\r\n          });\r\n          indexCustomField++;\r\n        } while (Object.keys(values)[indexCustomField] !== 'customer_id');\r\n        const body = {\r\n          customer_id: values.customer_id,\r\n          name: values.name,\r\n          status: values.status,\r\n          start_time: parseInt(moment(values.estimated[0]).format('x'), 10),\r\n          end_time: parseInt(moment(values.estimated[1]).format('x'), 10),\r\n          customField: customField\r\n        };\r\n        if (customerDetail.hidden) {\r\n          const title = intl.formatMessage({ id: 'notification.error' });\r\n          const message = intl.formatMessage({ id: 'notification.message.form.deletedCustomer' });\r\n          return ErrorNotification(title, message);\r\n        }\r\n        body.customField = customField;\r\n        updateProject(body);\r\n      } else {\r\n        // showing error form input notification\r\n        const title = intl.formatMessage({ id: 'notification.error' });\r\n        const message = intl.formatMessage({ id: 'notification.message.form.error' });\r\n        ErrorNotification(title, message);\r\n      }\r\n      return null;\r\n    });\r\n  };\r\n\r\n  const handleSelect = (value) => {\r\n    customersList.map((customer) => {\r\n      if (customer.id === value) {\r\n        setCustomerDetail(customer);\r\n      }\r\n      return customer;\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Drawer\r\n      title={<FormattedMessage id=\"projects.updateProject.title\" />}\r\n      placement=\"right\"\r\n      onClose={onClose}\r\n      visible={drawerVisible}\r\n      maskClosable={false}\r\n      width={550}>\r\n      <Form className={styles.drawerBody} onSubmit={() => handleSubmit()} {...formItemLayout}>\r\n        <Row style={{ marginBottom: 10 }}>\r\n          <Icon type=\"project\" style={{ marginRight: 10 }} />\r\n          <Typography.Text style={{ fontWeight: 'bold' }}>\r\n            {<FormattedMessage id=\"projects.createProject.projectInformation\" />}\r\n          </Typography.Text>\r\n        </Row>\r\n\r\n        <Form.Item\r\n          style={{ display: 'flex' }}\r\n          label={<FormattedMessage id=\"projects.createProject.projectName\" />}\r\n          validateStatus={form.getFieldError('name') ? 'error' : 'validating'}>\r\n          {form.getFieldDecorator('name', {\r\n            rules: [\r\n              {\r\n                required: true,\r\n                message: intl.formatMessage({ id: 'projects.createProject.error.name' })\r\n              }\r\n            ],\r\n            initialValue: project.name\r\n          })(<Input />)}\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          style={{ display: 'flex' }}\r\n          label={<FormattedMessage id=\"projects.createProject.status\" />}\r\n          validateStatus={form.getFieldError('status') ? 'error' : 'validating'}>\r\n          {form.getFieldDecorator('status', {\r\n            rules: [\r\n              {\r\n                required: true,\r\n                message: intl.formatMessage({ id: 'projects.createProject.error.status' })\r\n              }\r\n            ],\r\n            initialValue: listStatus.find((e) => {\r\n              return e.name === project.status;\r\n            }).name\r\n          })(\r\n            <Select allowClear>\r\n              {(listStatus || []).map((e) => {\r\n                return (\r\n                  <Select.Option key={e.id} value={e.name}>\r\n                    <FormattedMessage id={`projects.status.${e.name}`} />\r\n                  </Select.Option>\r\n                );\r\n              })}\r\n            </Select>\r\n          )}\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          style={{ display: 'flex' }}\r\n          label={<FormattedMessage id=\"projects.createProject.Estimated\" />}\r\n          validateStatus={form.getFieldError('estimated') ? 'error' : 'validating'}>\r\n          {form.getFieldDecorator('estimated', {\r\n            rules: [\r\n              {\r\n                required: true,\r\n                message: intl.formatMessage({ id: 'projects.createProject.error.estimated' })\r\n              }\r\n            ],\r\n            initialValue: [\r\n              moment(parseInt(project.start_time, 10)),\r\n              moment(parseInt(project.end_time, 10))\r\n            ]\r\n          })(\r\n            <DatePicker.RangePicker\r\n              format=\"DD/MM/YYYY\"\r\n              placeholder={[\r\n                intl.formatMessage({ id: 'projects.createProject.startDate' }),\r\n                intl.formatMessage({ id: 'projects.createProject.endDate' })\r\n              ]}\r\n            />\r\n          )}\r\n        </Form.Item>\r\n        <Row style={{ marginBottom: 10, marginLeft: '24px' }}>\r\n          <Typography.Text style={{ fontWeight: 'bold' }}>\r\n            <FormattedMessage id=\"projects.createProject.descriptions\" />\r\n          </Typography.Text>\r\n        </Row>\r\n        {(project && project.customField.length > 0)\r\n          ? project.customField.map((obj) => (\r\n            <Form.Item\r\n              key={obj.idInfoCustomField}\r\n              style={{ display: 'flex' }}\r\n              label={obj.name}\r\n              validateStatus={form.getFieldError(obj.name) ? 'error' : 'validating'}>\r\n              {form.getFieldDecorator(obj.name, {\r\n                rules: [\r\n                  {\r\n                    required: obj.require,\r\n                    message:\r\n                      obj.name + intl.formatMessage({ id: 'projects.createProject.required' })\r\n                  }\r\n                ],\r\n                initialValue: obj.value\r\n              })(<Input />)}\r\n            </Form.Item>\r\n          ))\r\n          : null}\r\n\r\n        <Row style={{ marginBottom: 10 }}>\r\n          <Icon type=\"user\" style={{ marginRight: 10 }} />\r\n          <Typography.Text style={{ fontWeight: 'bold' }}>\r\n            <FormattedMessage id=\"projects.createProject.customerInformation\" />\r\n          </Typography.Text>\r\n        </Row>\r\n\r\n        <Form.Item\r\n          style={{ display: 'flex' }}\r\n          label={<FormattedMessage id=\"projects.createProject.customer\" />}\r\n          validateStatus={form.getFieldError('customer_id') ? 'error' : 'validating'}>\r\n          {form.getFieldDecorator('customer_id', {\r\n            rules: [\r\n              {\r\n                required: true,\r\n                message: intl.formatMessage({ id: 'projects.createProject.error.customer' })\r\n              }\r\n            ],\r\n            initialValue: !customerDetail.hidden ? project.customer.id : project.customer.name\r\n          })(\r\n            <Select\r\n              allowClear\r\n              autoClearSearchValue\r\n              onSelect={(value) => handleSelect(value)}\r\n              notFoundContent={customerLoading && <Spin size=\"small\" />}>\r\n              {(customersList || []).map((e) => {\r\n                return (\r\n                  <Select.Option key={e.id} value={e.id}>\r\n                    {e.name}\r\n                  </Select.Option>\r\n                );\r\n              })}\r\n            </Select>\r\n          )}\r\n        </Form.Item>\r\n        <Row>\r\n          <Col span={8}></Col>\r\n          <Col span={16}>\r\n            <Descriptions column={1}>\r\n              <Descriptions.Item\r\n                label={<FormattedMessage id=\"projects.createProject.customerEmail\" />}>\r\n                {customerDetail.email || null}\r\n              </Descriptions.Item>\r\n              <Descriptions.Item\r\n                label={<FormattedMessage id=\"projects.createProject.customerPhonenumber\" />}>\r\n                {customerDetail.phone_number || null}\r\n              </Descriptions.Item>\r\n              <Descriptions.Item\r\n                label={<FormattedMessage id=\"projects.createProject.customerAddress\" />}>\r\n                {customerDetail.address || null}\r\n              </Descriptions.Item>\r\n            </Descriptions>\r\n            {customerDetail.hidden && (\r\n              <Typography.Text className={styles.deletedCustomerMsg}>\r\n                <FormattedMessage id=\"projects.updateProject.deletedCustomer\" />\r\n              </Typography.Text>\r\n            )}\r\n          </Col>\r\n        </Row>\r\n      </Form>\r\n      <Row className={styles.drawerFooter}>\r\n        <Popconfirm\r\n          title={<FormattedMessage id=\"projects.updateProject.confirm.add\" />}\r\n          onConfirm={() => handleSubmit()}\r\n          okText={<FormattedMessage id=\"button.confirm.yes\" />}\r\n          cancelText={<FormattedMessage id=\"button.confirm.no\" />}>\r\n          <Button icon=\"edit\" type=\"primary\" loading={loading}>\r\n            {<FormattedMessage id=\"button.update\" />}\r\n          </Button>\r\n        </Popconfirm>\r\n        <Button\r\n          style={{ marginLeft: 15 }}\r\n          icon=\"close-circle\"\r\n          type=\"default\"\r\n          key=\"close\"\r\n          onClick={onClose}>\r\n          {<FormattedMessage id=\"button.close\" />}\r\n        </Button>\r\n      </Row>\r\n    </Drawer>\r\n  );\r\n};\r\n\r\nUpdateProjectDrawer.propTypes = propTypes;\r\n\r\nUpdateProjectDrawer.defaultProps = defaultProps;\r\n\r\nconst UpdateProjectForm = Form.create({ name: 'updateProject' })(UpdateProjectDrawer);\r\n\r\nexport default injectIntl(UpdateProjectForm, {});\r\n","import React, { useEffect } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { css } from 'emotion';\r\nimport { formShape } from 'rc-form';\r\nimport { FormattedMessage, injectIntl } from 'react-intl';\r\nimport moment from 'moment';\r\n\r\nimport {\r\n  Drawer,\r\n  Form,\r\n  DatePicker,\r\n  Icon,\r\n  Row,\r\n  Col,\r\n  Select,\r\n  InputNumber,\r\n  Typography,\r\n  Button,\r\n  Popconfirm,\r\n  Descriptions\r\n} from 'antd';\r\n\r\nimport ErrorNotification from '../../../../components/Notification/Error';\r\nimport SuccessNotification from '../../../../components/Notification/Success';\r\nimport { roles } from '../../../../utils/roles';\r\nimport { actions as projectActions } from '../../store';\r\n\r\nconst propTypes = {\r\n  intl: PropTypes.shape({}).isRequired,\r\n  onClose: PropTypes.func.isRequired,\r\n  drawerVisible: PropTypes.bool.isRequired,\r\n  form: formShape.isRequired,\r\n\r\n  getProject: PropTypes.func.isRequired,\r\n  getJoinedMembers: PropTypes.func.isRequired,\r\n  updateMember: PropTypes.func.isRequired\r\n};\r\n\r\nconst defaultProps = {};\r\n\r\nconst styles = {\r\n  drawerFooter: css`\r\n    position: absolute;\r\n    bottom: 0;\r\n    right: 24px;\r\n    left: 24px;\r\n    padding: 24px 0px;\r\n    background-color: #ffffff;\r\n    border-top: '1px solid #e8e8e8';\r\n  `\r\n};\r\n\r\nconst listStatus = [\r\n  { id: 1, name: 'working' },\r\n  { id: 2, name: 'leave' },\r\n  { id: 3, name: 'idle' }\r\n];\r\n\r\nconst formItemLayout = {\r\n  labelCol: {\r\n    span: 8\r\n  },\r\n  wrapperCol: {\r\n    span: 16\r\n  }\r\n};\r\n\r\nconst UpdateMemberDrawer = ({\r\n  intl,\r\n  onClose,\r\n  drawerVisible,\r\n  form,\r\n  member,\r\n  getProject,\r\n  getJoinedMembers,\r\n  updateMember,\r\n  joinedMembers\r\n}) => {\r\n  const dispatch = useDispatch();\r\n  const { updateMemberResult, updateMemberError, updateMemberErrors, loading } = useSelector(\r\n    (state) => state.projects\r\n  );\r\n  useEffect(() => {\r\n    return () => {\r\n      dispatch(projectActions.updateMemberCleanError());\r\n      dispatch(projectActions.updateMemberCleanData(false));\r\n    };\r\n  }, [dispatch]);\r\n\r\n  // Handle showing notification after update project\r\n  useEffect(() => {\r\n    // show success notification\r\n    if (updateMemberResult) {\r\n      const title = intl.formatMessage({ id: 'notification.success' });\r\n      const message = intl.formatMessage({ id: updateMemberResult.message });\r\n      SuccessNotification(title, message);\r\n      // close the modal and clean state\r\n      onClose();\r\n      // re-call get project detail api\r\n      getProject && getProject();\r\n      // re-call get members list api\r\n      getJoinedMembers && getJoinedMembers();\r\n    }\r\n  }, [onClose, intl, updateMemberResult, getJoinedMembers, getProject]);\r\n\r\n  useEffect(() => {\r\n    // show error notification\r\n    if (updateMemberError) {\r\n      const title = intl.formatMessage({ id: 'notification.error' });\r\n      const message = intl.formatMessage({\r\n        id: updateMemberErrors.message\r\n          ? updateMemberErrors.message\r\n          : 'projects.updateMemberInProject.message.error'\r\n      });\r\n      ErrorNotification(title, message);\r\n      // clean state\r\n      dispatch(projectActions.updateMemberCleanError(false));\r\n    }\r\n  }, [dispatch, intl, updateMemberError, updateMemberErrors]);\r\n\r\n  const handleSubmit = () => {\r\n    form.validateFields((err, values) => {\r\n      if (!err) {\r\n        const body = {\r\n          time_in: parseInt(moment(values.time_in).format('x'), 10),\r\n          time_out: values.time_out ? parseInt(moment(values.time_out).format('x'), 10) : null,\r\n          effort: values.effort,\r\n          role: values.role,\r\n          member_status: values.member_status,\r\n          assignee: values.assignee,\r\n        };\r\n        const oldBody = {\r\n          time_in: parseInt(member.time_in, 10),\r\n          time_out: member.time_out ? parseInt(member.time_out, 10) : null,\r\n          effort: member.effort,\r\n          role: member.role,\r\n          member_status: member.member_status,\r\n          assignee: member.assignee,\r\n        };\r\n        // check if value is not change\r\n        if (JSON.stringify(body) === JSON.stringify(oldBody)) {\r\n          const title = intl.formatMessage({ id: 'notification.error' });\r\n          const message = intl.formatMessage({ id: 'notification.message.form.noChanging' });\r\n          return ErrorNotification(title, message);\r\n        }        \r\n        updateMember && updateMember(body, member);\r\n      } else {\r\n        // showing error form input notification\r\n        const title = intl.formatMessage({ id: 'notification.error' });\r\n        const message = intl.formatMessage({ id: 'notification.message.form.error' });\r\n        ErrorNotification(title, message);\r\n      }\r\n      return null;\r\n    });\r\n  };\r\n  return (\r\n    <Drawer\r\n      title={<FormattedMessage id=\"projects.updateMember.title\" />}\r\n      placement=\"right\"\r\n      onClose={onClose}\r\n      visible={drawerVisible}\r\n      maskClosable={false}\r\n      width={500}>\r\n      <Form onSubmit={() => handleSubmit()} {...formItemLayout}>\r\n        <Row style={{ marginBottom: 10 }}>\r\n          <Icon type=\"user\" style={{ marginRight: 10 }} />\r\n          <Typography.Text style={{ fontWeight: 'bold' }}>\r\n            {<FormattedMessage id=\"projects.addMember.memberInformation\" />}\r\n          </Typography.Text>\r\n        </Row>\r\n\r\n        <Row>\r\n          <Col span={8}></Col>\r\n          <Col span={16}>\r\n            <Descriptions column={1}>\r\n              <Descriptions.Item\r\n                className={styles.descItem}\r\n                label={<FormattedMessage id=\"projects.updateMember.staff_code\" />}>\r\n                {member.member_detail.staff_code || null}\r\n              </Descriptions.Item>\r\n              <Descriptions.Item\r\n                className={styles.descItem}\r\n                label={<FormattedMessage id=\"projects.updateMember.full_name\" />}>\r\n                {member.member_detail.full_name || null}\r\n              </Descriptions.Item>\r\n              <Descriptions.Item label={<FormattedMessage id=\"projects.updateMember.email\" />}>\r\n                {member.member_detail.email || null}\r\n              </Descriptions.Item>\r\n              <Descriptions.Item\r\n                className={styles.descItem}\r\n                label={<FormattedMessage id=\"projects.updateMember.phone_number\" />}>\r\n                {member.member_detail.phone_number || null}\r\n              </Descriptions.Item>\r\n            </Descriptions>\r\n          </Col>\r\n        </Row>\r\n\r\n        <Form.Item\r\n          style={{ display: 'flex' }}\r\n          label={<FormattedMessage id=\"projects.addMember.status\" />}\r\n          validateStatus={form.getFieldError('member_status') ? 'error' : 'validating'}>\r\n          {form.getFieldDecorator('member_status', {\r\n            rules: [\r\n              {\r\n                required: true,\r\n                message: intl.formatMessage({ id: 'projects.addMember.error.status' })\r\n              }\r\n            ],\r\n            initialValue: listStatus.find((e) => {\r\n              return e.name === member.member_status;\r\n            }).name\r\n          })(\r\n            <Select allowClear>\r\n              {(listStatus || []).map((e) => {\r\n                return (\r\n                  <Select.Option key={e.id} value={e.name}>\r\n                    <FormattedMessage id={`projects.addMember.status.${e.name}`} />\r\n                  </Select.Option>\r\n                );\r\n              })}\r\n            </Select>\r\n          )}\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          style={{ display: 'flex' }}\r\n          label={<FormattedMessage id=\"projects.addMember.role\" />}\r\n          validateStatus={form.getFieldError('role') ? 'error' : 'validating'}>\r\n          {form.getFieldDecorator('role', {\r\n            rules: [\r\n              {\r\n                required: true,\r\n                message: intl.formatMessage({ id: 'projects.addMember.error.role' })\r\n              }\r\n            ],\r\n            initialValue: roles.find((e) => {\r\n              return e.key === member.role;\r\n            }).key\r\n          })(\r\n            <Select allowClear>\r\n              {(roles || []).map((e) => {\r\n                return (\r\n                  <Select.Option key={e.id} value={e.key}>\r\n                    <FormattedMessage id={`projects.addMember.role.${e.key}`} />\r\n                  </Select.Option>\r\n                );\r\n              })}\r\n            </Select>\r\n          )}\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          style={{ display: 'flex' }}\r\n          label={<FormattedMessage id=\"projects.addMember.time_in\" />}\r\n          validateStatus={form.getFieldError('time_in') ? 'error' : 'validating'}>\r\n          {form.getFieldDecorator('time_in', {\r\n            rules: [\r\n              {\r\n                required: true,\r\n                message: intl.formatMessage({ id: 'projects.addMember.error.time_in' })\r\n              }\r\n            ],\r\n            initialValue: moment(parseInt(member.time_in, 10))\r\n          })(\r\n            <DatePicker\r\n              format=\"DD/MM/YYYY\"\r\n              placeholder={intl.formatMessage({ id: 'projects.addMember.placeholer.time_in' })}\r\n            />\r\n          )}\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          style={{ display: 'flex' }}\r\n          label={<FormattedMessage id=\"projects.addMember.time_out\" />}\r\n          validateStatus={form.getFieldError('time_out') ? 'error' : 'validating'}>\r\n          {form.getFieldDecorator('time_out', {\r\n            rules: [],\r\n            initialValue: member.time_out ? moment(parseInt(member.time_out, 10)) : null\r\n          })(\r\n            <DatePicker\r\n              format=\"DD/MM/YYYY\"\r\n              placeholder={intl.formatMessage({ id: 'projects.addMember.placeholer.time_out' })}\r\n            />\r\n          )}\r\n        </Form.Item>\r\n        <Form.Item\r\n          style={{ display: 'flex' }}\r\n          label={<FormattedMessage id=\"projects.addMember.assignee\" />}\r\n          validateStatus={form.getFieldError('assignee') ? 'error' : 'validating'}>\r\n          {form.getFieldDecorator('assignee', {\r\n            rules: [],\r\n          })(\r\n            <Select\r\n              mode=\"multiple\"\r\n              placeholder={intl.formatMessage({ id: 'projects.addMember.placeholer.link' })}>\r\n              {/* Default: All member under the rank */}\r\n              <Select.Option title={intl.formatMessage({ id: 'projects.addMember.title.defaultAssignee' })} value=\"Default\">\r\n                <FormattedMessage id={`projects.addMember.defaultAssignee`} />\r\n              </Select.Option>\r\n              {(joinedMembers).map(\r\n                (e) => {\r\n                  if (e.id !== member.id) {\r\n                    return (\r\n                      <Select.Option key={e.id} value={e.member_detail.staff_code}>\r\n                        {e.member_detail.full_name} - <FormattedMessage id={`projects.addMember.role.${e.role}`} />\r\n                      </Select.Option>\r\n                    );\r\n                  }\r\n                  return undefined;\r\n                })}\r\n            </Select>\r\n          )}\r\n        </Form.Item>\r\n        <Form.Item\r\n          style={{ display: 'flex', paddingBottom: '50px' }}\r\n          label={<FormattedMessage id=\"projects.addMember.effort\" />}\r\n          validateStatus={form.getFieldError('effort') ? 'error' : 'validating'}>\r\n          {form.getFieldDecorator('effort', {\r\n            rules: [\r\n              {\r\n                required: true,\r\n                message: intl.formatMessage({ id: 'projects.addMember.error.effort' })\r\n              }\r\n            ],\r\n            initialValue: member.effort\r\n          })(<InputNumber min={0.1} max={1} step={0.1} />)}\r\n        </Form.Item>\r\n\r\n        <Row className={styles.drawerFooter}>\r\n          <Popconfirm\r\n            title={<FormattedMessage id=\"projects.updateMember.confirm.add\" />}\r\n            onConfirm={() => handleSubmit()}\r\n            okText={<FormattedMessage id=\"button.confirm.yes\" />}\r\n            cancelText={<FormattedMessage id=\"button.confirm.no\" />}>\r\n            <Button icon=\"edit\" type=\"primary\" loading={loading}>\r\n              {<FormattedMessage id=\"button.update\" />}\r\n            </Button>\r\n          </Popconfirm>\r\n          <Button\r\n            style={{ marginLeft: 15 }}\r\n            icon=\"close-circle\"\r\n            type=\"default\"\r\n            key=\"close\"\r\n            onClick={onClose}>\r\n            {<FormattedMessage id=\"button.close\" />}\r\n          </Button>\r\n        </Row>\r\n      </Form>\r\n    </Drawer>\r\n  );\r\n};\r\n\r\nUpdateMemberDrawer.propTypes = propTypes;\r\n\r\nUpdateMemberDrawer.defaultProps = defaultProps;\r\n\r\nconst UpdateMemberForm = Form.create({ name: 'updateProject' })(UpdateMemberDrawer);\r\n\r\nexport default injectIntl(UpdateMemberForm, {});\r\n","import React, { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { FormattedMessage, injectIntl } from 'react-intl';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport moment from 'moment';\r\nimport {\r\n  Table,\r\n  Row,\r\n  Typography,\r\n  Button,\r\n  Col,\r\n  Tooltip,\r\n  Descriptions,\r\n  Divider,\r\n  Popconfirm,\r\n  Skeleton,\r\n  Tag\r\n} from 'antd';\r\n\r\nimport { actions as projectActions } from '../../store';\r\n\r\nimport MemberDiagram from '../../../member/memberDiagram/MemberDiagram';\r\nimport AddMemberModal from '../../addMember/components/AddMemberModal';\r\nimport ErrorNotification from '../../../../components/Notification/Error';\r\nimport SuccessNotification from '../../../../components/Notification/Success';\r\nimport UpdateProjectDrawer from '../../updateProject/components/UpdateProjectDrawer';\r\nimport UpdateMemberDrawer from '../../updateMember/components/UpdateMemberDrawer';\r\nimport WithRole from '../../../../hocs/WithRole';\r\n\r\nconst propTypes = {\r\n  match: PropTypes.shape({}).isRequired,\r\n  intl: PropTypes.shape({}).isRequired,\r\n\r\n  project: PropTypes.shape({}),\r\n  joinedMembers: PropTypes.shape({}),\r\n  loading: PropTypes.bool,\r\n\r\n  getProject: PropTypes.func.isRequired,\r\n  getJoinedMembers: PropTypes.func.isRequired,\r\n  getMembers: PropTypes.func.isRequired,\r\n  removeMember: PropTypes.func.isRequired,\r\n  addMember: PropTypes.func.isRequired,\r\n  updateProject: PropTypes.func.isRequired,\r\n  getCustomers: PropTypes.func.isRequired,\r\n  updateMember: PropTypes.func.isRequired\r\n};\r\n\r\nconst defaultProps = {\r\n  loading: false,\r\n  project: null,\r\n  joinedMembers: {\r\n    list: [],\r\n    total: 0\r\n  }\r\n};\r\n\r\nconst ButtonEditProject = ({ handleEditProjectDrawer, project }) => {\r\n  return (\r\n    <Button icon=\"edit\" type=\"primary\" disabled={!project} onClick={handleEditProjectDrawer}>\r\n      <FormattedMessage id=\"button.update\" />\r\n    </Button>\r\n  );\r\n};\r\n\r\nconst ButtonEditMember = ({ handleControlMemberDrawer, record }) => {\r\n  return (\r\n    <Button\r\n      shape=\"circle\"\r\n      icon=\"edit\"\r\n      type=\"primary\"\r\n      style={{ margin: '0px 5px' }}\r\n      // eslint-disable-next-line no-use-before-define\r\n      onClick={() => handleControlMemberDrawer(record)}\r\n    />\r\n  );\r\n};\r\n\r\nconst ButtonDeleteMember = ({ handleConfirmDelete, record }) => {\r\n  return (\r\n    <Popconfirm\r\n      title={<FormattedMessage id=\"projectDetail.removeMember.confirm.delete\" />}\r\n      onConfirm={() => handleConfirmDelete(record)}\r\n      okText={<FormattedMessage id=\"button.confirm.yes\" />}\r\n      cancelText={<FormattedMessage id=\"button.confirm.no\" />}>\r\n      <Button shape=\"circle\" icon=\"minus-circle\" type=\"danger\" style={{ margin: '0px 5px' }} />\r\n    </Popconfirm>\r\n  );\r\n};\r\n\r\nconst ButtonAddMember = ({ handleAddMemberModal }) => {\r\n  return (\r\n    <Button\r\n      style={{ marginLeft: 10 }}\r\n      type=\"primary\"\r\n      shape=\"circle\"\r\n      icon=\"usergroup-add\"\r\n      onClick={handleAddMemberModal}\r\n    />\r\n  );\r\n};\r\n\r\nconst ProjectDetail = ({\r\n  project,\r\n  joinedMembers,\r\n  loading,\r\n  match,\r\n  intl,\r\n  getProject,\r\n  getJoinedMembers,\r\n  removeMember,\r\n  getCustomers,\r\n  updateProject,\r\n  addMember,\r\n  updateMember,\r\n  getMembers\r\n}) => {\r\n  const dispatch = useDispatch();\r\n  const [visible, setVisible] = useState(false);\r\n  const [drawerVisible, setDrawerVisible] = useState(false);\r\n  const [memberDrawerVisible, setMemberDrawerVisible] = useState(false);\r\n  const [openAddModal, setOpenAddModal] = useState(false);\r\n  const [selectedMember, selectMember] = useState(null);\r\n  const {\r\n    removeMemberError,\r\n    removeMemberErrors,\r\n    getProjectError,\r\n    getProjectErrors,\r\n    getJoinedMembersError,\r\n    getJoinedMembersErrors,\r\n    removeMemberResult\r\n  } = useSelector((state) => state.projects);\r\n  // show notification error when get project detail failure\r\n  useEffect(() => {\r\n    if (getProjectError) {\r\n      const title = intl.formatMessage({ id: 'notification.error' });\r\n      const message = intl.formatMessage({\r\n        id: getProjectErrors.message\r\n          ? getProjectErrors.message\r\n          : 'projectDetail.getDetail.message.error'\r\n      });\r\n      ErrorNotification(title, message);\r\n      dispatch(projectActions.getProjectCleanError());\r\n    }\r\n  }, [dispatch, getProjectError, getProjectErrors, intl]);\r\n\r\n  // show notification error when get project members failure\r\n  useEffect(() => {\r\n    if (getJoinedMembersError) {\r\n      const title = intl.formatMessage({ id: 'notification.error' });\r\n      const message = intl.formatMessage({\r\n        id: getJoinedMembersErrors.message\r\n          ? getJoinedMembersErrors.message\r\n          : 'projectDetail.getMembers.message.error'\r\n      });\r\n      ErrorNotification(title, message);\r\n      dispatch(projectActions.getJoinedMembersCleanError());\r\n    }\r\n  }, [dispatch, getJoinedMembersError, getJoinedMembersErrors, intl]);\r\n\r\n  // handle showing notification when remove member from project\r\n  useEffect(() => {\r\n    // show notification\r\n    if (removeMemberResult) {\r\n      const title = intl.formatMessage({ id: 'notification.success' });\r\n      const message = intl.formatMessage({ id: removeMemberResult.message });\r\n      SuccessNotification(title, message);\r\n      // re-call api request and clean error state\r\n      getProject && getProject();\r\n      getJoinedMembers && getJoinedMembers();\r\n      dispatch(projectActions.removeMemberCleanData());\r\n    }\r\n  }, [dispatch, getProject, getJoinedMembers, intl, removeMemberResult]);\r\n\r\n  useEffect(() => {\r\n    if (removeMemberError) {\r\n      const title = intl.formatMessage({ id: 'notification.error' });\r\n      const message = intl.formatMessage({\r\n        id: removeMemberErrors.message\r\n          ? removeMemberErrors.message\r\n          : 'projects.removeMemberFromProject.message.error'\r\n      });\r\n      ErrorNotification(title, message);\r\n      dispatch(projectActions.cleanError(false));\r\n    }\r\n  }, [dispatch, intl, removeMemberError, removeMemberErrors]);\r\n\r\n  const handleConfirmDelete = (data) => {\r\n    removeMember && removeMember(data);\r\n  };\r\n\r\n  const handleEditProjectDrawer = () => {\r\n    setDrawerVisible(!drawerVisible);\r\n  };\r\n\r\n  // Handle control open/close update member in project drawer\r\n  const handleControlMemberDrawer = (member) => {\r\n    if (member) {\r\n      selectMember(member);\r\n    } else {\r\n      selectMember(null);\r\n    }\r\n    setMemberDrawerVisible(!memberDrawerVisible);\r\n  };\r\n\r\n  const handleAddMemberModal = () => {\r\n    setOpenAddModal(!openAddModal);\r\n  };\r\n  //check custom field is link\r\n  const isURL = str => {\r\n    if (!str) return null\r\n    var res = str.match(/(http(s)?:\\/\\/.)?(www\\.)?[-a-zA-Z0-9@:%._~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_.~#?&//=]*)/g);\r\n    return (res !== null)\r\n  }\r\n  const columns = [\r\n    {\r\n      title: <FormattedMessage id=\"projects.detail.member.staff_code\" />,\r\n      dataIndex: 'member_detail',\r\n      key: 'staff_code',\r\n      render: (memberDetail) => {\r\n        return memberDetail.staff_code;\r\n      }\r\n    },\r\n    {\r\n      title: <FormattedMessage id=\"projects.detail.member.name\" />,\r\n      dataIndex: 'member_detail',\r\n      key: 'name',\r\n      render: (memberDetail) => {\r\n        return memberDetail.full_name;\r\n      }\r\n    },\r\n    {\r\n      title: <FormattedMessage id=\"projects.detail.member.status\" />,\r\n      dataIndex: 'member_status',\r\n      key: 'member_status',\r\n      render: (status) => {\r\n        switch (status) {\r\n          case 'working':\r\n            return (\r\n              <Tag color=\"#87d068\">\r\n                <FormattedMessage id=\"projects.addMember.status.working\" />\r\n              </Tag>\r\n            );\r\n          case 'leave':\r\n            return (\r\n              <Tag color=\"#f5222D\">\r\n                <FormattedMessage id=\"projects.addMember.status.leave\" />\r\n              </Tag>\r\n            );\r\n          case 'idle':\r\n            return (\r\n              <Tag color=\"#ffe58f\">\r\n                <FormattedMessage id=\"projects.addMember.status.idle\" />\r\n              </Tag>\r\n            );\r\n          default:\r\n            return null;\r\n        }\r\n      }\r\n    },\r\n    {\r\n      title: <FormattedMessage id=\"projects.detail.member.role\" />,\r\n      dataIndex: 'role',\r\n      key: 'role',\r\n      render: (role) => <FormattedMessage id={`projects.addMember.role.${role}`} />\r\n    },\r\n    {\r\n      title: <FormattedMessage id=\"projects.detail.member.effort\" />,\r\n      dataIndex: 'effort',\r\n      key: 'effort'\r\n    },\r\n    {\r\n      title: <FormattedMessage id=\"projects.detail.member.time_in\" />,\r\n      dataIndex: 'join_at',\r\n      key: 'join_at',\r\n      render: (date) => {\r\n        return moment(date).format('DD/MM/YYYY');\r\n      }\r\n    },\r\n    {\r\n      title: '',\r\n      dataIndex: '',\r\n      key: 'x',\r\n      align: 'right',\r\n      render: (record) => (\r\n        <React.Fragment>\r\n          <Tooltip placement=\"top\" title={<FormattedMessage id=\"button.tooltip.removeMember\" />}>\r\n            <WithRole\r\n              type={['admin', 'manager']}\r\n              component={ButtonDeleteMember}\r\n              record={record}\r\n              handleConfirmDelete={handleConfirmDelete}\r\n            />\r\n          </Tooltip>\r\n          <Tooltip placement=\"top\" title={<FormattedMessage id=\"button.tooltip.editMember\" />}>\r\n            <WithRole\r\n              type={['admin', 'manager']}\r\n              component={ButtonEditMember}\r\n              record={record}\r\n              handleControlMemberDrawer={handleControlMemberDrawer}\r\n            />\r\n          </Tooltip>\r\n        </React.Fragment>\r\n      )\r\n    }\r\n  ];\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Row style={{ marginBottom: 75 }}>\r\n        <Skeleton active loading={loading} paragraph={{ rows: 4 }}>\r\n          <Row>\r\n            <Col span={12}>\r\n              <Descriptions title={project && project.name ? project.name : ''} column={1}>\r\n                <Descriptions.Item label={<FormattedMessage id=\"projects.detail.customer\" />}>\r\n                  {project && project.customer ? project.customer.name : ''}\r\n                </Descriptions.Item>\r\n                <Descriptions.Item label={<FormattedMessage id=\"projects.detail.totalMember\" />}>\r\n                  {joinedMembers && joinedMembers.total ? joinedMembers.total : 0}\r\n                </Descriptions.Item>\r\n                <Descriptions.Item label={<FormattedMessage id=\"projects.detail.start_time\" />}>\r\n                  {project && project.start_time\r\n                    ? moment(parseInt(project.start_time, 10)).format('DD/MM/YYYY')\r\n                    : ''}\r\n                </Descriptions.Item>\r\n                <Descriptions.Item label={<FormattedMessage id=\"projects.detail.end_time\" />}>\r\n                  {project && project.end_time\r\n                    ? moment(parseInt(project.end_time, 10)).format('DD/MM/YYYY')\r\n                    : ''}\r\n                </Descriptions.Item>\r\n              </Descriptions>\r\n            </Col>\r\n            <Col span={12}>\r\n              <Typography.Text\r\n                style={{\r\n                  fontWeight: 'normal',\r\n                  display: 'block',\r\n                  marginBottom: '20px',\r\n                  fontSize: '16px'\r\n                }}>\r\n                <FormattedMessage id=\"projects.createProject.descriptions\" />\r\n              </Typography.Text>\r\n              <Descriptions column={1}>\r\n                {project\r\n                  ? project.customField.map((obj) => (\r\n                    <Descriptions.Item key={obj.idInfoCustomField} label={obj.name}>\r\n                      {isURL(obj.value) ? <a href={obj.value}>{obj.value}</a> : obj.value}\r\n                    </Descriptions.Item>\r\n                  ))\r\n                  : null}\r\n              </Descriptions>\r\n            </Col>\r\n          </Row>\r\n        </Skeleton>\r\n\r\n        <Row>\r\n          <WithRole\r\n            type={['admin', 'manager']}\r\n            component={ButtonEditProject}\r\n            project={project}\r\n            handleEditProjectDrawer={handleEditProjectDrawer}\r\n          />\r\n        </Row>\r\n\r\n        <Divider />\r\n        <Row>\r\n          <Row>\r\n            <Col span={12} style={{ display: 'flex' }}>\r\n              <Typography.Title level={4}>\r\n                <FormattedMessage id=\"projects.detail.currentMember\" />\r\n              </Typography.Title>\r\n              <Tooltip\r\n                placement=\"bottom\"\r\n                title={<FormattedMessage id=\"button.tooltip.addMember\" />}>\r\n                <WithRole\r\n                  type={['manager', 'admin']}\r\n                  component={ButtonAddMember}\r\n                  handleAddMemberModal={handleAddMemberModal}\r\n                />\r\n              </Tooltip>\r\n            </Col>\r\n            <Col span={12}>\r\n              <Row type=\"flex\" justify=\"end\">\r\n                <Tooltip\r\n                  placement=\"bottom\"\r\n                  title={<FormattedMessage id=\"button.tooltip.memberDiagram\" />}>\r\n                  <Button\r\n                    type=\"primary\"\r\n                    shape=\"circle\"\r\n                    icon=\"line-chart\"\r\n                    onClick={() => setVisible(!visible)}\r\n                  />\r\n                </Tooltip>\r\n              </Row>\r\n            </Col>\r\n          </Row>\r\n          <Table\r\n            columns={columns}\r\n            rowKey={(record) => record.member_detail.staff_code}\r\n            dataSource={joinedMembers ? joinedMembers.list : []}\r\n            loading={loading}\r\n            pagination={false}\r\n          />\r\n        </Row>\r\n        {memberDrawerVisible && (\r\n          <UpdateMemberDrawer\r\n            drawerVisible={memberDrawerVisible}\r\n            onClose={() => handleControlMemberDrawer()}\r\n            member={selectedMember}\r\n            getProject={getProject}\r\n            getJoinedMembers={getJoinedMembers}\r\n            updateMember={updateMember}\r\n            joinedMembers={joinedMembers.list}\r\n          />\r\n        )}\r\n        {drawerVisible && (\r\n          <UpdateProjectDrawer\r\n            drawerVisible={drawerVisible}\r\n            onClose={() => setDrawerVisible(!drawerVisible)}\r\n            project={project}\r\n            getCustomers={getCustomers}\r\n            updateProject={updateProject}\r\n            getProject={getProject}\r\n          />\r\n        )}\r\n      </Row>\r\n      <MemberDiagram\r\n        joinedMembers={joinedMembers}\r\n        visible={visible}\r\n        close={() => setVisible(!visible)}\r\n        project={project}\r\n      />\r\n      {openAddModal && (\r\n        <AddMemberModal\r\n          getMembers={getMembers}\r\n          getJoinedMembers={getJoinedMembers}\r\n          getProject={getProject}\r\n          joinedMembers={joinedMembers.list}\r\n          visible={openAddModal}\r\n          close={() => setOpenAddModal(!openAddModal)}\r\n          match={match}\r\n          addMember={addMember}\r\n        />\r\n      )}\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nProjectDetail.propTypes = propTypes;\r\nProjectDetail.defaultProps = defaultProps;\r\n\r\nexport default injectIntl(ProjectDetail, {});\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { FormattedMessage } from 'react-intl';\r\nimport { Button, Icon } from 'antd';\r\n\r\nconst propTypes = {\r\n  onBack: PropTypes.func.isRequired\r\n};\r\n\r\nconst BackButton = ({ onBack }) => (\r\n  <Button type=\"primary\" onClick={onBack}>\r\n    <Icon type=\"left\" />\r\n    <FormattedMessage id=\"button.back\" />\r\n  </Button>\r\n);\r\n\r\nBackButton.propTypes = propTypes;\r\n\r\nexport default BackButton;\r\n","import React, { useEffect, useCallback } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { FormattedMessage, injectIntl } from 'react-intl';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { Row, Col, Button, Icon, Popconfirm } from 'antd';\r\nimport { css } from 'emotion';\r\n\r\nimport { actions as layoutActions } from '../modules/layout/store';\r\nimport { actions as projectActions } from '../modules/project/store';\r\nimport { actions as customerActions } from '../modules/customer/store';\r\nimport { actions as memberActions } from '../modules/member/store';\r\nimport HeaderTitle from '../components/Content/HeaderTitle';\r\nimport ProjectDetail from '../modules/project/projectDetails/components/ProjectDetail';\r\nimport BackButton from '../components/Button/BackButton';\r\nimport ErrorNotification from '../components/Notification/Error';\r\nimport SuccessNotification from '../components/Notification/Success';\r\nimport WithRole from '../hocs/WithRole';\r\n\r\nconst propTypes = {\r\n  match: PropTypes.shape({}).isRequired,\r\n  history: PropTypes.shape({}).isRequired,\r\n  intl: PropTypes.shape({}).isRequired\r\n};\r\n\r\nconst styles = {\r\n  footer: css`\r\n    position: absolute !important;\r\n    bottom: 0;\r\n    left: 0;\r\n    right: 0;\r\n  `\r\n};\r\n\r\nconst ButtonRemoveProject = ({ loading, match }) => {\r\n  const dispatch = useDispatch();\r\n\r\n  return (\r\n    <Popconfirm\r\n      title={<FormattedMessage id=\"projectDetail.removeProject.confirm.remove\" />}\r\n      onConfirm={\r\n        () =>\r\n          dispatch(\r\n            projectActions.removeProject({\r\n              path: 'projects/remove',\r\n              param: match.params.id\r\n            })\r\n          )\r\n        // eslint-disable-next-line react/jsx-curly-newline\r\n      }\r\n      okText={<FormattedMessage id=\"button.confirm.yes\" />}\r\n      cancelText={<FormattedMessage id=\"button.confirm.no\" />}>\r\n      <Button style={{ marginRight: 15 }} type=\"danger\" disabled={loading}>\r\n        <Icon type={loading ? 'loading' : 'delete'} />\r\n        <FormattedMessage id=\"projectDetail.removeProject\" />\r\n      </Button>\r\n    </Popconfirm>\r\n  );\r\n};\r\n\r\nconst ProjectDetailPage = ({ match, history, intl }) => {\r\n  const dispatch = useDispatch();\r\n  const {\r\n    project,\r\n    joinedMembers,\r\n    removeProjectResult,\r\n    removeProjectError,\r\n    removeProjectErrors,\r\n    loading\r\n  } = useSelector((state) => state.projects);\r\n\r\n  const getProject = useCallback(() => {\r\n    dispatch(\r\n      projectActions.getProject({\r\n        param: match.params.id,\r\n        path: 'projects'\r\n      })\r\n    );\r\n  }, [dispatch, match.params.id]);\r\n\r\n  const getJoinedMembers = useCallback(() => {\r\n    dispatch(\r\n      projectActions.getJoinedMembers({\r\n        param: match.params.id,\r\n        path: 'projects/membersList'\r\n      })\r\n    );\r\n  }, [dispatch, match.params.id]);\r\n\r\n  const cleanError = useCallback(() => {\r\n    dispatch(projectActions.cleanError(false));\r\n  }, [dispatch]);\r\n\r\n  const removeMember = useCallback(\r\n    (data) => {\r\n      dispatch(\r\n        projectActions.removeMember({\r\n          param: data.id,\r\n          path: 'projects/membersList/remove'\r\n        })\r\n      );\r\n    },\r\n    [dispatch]\r\n  );\r\n\r\n  const getCustomers = useCallback(() => {\r\n    dispatch(\r\n      customerActions.getCustomers({\r\n        path: 'customers'\r\n      })\r\n    );\r\n  }, [dispatch]);\r\n\r\n  const updateProject = useCallback(\r\n    (body) => {\r\n      dispatch(projectActions.updateProject({ body, path: 'projects', param: project.id }));\r\n    },\r\n    [dispatch, project]\r\n  );\r\n\r\n  const addMember = useCallback(\r\n    (body) => {\r\n      dispatch(projectActions.addMember({ body, path: 'projects/membersList' }));\r\n    },\r\n    [dispatch]\r\n  );\r\n  const getMembers = useCallback(() => {\r\n    dispatch(\r\n      memberActions.getMembers({\r\n        path: 'members'\r\n      })\r\n    );\r\n  }, [dispatch]);\r\n  const updateMember = useCallback(\r\n    (body, member) => {\r\n      dispatch(\r\n        projectActions.updateMember({\r\n          body,\r\n          path: 'projects/membersList',\r\n          param: member.id\r\n        })\r\n      );\r\n    },\r\n    [dispatch]\r\n  );\r\n\r\n  useEffect(() => {\r\n    dispatch(layoutActions.selectItem(['project']));\r\n    // clean state\r\n    // clean old joined members state\r\n    dispatch(projectActions.getJoinedMembersCleanData());\r\n    // clean old project detail state\r\n    dispatch(projectActions.getProjectCleanData());\r\n    // get project detail\r\n    dispatch(\r\n      projectActions.getProject({\r\n        param: match.params.id,\r\n        path: 'projects'\r\n      })\r\n    );\r\n    // get joined members\r\n    dispatch(\r\n      projectActions.getJoinedMembers({\r\n        param: match.params.id,\r\n        path: 'projects/membersList'\r\n      })\r\n    );\r\n  }, [dispatch, match.params.id]);\r\n\r\n  // check authencation if not redirect to login page\r\n\r\n  // show notification after remove project\r\n  useEffect(() => {\r\n    if (removeProjectResult) {\r\n      const title = intl.formatMessage({ id: 'notification.success' });\r\n      const message = intl.formatMessage({ id: removeProjectResult.message });\r\n      SuccessNotification(title, message);\r\n\r\n      dispatch(projectActions.removeProjectCleanData());\r\n      history.push('/project/list');\r\n    }\r\n  }, [dispatch, history, intl, removeProjectResult]);\r\n\r\n  useEffect(() => {\r\n    if (removeProjectError) {\r\n      const title = intl.formatMessage({ id: 'notification.error' });\r\n      const message = intl.formatMessage({\r\n        id: removeProjectErrors.message\r\n          ? removeProjectErrors.message\r\n          : 'projects.removeProject.message.error'\r\n      });\r\n      ErrorNotification(title, message);\r\n      dispatch(projectActions.removeProjectCleanError());\r\n    }\r\n  }, [dispatch, intl, removeProjectError, removeProjectErrors]);\r\n\r\n  // redirect functions\r\n  const onBack = () => {\r\n    window.history.back()\r\n  };\r\n\r\n  const toMemberHistory = () => {\r\n    history.push(`/project/memberHistory/${match.params.id}`);\r\n  };\r\n\r\n  return (\r\n    <Row>\r\n      <Row>\r\n        <HeaderTitle title={<FormattedMessage id=\"projects.detail.title\" />} />\r\n      </Row>\r\n      <Row>\r\n        <ProjectDetail\r\n          getProject={getProject}\r\n          getJoinedMembers={getJoinedMembers}\r\n          cleanError={cleanError}\r\n          removeMember={removeMember}\r\n          getCustomers={getCustomers}\r\n          updateProject={updateProject}\r\n          project={project}\r\n          joinedMembers={joinedMembers}\r\n          loading={loading}\r\n          match={match}\r\n          addMember={addMember}\r\n          getMembers={getMembers}\r\n          updateMember={updateMember}\r\n        />\r\n      </Row>\r\n      <Row className={styles.footer}>\r\n        <Col span={12}>\r\n          <BackButton onBack={() => onBack()} />\r\n        </Col>\r\n        <Col span={12}>\r\n          <Row type=\"flex\" justify=\"end\">\r\n            <WithRole\r\n              type={['admin']}\r\n              component={ButtonRemoveProject}\r\n              match={match}\r\n              loading={loading}\r\n            />\r\n\r\n            <Button type=\"primary\" onClick={() => toMemberHistory()}>\r\n              <Icon type=\"history\" />\r\n              <FormattedMessage id=\"projects.detail.memberHistory\" />\r\n            </Button>\r\n          </Row>\r\n        </Col>\r\n      </Row>\r\n    </Row>\r\n  );\r\n};\r\n\r\nProjectDetailPage.propTypes = propTypes;\r\n\r\nexport default injectIntl(ProjectDetailPage, {});\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport moment from 'moment';\r\nimport { FormattedMessage } from 'react-intl';\r\n\r\nimport { Table, Tag } from 'antd';\r\n\r\nconst propTypes = {};\r\n\r\nconst defaultProps = {};\r\n\r\nconst TableMemberHistory = () => {\r\n  const { members, loading } = useSelector((state) => state.projects);\r\n  const columns = [\r\n    {\r\n      title: <FormattedMessage id=\"projects.detail.member.staff_code\" />,\r\n      dataIndex: 'member_detail',\r\n      key: 'staff_code',\r\n      render: (memberDetail) => memberDetail.staff_code\r\n    },\r\n    {\r\n      title: <FormattedMessage id=\"projects.detail.member.name\" />,\r\n      dataIndex: 'member_detail',\r\n      key: 'fullname',\r\n      render: (memberDetail) => memberDetail.full_name\r\n    },\r\n    {\r\n      title: <FormattedMessage id=\"projects.detail.member.role\" />,\r\n      dataIndex: 'role',\r\n      key: 'role'\r\n    },\r\n    {\r\n      title: <FormattedMessage id=\"projects.detail.member.effort\" />,\r\n      dataIndex: 'effort',\r\n      key: 'effort'\r\n    },\r\n    {\r\n      title: <FormattedMessage id=\"projects.detail.member.time_in\" />,\r\n      dataIndex: 'time_in',\r\n      key: 'time_in',\r\n      render: (date) => {\r\n        return moment(parseInt(date, 10)).format('DD/MM/YYYY');\r\n      }\r\n    },\r\n    {\r\n      title: <FormattedMessage id=\"projects.detail.member.time_out\" />,\r\n      dataIndex: 'time_out',\r\n      key: 'time_out',\r\n      render: (date) => {\r\n        if (!date) {\r\n          return null;\r\n        }\r\n        return moment(parseInt(date, 10)).format('DD/MM/YYYY');\r\n      }\r\n    },\r\n    {\r\n      title: <FormattedMessage id=\"projects.detail.member.status\" />,\r\n      dataIndex: 'member_status',\r\n      key: 'member_status',\r\n      render: (status) => {\r\n        switch (status) {\r\n          case 'working':\r\n            return (\r\n              <Tag color=\"#87d068\">\r\n                <FormattedMessage id=\"projects.addMember.status.working\" />\r\n              </Tag>\r\n            );\r\n          case 'leave':\r\n            return (\r\n              <Tag color=\"#f5222D\">\r\n                <FormattedMessage id=\"projects.addMember.status.leave\" />\r\n              </Tag>\r\n            );\r\n          case 'idle':\r\n            return (\r\n              <Tag color=\"#ffe58f\">\r\n                <FormattedMessage id=\"projects.addMember.status.idle\" />\r\n              </Tag>\r\n            );\r\n          default:\r\n            return null;\r\n        }\r\n      }\r\n    }\r\n  ];\r\n\r\n  return (\r\n    <Table\r\n      rowKey={(record) => record.id}\r\n      pagination={false}\r\n      columns={columns}\r\n      dataSource={members || []}\r\n      loading={loading}\r\n    />\r\n  );\r\n};\r\n\r\nTableMemberHistory.propTypes = propTypes;\r\nTableMemberHistory.defaultProps = defaultProps;\r\n\r\nexport default TableMemberHistory;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport moment from 'moment';\r\nimport { css } from 'emotion';\r\nimport { injectIntl } from 'react-intl';\r\nimport { Row, DatePicker } from 'antd';\r\n\r\nimport { actions as projectActions } from '../../store';\r\nimport TableMemberHistory from './TableMemberHistory';\r\nimport ErrorNotification from '../../../../components/Notification/Error';\r\n\r\nconst propTypes = {\r\n  match: PropTypes.shape({}).isRequired,\r\n  intl: PropTypes.shape({}).isRequired,\r\n\r\n  getMemberHistory: PropTypes.func.isRequired\r\n};\r\n\r\nconst defaultProps = {};\r\n\r\nconst styles = {\r\n  datePicker: css`\r\n    margin-bottom: 24px;\r\n  `\r\n};\r\n\r\nconst ProjectMemberHistory = ({ intl, getMemberHistory }) => {\r\n  const dispatch = useDispatch();\r\n  const [dateRange, setDateRange] = useState([moment().startOf('year'), moment().endOf('year')]);\r\n  const { getMemberHistoryError, getMemberHistoryErrors } = useSelector((state) => state.projects);\r\n\r\n  // First call members list api\r\n  useEffect(() => {\r\n    const body = {\r\n      time_in: parseInt(\r\n        moment()\r\n          .startOf('year')\r\n          .format('x'),\r\n        10\r\n      ),\r\n      time_out: parseInt(\r\n        moment()\r\n          .endOf('year')\r\n          .format('x'),\r\n        10\r\n      )\r\n    };\r\n\r\n    getMemberHistory && getMemberHistory(body);\r\n  }, [getMemberHistory]);\r\n\r\n  // Handle if api call failure\r\n  useEffect(() => {\r\n    if (getMemberHistoryError) {\r\n      const title = intl.formatMessage({ id: 'notification.error' });\r\n      const message = intl.formatMessage({\r\n        id: getMemberHistoryErrors.message\r\n          ? getMemberHistoryErrors.message\r\n          : 'projects.memberHistory.message.error'\r\n      });\r\n      ErrorNotification(title, message);\r\n      dispatch(projectActions.getMemberHistoryCleanError());\r\n    }\r\n  }, [dispatch, getMemberHistoryError, getMemberHistoryErrors, intl]);\r\n\r\n  const handleChange = (value) => {\r\n    setDateRange(value);\r\n    const body = {\r\n      time_in: parseInt(moment(value[0]).format('x'), 10),\r\n      time_out: parseInt(moment(value[1]).format('x'), 10)\r\n    };\r\n    getMemberHistory && getMemberHistory(body);\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Row style={{ marginBottom: 75 }}>\r\n        <Row className={styles.datePicker}>\r\n          <DatePicker.RangePicker\r\n            value={dateRange}\r\n            format=\"DD/MM/YYYY\"\r\n            onChange={handleChange}\r\n            allowClear={false}\r\n          />\r\n        </Row>\r\n        <Row>\r\n          <TableMemberHistory />\r\n        </Row>\r\n      </Row>\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nProjectMemberHistory.propTypes = propTypes;\r\n\r\nProjectMemberHistory.defaultProps = defaultProps;\r\n\r\nexport default injectIntl(ProjectMemberHistory, {});\r\n","import React, { useEffect, useCallback } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { FormattedMessage } from 'react-intl';\r\nimport { css } from 'emotion';\r\n\r\nimport { Row, Col } from 'antd';\r\n\r\nimport { actions as layoutActions } from '../modules/layout/store';\r\nimport { actions as projectActions } from '../modules/project/store';\r\nimport HeaderTitle from '../components/Content/HeaderTitle';\r\nimport ProjectMemberHistory from '../modules/project/projectMemberHistory/components/ProjectMemberHistory';\r\nimport BackButton from '../components/Button/BackButton';\r\n\r\nconst propTypes = {\r\n  match: PropTypes.shape({}).isRequired,\r\n  history: PropTypes.shape({}).isRequired\r\n};\r\n\r\nconst styles = {\r\n  footer: css`\r\n    position: absolute !important;\r\n    bottom: 0;\r\n    left: 0;\r\n    right: 0;\r\n  `\r\n};\r\n\r\nconst ProjectMemberHistoryPage = ({ match, history }) => {\r\n  const dispatch = useDispatch();\r\n  useEffect(() => {\r\n    dispatch(layoutActions.selectItem(['project']));\r\n  }, [dispatch]);\r\n\r\n  const getMemberHistory = useCallback(\r\n    (body) => {\r\n      dispatch(\r\n        projectActions.getMemberHistory({\r\n          body,\r\n          path: 'projects/membersList',\r\n          param: match.params.id\r\n        })\r\n      );\r\n    },\r\n    [dispatch, match.params.id]\r\n  );\r\n\r\n  const onBack = () => {\r\n    history.push(`/project/detail/${match.params.id}`);\r\n  };\r\n\r\n  return (\r\n    <Row>\r\n      <Row>\r\n        <HeaderTitle title={<FormattedMessage id=\"projects.memberHistory.title\" />} />\r\n      </Row>\r\n      <Row>\r\n        <ProjectMemberHistory match={match} getMemberHistory={getMemberHistory} />\r\n      </Row>\r\n      <Row className={styles.footer}>\r\n        <Col span={12}>\r\n          <BackButton onBack={() => onBack()} />\r\n        </Col>\r\n      </Row>\r\n    </Row>\r\n  );\r\n};\r\n\r\nProjectMemberHistoryPage.propTypes = propTypes;\r\n\r\nexport default ProjectMemberHistoryPage;\r\n","import React, { useEffect } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { Icon } from 'antd';\r\n\r\nimport '../assets/styles/login.scss';\r\nimport { dispatchHideLayout } from '../actions/layout';\r\n\r\nconst LoginPage = (props) => {\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    dispatchHideLayout(dispatch);\r\n  }, [dispatch]);\r\n\r\n  const redirectLoginGoogle = () => {\r\n    window.location.href = process.env.REACT_APP_AUTH;\r\n  };\r\n\r\n  return (\r\n    <div className=\"wrap-login-page\">\r\n      <div className=\"wrap-form-login\">\r\n        <h2>ng Nhp</h2>\r\n        <div className=\"shadow-line-login\"></div>\r\n        <div className=\"button-login-google\" onClick={redirectLoginGoogle}>\r\n          <i style={{ fontSize: 16 }}>ng nhp bng google nh</i>\r\n          <div className=\"border-between-button-login\"></div>\r\n          <Icon style={{ fontSize: 30, color: '#fff', marginLeft: 5 }} type=\"google-plus\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginPage;\r\n","const searchColumn = (currValue, column) => {\r\n  return column\r\n    .replace(/\\s/g, '')\r\n    .normalize('NFD')\r\n    .replace(/[\\u0300-\\u036f]/g, '')\r\n    .replace(//g, 'd')\r\n    .replace(//g, 'D')\r\n    .toLowerCase()\r\n    .includes(\r\n      currValue\r\n        .replace(/\\s/g, '')\r\n        .toLowerCase()\r\n        .normalize('NFD')\r\n        .replace(/[\\u0300-\\u036f]/g, '')\r\n        .replace(//g, 'd')\r\n        .replace(//g, 'D')\r\n    );\r\n};\r\n\r\nexport default searchColumn;\r\n","import React, { useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { FormattedMessage, injectIntl } from 'react-intl';\r\nimport { Row, Button, Input, Form, Popconfirm, Drawer, Typography, Icon } from 'antd';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { css } from 'emotion';\r\nimport { formShape } from 'rc-form';\r\n\r\nimport ErrorNotification from '../../../../components/Notification/Error';\r\nimport SuccessNotification from '../../../../components/Notification/Success';\r\n\r\nimport { actions as memberActions } from '../../store';\r\n\r\nconst propTypes = {\r\n  intl: PropTypes.shape({}).isRequired,\r\n  close: PropTypes.func.isRequired,\r\n  form: formShape.isRequired,\r\n  data: PropTypes.shape({}),\r\n\r\n  updateMember: PropTypes.func.isRequired,\r\n  getMembers: PropTypes.func.isRequired\r\n};\r\n\r\nconst defaultProps = {\r\n  data: {}\r\n};\r\n\r\nconst styles = {\r\n  modal: css``,\r\n  drawerFooter: css`\r\n    position: absolute;\r\n    bottom: 0;\r\n    right: 24px;\r\n    left: 24px;\r\n    padding: 24px 0px;\r\n  `\r\n};\r\n\r\nconst formItemLayout = {\r\n  labelCol: {\r\n    span: 5\r\n  },\r\n  wrapperCol: {\r\n    span: 19\r\n  }\r\n};\r\n\r\nconst EditMember = ({ intl, visible, close, form, data, updateMember, getMembers }) => {\r\n  const dispatch = useDispatch();\r\n  const { updateMemberResult, updateMemberError, updateMemberErrors } = useSelector(\r\n    (state) => state.members\r\n  );\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      dispatch(memberActions.updateMemberCleanError(false));\r\n      dispatch(memberActions.updateMemberCleanData());\r\n    };\r\n  }, [dispatch]);\r\n\r\n  useEffect(() => {\r\n    if (updateMemberResult) {\r\n      // show success notification\r\n      const title = intl.formatMessage({ id: 'notification.success' });\r\n      const message = intl.formatMessage({ id: updateMemberResult.message });\r\n      SuccessNotification(title, message);\r\n      // close the modal and clean data\r\n      close();\r\n      // re-call get members list\r\n      getMembers && getMembers();\r\n    }\r\n  }, [updateMemberResult, close, intl, getMembers]);\r\n\r\n  useEffect(() => {\r\n    if (updateMemberError) {\r\n      // show error notification\r\n      const title = intl.formatMessage({ id: 'notification.error' });\r\n      const message = intl.formatMessage({\r\n        id: updateMemberErrors.message\r\n          ? updateMemberErrors.message\r\n          : 'projects.updateProject.message.error'\r\n      });\r\n      ErrorNotification(title, message);\r\n      // clean error\r\n      dispatch(memberActions.updateMemberCleanError(false));\r\n    }\r\n  }, [intl, updateMemberError, updateMemberErrors, dispatch]);\r\n\r\n  const handleSubmit = () => {\r\n    form.validateFields((err, values) => {\r\n      if (!err) {\r\n        const body = {\r\n          staff_code: values.staff_code,\r\n          full_name: values.full_name,\r\n          phone_number: values.phone_number,\r\n          email: values.email\r\n        };\r\n        const oldBody = {\r\n          staff_code: data.staff_code,\r\n          full_name: data.full_name,\r\n          phone_number: data.phone_number,\r\n          email: data.email\r\n        };\r\n        if (JSON.stringify(body) === JSON.stringify(oldBody)) {\r\n          const title = intl.formatMessage({ id: 'notification.error' });\r\n          const message = intl.formatMessage({ id: 'notification.message.form.noChanging' });\r\n          return ErrorNotification(title, message);\r\n        }\r\n        updateMember && updateMember(body);\r\n      } else {\r\n        const title = intl.formatMessage({ id: 'notification.error' });\r\n        const message = intl.formatMessage({ id: 'notification.message.form.error' });\r\n        ErrorNotification(title, message);\r\n      }\r\n      return null;\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Drawer\r\n      title={<FormattedMessage id=\"members.memberModal.headerEditMember.title\" />}\r\n      visible={visible}\r\n      width={550}\r\n      className={styles.modal}\r\n      onClose={close}\r\n      maskClosable={false}>\r\n      <Form onSubmit={() => handleSubmit()} {...formItemLayout}>\r\n        <Row style={{ marginBottom: 10 }}>\r\n          <Icon type=\"user\" style={{ marginRight: 10 }} />\r\n          <Typography.Text style={{ fontWeight: 'bold' }}>\r\n            {<FormattedMessage id=\"members.createMembers.memberInformation\" />}\r\n          </Typography.Text>\r\n        </Row>\r\n        <Form.Item\r\n          style={{ display: 'flex' }}\r\n          label={<FormattedMessage id=\"members.memberModal.form.memberStaffcode.title\" />}\r\n          validateStatus={form.getFieldError('staff_code') ? 'error' : 'validating'}>\r\n          {form.getFieldDecorator('staff_code', {\r\n            initialValue: data.staff_code,\r\n            rules: [\r\n              {\r\n                required: true,\r\n                message: <FormattedMessage id=\"members.memberModal.form.memberStaffcode.validate\" />\r\n              }\r\n            ]\r\n          })(<Input />)}\r\n        </Form.Item>\r\n        <Form.Item\r\n          style={{ display: 'flex' }}\r\n          label={<FormattedMessage id=\"members.memberModal.form.memberFullname.title\" />}\r\n          validateStatus={form.getFieldError('full_name') ? 'error' : 'validating'}>\r\n          {form.getFieldDecorator('full_name', {\r\n            initialValue: data.full_name,\r\n\r\n            rules: [\r\n              {\r\n                required: true,\r\n                message: <FormattedMessage id=\"members.memberModal.form.memberFullNname.validate\" />\r\n              }\r\n            ]\r\n          })(<Input />)}\r\n        </Form.Item>\r\n        <Form.Item\r\n          style={{ display: 'flex' }}\r\n          label={<FormattedMessage id=\"members.memberModal.form.memberPhonenumber.title\" />}\r\n          validateStatus={form.getFieldError('phone_number') ? 'error' : 'validating'}>\r\n          {form.getFieldDecorator('phone_number', {\r\n            initialValue: data.phone_number,\r\n\r\n            rules: [\r\n              {\r\n                required: true,\r\n                message: (\r\n                  <FormattedMessage id=\"members.memberModal.form.memberPhonenumber.validate\" />\r\n                )\r\n              }\r\n            ]\r\n          })(<Input />)}\r\n        </Form.Item>\r\n        <Form.Item\r\n          style={{ display: 'flex' }}\r\n          label={<FormattedMessage id=\"members.memberModal.form.memberEmail.title\" />}\r\n          validateStatus={form.getFieldError('email') ? 'error' : 'validating'}>\r\n          {form.getFieldDecorator('email', {\r\n            initialValue: data.email,\r\n\r\n            rules: [\r\n              {\r\n                type: 'email',\r\n                message: (\r\n                  <FormattedMessage id=\"members.memberModal.form.memberEmail.validate.type\" />\r\n                )\r\n              },\r\n              {\r\n                required: true,\r\n                message: <FormattedMessage id=\"members.memberModal.form.memberEmail.validate\" />\r\n              }\r\n            ]\r\n          })(<Input />)}\r\n        </Form.Item>\r\n      </Form>\r\n      <Row type=\"flex\" justify=\"end\" className={styles.drawerFooter}>\r\n        <Popconfirm\r\n          title={<FormattedMessage id=\"members.memberModal.confirm.edit\" />}\r\n          onConfirm={() => handleSubmit()}\r\n          okText={<FormattedMessage id=\"members.memberModal.button.confirm.yes\" />}\r\n          cancelText={<FormattedMessage id=\"members.memberModal.button.confirm.no\" />}>\r\n          <Button icon=\"edit\" type=\"primary\">\r\n            <FormattedMessage id=\"members.memberModal.editButton.title\" />\r\n          </Button>\r\n        </Popconfirm>\r\n        <Button icon=\"close-circle\" type=\"default\" key=\"close\" onClick={() => close()}>\r\n          <FormattedMessage id=\"members.memberModal.cancelButton.title\" />\r\n        </Button>\r\n      </Row>\r\n    </Drawer>\r\n  );\r\n};\r\n\r\nEditMember.propTypes = propTypes;\r\n\r\nEditMember.defaultProps = defaultProps;\r\n\r\nconst EditMemberForm = Form.create({ name: 'editMember' })(EditMember);\r\n\r\nexport default injectIntl(EditMemberForm, {});\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { FormattedMessage, injectIntl } from 'react-intl';\r\nimport { Table, Tooltip, Popconfirm, Button } from 'antd';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport EditMember from '../../editMember/components/EditMember';\r\nimport SuccessNotification from '../../../../components/Notification/Success';\r\nimport ErrorNotification from '../../../../components/Notification/Error';\r\nimport WithRole from '../../../../hocs/WithRole';\r\n\r\nimport { actions as memberActions } from '../../store';\r\n\r\nconst propTypes = {\r\n  intl: PropTypes.shape({}).isRequired,\r\n  members: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\r\n\r\n  getMembers: PropTypes.func.isRequired,\r\n  updateMember: PropTypes.func.isRequired,\r\n  removeMember: PropTypes.func.isRequired\r\n};\r\n\r\nconst defaultProps = {};\r\nconst ButtonEditMember = ({ handleEditSelected, record }) => {\r\n  return (\r\n    <Button\r\n      onClick={() => {\r\n        handleEditSelected(record);\r\n      }}\r\n      shape=\"circle\"\r\n      icon=\"edit\"\r\n      type=\"primary\"\r\n      style={{ margin: '0px 5px' }}\r\n    />\r\n  );\r\n};\r\n\r\nconst ButtonDeleteMember = ({ removeMember, record }) => {\r\n  return (\r\n    <Popconfirm\r\n      title={<FormattedMessage id=\"members.confirm.delete\" />}\r\n      onConfirm={() => removeMember && removeMember(record)}\r\n      okText={<FormattedMessage id=\"members.button.confirm.yes\" />}\r\n      cancelText={<FormattedMessage id=\"members.button.confirm.no\" />}>\r\n      <Button shape=\"circle\" icon=\"delete\" type=\"danger\" style={{ margin: '0px 5px' }} />\r\n    </Popconfirm>\r\n  );\r\n};\r\nconst Members = ({ intl, members, getMembers, updateMember, removeMember }) => {\r\n  const dispatch = useDispatch();\r\n  const [drawerVisible, setDrawerVisible] = useState(false);\r\n  const [dataItem, setDataItem] = useState({});\r\n  const { removeMemberResult, removeMemberError, removeMemberErrors, loading } = useSelector(\r\n    (state) => state.members\r\n  );\r\n\r\n  const handleEditSelected = (data) => {\r\n    data && setDataItem(data);\r\n    setDrawerVisible(!drawerVisible);\r\n  };\r\n  const columns = [\r\n    {\r\n      title: <FormattedMessage id=\"members.memberTable.staffCode.title\" />,\r\n      dataIndex: 'staff_code',\r\n      key: 'staff_code'\r\n    },\r\n    {\r\n      title: <FormattedMessage id=\"members.memberTable.name.title\" />,\r\n      dataIndex: 'full_name',\r\n      key: 'full_name'\r\n    },\r\n    {\r\n      title: <FormattedMessage id=\"members.memberTable.phoneNumber.title\" />,\r\n      dataIndex: 'phone_number',\r\n      key: 'phone_number'\r\n    },\r\n    {\r\n      title: <FormattedMessage id=\"members.memberTable.email.title\" />,\r\n      dataIndex: 'email',\r\n      key: 'email'\r\n    },\r\n    {\r\n      title: '',\r\n      dataIndex: '',\r\n      key: 'x',\r\n      align: 'right',\r\n      render: (record) => (\r\n        <React.Fragment>\r\n          <Tooltip\r\n            placement=\"top\"\r\n            title={<FormattedMessage id=\"members.memberTable.buttonDelete.title\" />}>\r\n            <WithRole\r\n              type={['admin']}\r\n              component={ButtonDeleteMember}\r\n              removeMember={removeMember}\r\n              record={record}\r\n            />\r\n          </Tooltip>\r\n          <Tooltip\r\n            placement=\"top\"\r\n            title={<FormattedMessage id=\"members.memberTable.buttonEdit.title\" />}>\r\n            <WithRole\r\n              type={['admin']}\r\n              component={ButtonEditMember}\r\n              handleEditSelected={handleEditSelected}\r\n              record={record}\r\n            />\r\n          </Tooltip>\r\n        </React.Fragment>\r\n      )\r\n    }\r\n  ];\r\n\r\n  useEffect(() => {\r\n    if (removeMemberResult) {\r\n      // show success notification\r\n      const title = intl.formatMessage({ id: 'notification.success' });\r\n      const message = intl.formatMessage({ id: removeMemberResult.message });\r\n      SuccessNotification(title, message);\r\n      // clean data\r\n      dispatch(memberActions.removeMemberCleanData());\r\n      // re-call get Members list\r\n      getMembers && getMembers();\r\n    }\r\n  }, [removeMemberResult, intl, getMembers, dispatch]);\r\n\r\n  useEffect(() => {\r\n    if (removeMemberError) {\r\n      // show error notification\r\n      const title = intl.formatMessage({ id: 'notification.error' });\r\n      const message = intl.formatMessage({\r\n        id: removeMemberErrors.message\r\n          ? removeMemberErrors.message\r\n          : 'members.removeMember.message.error'\r\n      });\r\n      ErrorNotification(title, message);\r\n      // clean error\r\n      dispatch(memberActions.removeMemberCleanError(false));\r\n    }\r\n  }, [intl, removeMemberError, removeMemberErrors, dispatch]);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Table\r\n        columns={columns}\r\n        rowKey={(record, index) => index}\r\n        dataSource={members}\r\n        loading={loading}\r\n      />\r\n      {drawerVisible && (\r\n        <EditMember\r\n          visible={drawerVisible}\r\n          updateMember={updateMember}\r\n          getMembers={getMembers}\r\n          close={() => handleEditSelected()}\r\n          data={dataItem}\r\n        />\r\n      )}\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nMembers.propTypes = propTypes;\r\nMembers.defaultProps = defaultProps;\r\n\r\nexport default injectIntl(Members, {});\r\n","export default {\r\n  keyboard: false,\r\n  maskClosable: false,\r\n  closable: false\r\n};\r\n","import React, { useEffect } from 'react';\r\nimport { formShape } from 'rc-form';\r\nimport PropTypes from 'prop-types';\r\nimport { FormattedMessage, injectIntl } from 'react-intl';\r\nimport { Row, Modal, Button, Input, Form, notification, Icon, Popconfirm, Typography } from 'antd';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { css } from 'emotion';\r\n\r\nimport { actions as memberActions } from '../../store';\r\nimport ErrorNotification from '../../../../components/Notification/Error';\r\nimport SuccessNotification from '../../../../components/Notification/Success';\r\nimport modalConfig from '../../../../utils/modal.config';\r\n\r\nconst propTypes = {\r\n  visible: PropTypes.bool.isRequired,\r\n  close: PropTypes.func.isRequired,\r\n  form: formShape.isRequired,\r\n\r\n  listStatus: PropTypes.arrayOf(PropTypes.shape({})),\r\n  listMember: PropTypes.arrayOf(PropTypes.shape({})),\r\n  selectedMember: PropTypes.shape({}),\r\n\r\n  getMembers: PropTypes.func.isRequired,\r\n  createMember: PropTypes.func.isRequired\r\n};\r\n\r\nconst defaultProps = [];\r\n\r\nconst styles = {\r\n  modal: css``\r\n};\r\n\r\nconst formItemLayout = {\r\n  labelCol: {\r\n    span: 7\r\n  },\r\n  wrapperCol: {\r\n    span: 17\r\n  }\r\n};\r\n\r\nconst CreateMember = ({ visible, close, form, intl, getMembers, createMember }) => {\r\n  const dispatch = useDispatch();\r\n  const { createMemberResult, createMemberError, createMemberErrors, loading } = useSelector(\r\n    (state) => state.members\r\n  );\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      dispatch(memberActions.createMemberCleanError(false));\r\n      dispatch(memberActions.createMemberCleanData());\r\n    };\r\n  }, [dispatch]);\r\n\r\n  useEffect(() => {\r\n    // show success notification\r\n    if (createMemberResult) {\r\n      const title = intl.formatMessage({ id: 'notification.success' });\r\n      const message = intl.formatMessage({ id: createMemberResult.message });\r\n      SuccessNotification(title, message);\r\n      // close the modal and clean data\r\n      close();\r\n      // re-call get all customers api\r\n      getMembers && getMembers();\r\n    }\r\n  }, [createMemberResult, intl, getMembers, close]);\r\n\r\n  useEffect(() => {\r\n    // show error notification\r\n    if (createMemberError) {\r\n      const title = intl.formatMessage({ id: 'notification.error' });\r\n      const message = intl.formatMessage({\r\n        id: 'projects.createProject.message.error'\r\n      });\r\n      ErrorNotification(title, message);\r\n      // clean error\r\n      dispatch(memberActions.createMemberCleanError());\r\n    }\r\n  }, [createMemberError, createMemberErrors, dispatch, intl]);\r\n\r\n  const handleSubmit = () => {\r\n    form.validateFields((err, values) => {\r\n      if (!err) {\r\n        const body = {\r\n          staff_code: values.staff_code,\r\n          full_name: values.full_name,\r\n          phone_number: values.phone_number,\r\n          email: values.email\r\n        };\r\n        createMember && createMember(body);\r\n      } else {\r\n        notification.open({\r\n          message: (\r\n            <span style={{ color: '#f5222d', fontWeight: 'bold' }}>\r\n              {intl.formatMessage({ id: 'notification.error' })}\r\n            </span>\r\n          ),\r\n          description: intl.formatMessage({ id: 'notification.message.form.error' }),\r\n          duration: 2,\r\n          icon: <Icon type=\"frown\" style={{ color: '#f5222d' }} />\r\n        });\r\n      }\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Modal\r\n      title={<FormattedMessage id=\"members.memberModal.headerCreateMember.title\" />}\r\n      cancelText=\"Close\"\r\n      visible={visible}\r\n      width=\"40vw\"\r\n      className={styles.modal}\r\n      onCancel={() => close()}\r\n      maskClosable={false}\r\n      footer={[\r\n        <Row type=\"flex\" key=\"abc\" justify=\"end\">\r\n          <Popconfirm\r\n            title={<FormattedMessage id=\"members.memberModal.confirm.create\" />}\r\n            onConfirm={() => handleSubmit()}\r\n            okText={<FormattedMessage id=\"members.memberModal.button.confirm.yes\" />}\r\n            cancelText={<FormattedMessage id=\"members.memberModal.button.confirm.no\" />}>\r\n            <Button icon=\"plus\" type=\"primary\" loading={loading}>\r\n              <FormattedMessage id=\"members.memberModal.createButton.title\" />\r\n            </Button>\r\n          </Popconfirm>\r\n          <Button icon=\"close-circle\" type=\"default\" key=\"close\" onClick={() => close()}>\r\n            <FormattedMessage id=\"members.memberModal.cancelButton.title\" />\r\n          </Button>\r\n        </Row>\r\n      ]}\r\n      {...modalConfig}>\r\n      <Form onSubmit={() => handleSubmit()} {...formItemLayout}>\r\n        <Row style={{ marginBottom: 10 }}>\r\n          <Icon type=\"user\" style={{ marginRight: 10 }} />\r\n          <Typography.Text style={{ fontWeight: 'bold' }}>\r\n            {<FormattedMessage id=\"members.createMembers.memberInformation\" />}\r\n          </Typography.Text>\r\n        </Row>\r\n        <Form.Item\r\n          style={{ display: 'flex' }}\r\n          label={<FormattedMessage id=\"members.memberModal.form.memberStaffcode.title\" />}\r\n          validateStatus={form.getFieldError('staff_code') ? 'error' : 'validating'}>\r\n          {form.getFieldDecorator('staff_code', {\r\n            rules: [\r\n              {\r\n                required: true,\r\n                message: <FormattedMessage id=\"members.memberModal.form.memberStaffcode.validate\" />\r\n              }\r\n            ]\r\n          })(<Input />)}\r\n        </Form.Item>\r\n        <Form.Item\r\n          style={{ display: 'flex' }}\r\n          label={<FormattedMessage id=\"members.memberModal.form.memberFullname.title\" />}\r\n          validateStatus={form.getFieldError('full_name') ? 'error' : 'validating'}>\r\n          {form.getFieldDecorator('full_name', {\r\n            rules: [\r\n              {\r\n                required: true,\r\n                message: <FormattedMessage id=\"members.memberModal.form.memberFullNname.validate\" />\r\n              }\r\n            ]\r\n          })(<Input />)}\r\n        </Form.Item>\r\n        <Form.Item\r\n          style={{ display: 'flex' }}\r\n          label={<FormattedMessage id=\"members.memberModal.form.memberPhonenumber.title\" />}\r\n          validateStatus={form.getFieldError('phone_number') ? 'error' : 'validating'}>\r\n          {form.getFieldDecorator('phone_number', {\r\n            rules: [\r\n              {\r\n                required: true,\r\n                message: (\r\n                  <FormattedMessage id=\"members.memberModal.form.memberPhonenumber.validate\" />\r\n                )\r\n              }\r\n            ]\r\n          })(<Input />)}\r\n        </Form.Item>\r\n        <Form.Item\r\n          style={{ display: 'flex' }}\r\n          label={<FormattedMessage id=\"members.memberModal.form.memberEmail.title\" />}\r\n          validateStatus={form.getFieldError('email') ? 'error' : 'validating'}>\r\n          {form.getFieldDecorator('email', {\r\n            rules: [\r\n              {\r\n                type: 'email',\r\n                message: (\r\n                  <FormattedMessage id=\"members.memberModal.form.memberEmail.validate.type\" />\r\n                )\r\n              },\r\n              {\r\n                required: true,\r\n                message: <FormattedMessage id=\"members.memberModal.form.memberEmail.validate\" />\r\n              }\r\n            ]\r\n          })(<Input />)}\r\n        </Form.Item>\r\n      </Form>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nCreateMember.propTypes = propTypes;\r\n\r\nCreateMember.defaultProps = defaultProps;\r\n\r\nconst CreateMemberForm = Form.create({ name: 'createMember' })(CreateMember);\r\n\r\nexport default injectIntl(CreateMemberForm, {});\r\n","import React, { useState, useEffect, useCallback } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Row, Col, Input } from 'antd';\r\nimport { FormattedMessage, injectIntl } from 'react-intl';\r\n\r\nimport { actions as layoutActions } from '../modules/layout/store';\r\nimport { actions as memberActions } from '../modules/member/store';\r\nimport searchColumn from '../utils/searchColumn';\r\nimport HeaderTitle from '../components/Content/HeaderTitle';\r\nimport ErrorNotification from '../components/Notification/Error';\r\nimport Members from '../modules/member/listMember/components/Members';\r\nimport CreateMember from '../modules/member/createMember/components/CreateMember';\r\n\r\nconst propTypes = {\r\n  history: PropTypes.shape({}).isRequired,\r\n  intl: PropTypes.shape({}).isRequired\r\n};\r\n\r\nconst defaultProps = {};\r\n\r\nconst ListMemberPage = ({ history, intl }) => {\r\n  const dispatch = useDispatch();\r\n  const [openCreateModal, setOpenCreateModal] = useState(false);\r\n  const [searchInput, setSearchInput] = useState('');\r\n  const { list, getMembersError, getMembersErrors } = useSelector((state) => state.members);\r\n  const [filteredData, setFilteredData] = useState([]);  \r\n\r\n  useEffect(() => {\r\n    dispatch(layoutActions.selectItem(['member']));\r\n    setFilteredData(list);\r\n  }, [dispatch, list]);\r\n\r\n  useEffect(() => {\r\n    dispatch(memberActions.getMembers({ path: 'members' }));\r\n  }, [dispatch]);\r\n\r\n  useEffect(() => {\r\n    if (getMembersError) {\r\n      const title = intl.formatMessage({ id: 'notification.error' });\r\n      const message = intl.formatMessage({\r\n        id: getMembersErrors.message\r\n          ? getMembersErrors.message\r\n          : 'customers.getCustomer.message.error'\r\n      });\r\n      ErrorNotification(title, message);\r\n      dispatch(memberActions.getMembersCleanError());\r\n    }\r\n  }, [dispatch, getMembersError, getMembersErrors, intl]);\r\n\r\n  const removeMember = useCallback(\r\n    (record) => {\r\n      dispatch(memberActions.removeMember({ path: 'members/remove', param: record.staff_code }));\r\n    },\r\n    [dispatch]\r\n  );\r\n\r\n  const getMembers = useCallback(() => {\r\n    dispatch(memberActions.getMembers({ path: 'members' }));\r\n  }, [dispatch]);\r\n\r\n  const createNewMember = useCallback(\r\n    (body) => {\r\n      dispatch(memberActions.createMember({ path: 'members', body }));\r\n    },\r\n    [dispatch]\r\n  );\r\n\r\n  const updateMember = useCallback(\r\n    (body) => {\r\n      dispatch(memberActions.updateMember({ body, path: 'members', param: body.staff_code }));\r\n    },\r\n    [dispatch]\r\n  );\r\n\r\n  const handleChange = (e) => {\r\n    const currValue = e.target.value;\r\n    setSearchInput(currValue);\r\n    const data = list.filter((value) => {\r\n      return (\r\n        searchColumn(currValue, value.staff_code) ||\r\n        searchColumn(currValue, value.full_name) ||\r\n        searchColumn(currValue, value.email)\r\n      );\r\n    });\r\n    setFilteredData(data);\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Row>\r\n        <Col>\r\n          <HeaderTitle title={<FormattedMessage id=\"members.header.title\" />} />\r\n        </Col>\r\n      </Row>\r\n      <Row justify=\"center\">\r\n        <Col span={10} offset={14}>\r\n          <Input placeholder=\"Search\" value={searchInput} onChange={handleChange} />\r\n        </Col>\r\n      </Row>\r\n      <Row gutter={16} style={{ paddingTop: 20 }}>\r\n        <Members\r\n          members={filteredData}\r\n          getMembers={getMembers}\r\n          updateMember={updateMember}\r\n          removeMember={removeMember}\r\n        />\r\n      </Row>\r\n      {openCreateModal && (\r\n        <CreateMember\r\n          createMember={createNewMember}\r\n          getMembers={getMembers}\r\n          visible={openCreateModal}\r\n          close={() => setOpenCreateModal(!openCreateModal)}\r\n        />\r\n      )}\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nListMemberPage.propTypes = propTypes;\r\n\r\nListMemberPage.defaultProps = defaultProps;\r\n\r\nexport default injectIntl(ListMemberPage, {});\r\n","import React, { useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { formShape } from 'rc-form';\r\nimport { FormattedMessage, injectIntl } from 'react-intl';\r\nimport { css } from 'emotion';\r\n\r\nimport { Row, Modal, Button, Input, Form, Icon, Popconfirm, Typography } from 'antd';\r\n\r\nimport { actions as customerActions } from '../../store';\r\nimport ErrorNotification from '../../../../components/Notification/Error';\r\nimport SuccessNotification from '../../../../components/Notification/Success';\r\nimport modalConfig from '../../../../utils/modal.config';\r\n\r\nconst propTypes = {\r\n  visible: PropTypes.bool.isRequired,\r\n  close: PropTypes.func.isRequired,\r\n  form: formShape.isRequired,\r\n  getCutomers: PropTypes.func.isRequired,\r\n  addCustomer: PropTypes.func.isRequired,\r\n\r\n  listStatus: PropTypes.arrayOf(PropTypes.shape({})),\r\n  listCustomer: PropTypes.arrayOf(PropTypes.shape({})),\r\n  selectedCustomer: PropTypes.shape({}),\r\n\r\n};\r\n\r\nconst defaultProps = {\r\n  listStatus: [],\r\n  listCustomer: [],\r\n  selectedCustomer: {}\r\n};\r\n\r\nconst styles = {\r\n  modal: css``\r\n};\r\n\r\nconst formItemLayout = {\r\n  labelCol: {\r\n    span: 7\r\n  },\r\n  wrapperCol: {\r\n    span: 17\r\n  }\r\n};\r\n\r\nconst CreateCustomerModal = ({ visible, close, form, intl, getCutomers, addCustomer }) => {\r\n  const dispatch = useDispatch();\r\n  const { createCustomerResult, createCustomerError, createCustomerErrors, loading } = useSelector(\r\n    (state) => state.customers\r\n  );\r\n\r\n  // Handle showing notification after add new customer\r\n  useEffect(() => {\r\n    // show success notification\r\n    if (createCustomerResult) {\r\n      const title = intl.formatMessage({ id: 'notification.success' });\r\n      const message = intl.formatMessage({ id: createCustomerResult.message });\r\n      SuccessNotification(title, message);\r\n      // close the modal and clean data\r\n      close();\r\n      // re-call get all customers api\r\n      getCutomers && getCutomers();\r\n    }\r\n  }, [close, intl, createCustomerResult, getCutomers]);\r\n\r\n  // Handle showing error if add new customer failure\r\n  useEffect(() => {\r\n    if (createCustomerError) {\r\n      const title = intl.formatMessage({ id: 'notification.error' });\r\n      const message = intl.formatMessage({\r\n        id: 'projects.createProject.message.error'\r\n      });\r\n      ErrorNotification(title, message);\r\n      // clean error\r\n      dispatch(customerActions.createCustomerCleanError(false));\r\n    }\r\n  }, [createCustomerError, createCustomerErrors, dispatch, intl]);\r\n\r\n  // Clean Data, Error after close\r\n  useEffect(() => {\r\n    return () => {\r\n      dispatch(customerActions.createCustomerCleanError());\r\n      dispatch(customerActions.createCustomerCleanData());\r\n    };\r\n  }, [dispatch]);\r\n\r\n  // Form submit\r\n  const handleSubmit = () => {\r\n    form.validateFields((err, values) => {\r\n      if (!err) {\r\n        const body = {\r\n          address: values.address,\r\n          name: values.name,\r\n          phone_number: values.phone_number,\r\n          email: values.email\r\n        };\r\n        // call api when valid data\r\n        addCustomer && addCustomer(body);\r\n      } else {\r\n        // showing error form input notification\r\n        const title = intl.formatMessage({ id: 'notification.error' });\r\n        const message = intl.formatMessage({ id: 'notification.message.form.error' });\r\n        ErrorNotification(title, message);\r\n      }\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Modal\r\n      title={<FormattedMessage id=\"customers.customerModal.headerCreateCustomer.title\" />}\r\n      visible={visible}\r\n      width={550}\r\n      className={styles.modal}\r\n      onCancel={() => close()}\r\n      footer={[\r\n        <Row type=\"flex\" key=\"abc\" justify=\"end\">\r\n          <Popconfirm\r\n            title={<FormattedMessage id=\"customers.createCustomers.confirm.create\" />}\r\n            onConfirm={() => handleSubmit()}\r\n            okText={<FormattedMessage id=\"button.confirm.yes\" />}\r\n            cancelText={<FormattedMessage id=\"button.confirm.no\" />}>\r\n            <Button icon=\"plus\" type=\"primary\" loading={loading}>\r\n              <FormattedMessage id=\"button.add\" />\r\n            </Button>\r\n          </Popconfirm>\r\n          <Button\r\n            icon=\"close-circle\"\r\n            type=\"default\"\r\n            key=\"close\"\r\n            onClick={() => close()}\r\n            disabled={loading}>\r\n            <FormattedMessage id=\"button.close\" />\r\n          </Button>\r\n        </Row>\r\n      ]}\r\n      {...modalConfig}>\r\n      <Form onSubmit={() => handleSubmit()} {...formItemLayout}>\r\n        <Row style={{ marginBottom: 10 }}>\r\n          <Icon type=\"user\" style={{ marginRight: 10 }} />\r\n          <Typography.Text style={{ fontWeight: 'bold' }}>\r\n            {<FormattedMessage id=\"customers.createCustomers.customerInformation\" />}\r\n          </Typography.Text>\r\n        </Row>\r\n\r\n        <Form.Item\r\n          style={{ display: 'flex' }}\r\n          label={<FormattedMessage id=\"customers.customerModal.form.customerName.title\" />}\r\n          validateStatus={form.getFieldError('name') ? 'error' : 'validating'}>\r\n          {form.getFieldDecorator('name', {\r\n            rules: [\r\n              {\r\n                required: true,\r\n                message: (\r\n                  <FormattedMessage id=\"customers.customerModal.form.customerName.validate\" />\r\n                )\r\n              }\r\n            ]\r\n          })(<Input />)}\r\n        </Form.Item>\r\n        <Form.Item\r\n          style={{ display: 'flex' }}\r\n          label={<FormattedMessage id=\"customers.customerModal.form.customerAddress.title\" />}\r\n          validateStatus={form.getFieldError('address') ? 'error' : 'validating'}>\r\n          {form.getFieldDecorator('address', {\r\n            rules: [\r\n              {\r\n                required: true,\r\n                message: (\r\n                  <FormattedMessage id=\"customers.customerModal.form.customerAddress.validate\" />\r\n                )\r\n              }\r\n            ]\r\n          })(<Input />)}\r\n        </Form.Item>\r\n        <Form.Item\r\n          style={{ display: 'flex' }}\r\n          label={<FormattedMessage id=\"customers.customerModal.form.customerEmail.title\" />}\r\n          validateStatus={form.getFieldError('email') ? 'error' : 'validating'}>\r\n          {form.getFieldDecorator('email', {\r\n            rules: [\r\n              {\r\n                type: 'email',\r\n                message: (\r\n                  <FormattedMessage id=\"customers.customerModal.form.customerEmail.validate.type\" />\r\n                )\r\n              },\r\n              {\r\n                required: true,\r\n                message: (\r\n                  <FormattedMessage id=\"customers.customerModal.form.customerEmail.validate\" />\r\n                )\r\n              }\r\n            ]\r\n          })(<Input />)}\r\n        </Form.Item>\r\n        <Form.Item\r\n          style={{ display: 'flex' }}\r\n          label={<FormattedMessage id=\"customers.customerModal.form.customerPhonenumber.title\" />}\r\n          validateStatus={form.getFieldError('phone_number') ? 'error' : 'validating'}>\r\n          {form.getFieldDecorator('phone_number', {\r\n            rules: [\r\n              {\r\n                required: true,\r\n                message: (\r\n                  <FormattedMessage id=\"customers.customerModal.form.customerPhonenumber.validate\" />\r\n                )\r\n              }\r\n            ]\r\n          })(<Input />)}\r\n        </Form.Item>\r\n      </Form>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nCreateCustomerModal.propTypes = propTypes;\r\n\r\nCreateCustomerModal.defaultProps = defaultProps;\r\n\r\nconst CreateCustomerForm = Form.create({ name: 'createCustomer' })(CreateCustomerModal);\r\n\r\nexport default injectIntl(CreateCustomerForm, {});\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { FormattedMessage, injectIntl } from 'react-intl';\r\nimport { Table } from 'antd';\r\n\r\nimport { history } from '../../../../store';\r\n\r\n\r\nconst propTypes = {\r\n  intl: PropTypes.shape({}).isRequired,\r\n  customers: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\r\n  getCustomers: PropTypes.func.isRequired,\r\n  removeCustomer: PropTypes.func.isRequired\r\n};\r\n\r\nconst defaultProps = {};\r\n\r\n\r\nconst CustomersTable = ({ intl, customers }) => {\r\n  const { loading } = useSelector(\r\n    (state) => state.customers\r\n  );\r\n  const onSelectCustomer = (item) => {\r\n    history.push(`/customer/detail/${item.id}`);    \r\n  };\r\n  \r\n  const columns = [\r\n    {\r\n      title: <FormattedMessage id=\"customers.name.title\" />,\r\n      dataIndex: 'name',\r\n      key: 'name'\r\n    },\r\n    {\r\n      title: <FormattedMessage id=\"customers.email.title\" />,\r\n      dataIndex: 'email',\r\n      key: 'email'\r\n    },\r\n    {\r\n      title: <FormattedMessage id=\"customers.phone.title\" />,\r\n      dataIndex: 'phone_number',\r\n      key: 'phone_number'\r\n    },\r\n    {\r\n      title: <FormattedMessage id=\"customers.address.title\" />,\r\n      dataIndex: 'address',\r\n      key: 'address'\r\n    }\r\n  ];\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Table\r\n        columns={columns}\r\n        rowKey={(record) => record.id}\r\n        dataSource={customers}\r\n        loading={loading}\r\n        onRow={(item) => ({\r\n          onClick: () => onSelectCustomer(item)\r\n        })}\r\n      />\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nCustomersTable.propTypes = propTypes;\r\n\r\nCustomersTable.defaultProps = defaultProps;\r\n\r\nexport default injectIntl(CustomersTable, {});\r\n","import React, { useEffect, useCallback, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { injectIntl } from 'react-intl';\r\nimport { css } from 'emotion';\r\nimport { Row, Button, Col, Input } from 'antd';\r\n\r\nimport { actions as layoutActions } from '../modules/layout/store';\r\nimport { actions as customerActions } from '../modules/customer/store';\r\nimport searchColumn from '../utils/searchColumn';\r\n\r\nimport HeaderTitle from '../components/Content/HeaderTitle';\r\nimport ErrorNotification from '../components/Notification/Error';\r\nimport WithRole from '../hocs/WithRole';\r\n\r\nimport CreateModal from '../modules/customer/createCustomer/components/CreateCustomerModal';\r\nimport CustomersTable from '../modules/customer/customers/components/CustomersTable';\r\n\r\nconst styles = {\r\n  container: css`\r\n    height: 100% !important;\r\n  `,\r\n  addCustomerButton: css`\r\n    background: #49a32b !important;\r\n    color: #fff !important;\r\n    margin-bottom: 10px;\r\n  `\r\n};\r\n\r\nconst propTypes = {\r\n  history: PropTypes.shape({}).isRequired\r\n};\r\n\r\nconst defaultProps = {};\r\n\r\nconst ButtonCreateCustomer = ({ handleCreateModal, intl }) => {\r\n  return (\r\n    <Button icon=\"user-add\" className={styles.addCustomerButton} onClick={handleCreateModal}>\r\n      {intl.formatMessage({ id: 'button.add' })}\r\n    </Button>\r\n  );\r\n};\r\n\r\nconst CustomersPage = React.memo(({ history, intl }) => {\r\n  const dispatch = useDispatch();\r\n\r\n  // selector\r\n  const { list, getCustomersError, getCustomersErrors } = useSelector((state) => state.customers);\r\n\r\n  // state\r\n  const [visible, setVisible] = useState(false);\r\n  const [searchInput, setSearchInput] = useState('');\r\n  const [filteredData, setFilteredData] = useState([]);\r\n\r\n  // get customers function\r\n  const getCustomers = useCallback(() => {\r\n    dispatch(\r\n      customerActions.getCustomers({\r\n        path: 'customers'\r\n      })\r\n    );\r\n  }, [dispatch]);\r\n\r\n  // add customers function\r\n  const addCustomer = useCallback(\r\n    (body) => {\r\n      dispatch(customerActions.createCustomer({ body, path: 'customers' }));\r\n    },\r\n    [dispatch]\r\n  );\r\n\r\n  const removeCustomer = useCallback(\r\n    (record) => {\r\n      dispatch(\r\n        customerActions.removeCustomer({\r\n          path: 'customers/remove',\r\n          param: record.id\r\n        })\r\n      );\r\n    },\r\n    [dispatch]\r\n  );\r\n\r\n  // check authencation\r\n\r\n  // get customers at first render\r\n  useEffect(() => {\r\n    dispatch(layoutActions.selectItem(['customers']));\r\n    getCustomers();\r\n  }, [dispatch, getCustomers]);\r\n\r\n  useEffect(() => {\r\n    setFilteredData(list);\r\n  }, [list]);\r\n\r\n  // show notification if get customers list failure\r\n  useEffect(() => {\r\n    if (getCustomersError) {\r\n      const title = intl.formatMessage({ id: 'notification.error' });\r\n      const message = intl.formatMessage({\r\n        id: getCustomersErrors.message\r\n          ? getCustomersErrors.message\r\n          : 'customers.getCustomers.message.error'\r\n      });\r\n      ErrorNotification(title, message);\r\n      dispatch(customerActions.getCustomersCleanError());\r\n    }\r\n  }, [dispatch, getCustomersError, getCustomersErrors, intl]);\r\n\r\n  const handleCreateModal = () => {\r\n    setVisible(!visible);\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    const currValue = e.target.value;\r\n    setSearchInput(currValue);\r\n    const data = list.filter((value) => {\r\n      return searchColumn(currValue, value.name) || searchColumn(currValue, value.email);\r\n    });\r\n    setFilteredData(data);\r\n  };\r\n\r\n  return (\r\n    <Row className={styles.container}>\r\n      <Row>\r\n        <HeaderTitle title={intl.formatMessage({ id: 'customers.header.title' })} />\r\n      </Row>\r\n      <Row>\r\n        <Col>\r\n          <WithRole\r\n            type={['admin']}\r\n            component={ButtonCreateCustomer}\r\n            handleCreateModal={handleCreateModal}\r\n            intl={intl}\r\n          />\r\n        </Col>\r\n        <Col span={10} offset={14}>\r\n          <Input placeholder=\"Search\" value={searchInput} onChange={handleChange} />\r\n        </Col>\r\n      </Row>\r\n      <Row style={{ paddingTop: 20 }}>\r\n        <CustomersTable\r\n          customers={filteredData}\r\n          removeCustomer={removeCustomer}\r\n          getCustomers={getCustomers}\r\n        />\r\n      </Row>\r\n      {visible && (\r\n        <CreateModal\r\n          visible={visible}\r\n          close={() => setVisible(!visible)}\r\n          getCutomers={getCustomers}\r\n          addCustomer={addCustomer}\r\n        />\r\n      )}\r\n    </Row>\r\n  );\r\n});\r\n\r\nCustomersPage.propTypes = propTypes;\r\n\r\nCustomersPage.defaultProps = defaultProps;\r\n\r\nexport default injectIntl(CustomersPage, {});\r\n","import React from 'react';\r\nimport { Row } from 'antd';\r\nimport { FormattedMessage } from 'react-intl';\r\n\r\nconst NotFound = () => {\r\n  return (\r\n    <Row>\r\n      <FormattedMessage id=\"Not Found\" />\r\n    </Row>\r\n  );\r\n};\r\n\r\nexport default NotFound;\r\n","import React, { useEffect } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { SyncLoader } from 'react-spinners';\r\nimport { css } from '@emotion/core';\r\nimport jwtDecode from 'jwt-decode';\r\nimport Cookies from 'js-cookie';\r\n\r\nimport { dispatchHideLayout, dispatchShowLayout } from '../actions/layout';\r\nimport { dispatchLogin } from '../actions/auth';\r\nimport { authApi } from '../api/auth/authApi';\r\n\r\nfunction CallbackOAuth(props) {\r\n  const dispatch = useDispatch();\r\n  useEffect(() => {\r\n    dispatchHideLayout(dispatch);\r\n\r\n    if (props.location.search) {\r\n      const query = props.location.search;\r\n      const accessCode = query.split('=');\r\n      authApi.login(accessCode[1]).then((userLogin) => {\r\n        const userInfo = jwtDecode(userLogin.data.access_token);\r\n        localStorage.setItem('expresIn', userInfo.exp * 1000);\r\n        Cookies.set('access-token', userLogin.data.access_token, { secure: false, path: '/' });\r\n        dispatchShowLayout(dispatch);\r\n        dispatchLogin(dispatch, { ...userInfo, role: 'normal' });\r\n        props.history.push('/project');\r\n      });\r\n    }\r\n    // eslint-disable-next-line react/destructuring-assignment\r\n  }, [dispatch, props.location.search, props.history]);\r\n\r\n  const override = css`\r\n    display: block;\r\n\r\n    color: red;\r\n  `;\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        backgroundColor: '#fff',\r\n        width: '100vw',\r\n        height: '100vh',\r\n        paddingTop: 100,\r\n        display: 'flex',\r\n        flexDirection: 'row',\r\n        justifyContent: 'center',\r\n        alignItems: 'center'\r\n      }}>\r\n      <h2 style={{ color: '#747CDD', marginRight: 10 }}>Loading</h2>\r\n      <SyncLoader css={override} sizeUnit=\"px\" size={10} color=\"#747CDD\" />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CallbackOAuth;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { css } from 'emotion';\r\nimport { formShape } from 'rc-form';\r\nimport { FormattedMessage, injectIntl } from 'react-intl';\r\n\r\nimport {\r\n  Drawer,\r\n  Form,\r\n  Icon,\r\n  Row,\r\n  Col,\r\n  Select,\r\n  Descriptions,\r\n  Typography,\r\n  Button,\r\n  Popconfirm,\r\n  Spin\r\n} from 'antd';\r\n\r\nimport ErrorNotification from '../../../../components/Notification/Error';\r\nimport SuccessNotification from '../../../../components/Notification/Success';\r\nimport { actions as memberActions } from '../../../member/store';\r\n\r\nconst propTypes = {\r\n  intl: PropTypes.shape({}).isRequired,\r\n  onClose: PropTypes.func.isRequired,\r\n  drawerVisible: PropTypes.bool.isRequired,\r\n  form: formShape.isRequired,\r\n\r\n  data: PropTypes.shape({}),\r\n\r\n  getMembers: PropTypes.func.isRequired,\r\n  updateMember: PropTypes.func.isRequired\r\n};\r\n\r\nconst defaultProps = {\r\n  data: {}\r\n};\r\n\r\nconst styles = {\r\n  drawerFooter: css`\r\n    position: absolute;\r\n    bottom: 0;\r\n    right: 24px;\r\n    left: 24px;\r\n    padding: 24px 0px;\r\n  `,\r\n  deletedUserMsg: css`\r\n    color: red !important;\r\n  `\r\n};\r\n\r\nconst listRole = [\r\n  { type: 'admin', permission: 'all' },\r\n  { type: 'manager', permission: 'view, edit' },\r\n  { type: 'normal', permission: 'view' }\r\n];\r\n\r\nconst formItemLayout = {\r\n  labelCol: {\r\n    span: 8\r\n  },\r\n  wrapperCol: {\r\n    span: 16\r\n  }\r\n};\r\n\r\nconst UpdateUserDrawer = ({\r\n  getMembers,\r\n  updateMember,\r\n  intl,\r\n  onClose,\r\n  drawerVisible,\r\n  form,\r\n  data\r\n}) => {\r\n  const dispatch = useDispatch();\r\n  const [userChange, setUserChange] = useState({ ...data });\r\n  const { updateMemberResult, updateMemberError, updateMemberErrors, loading } = useSelector(\r\n    (state) => state.members\r\n  );\r\n\r\n  const memberLoading = useSelector((state) => state.members.loading);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      dispatch(memberActions.updateMemberCleanError(false));\r\n      dispatch(memberActions.updateMemberCleanData());\r\n    };\r\n  }, [dispatch]);\r\n  // Handle showing notification after update project\r\n  useEffect(() => {\r\n    // show success notification\r\n    if (updateMemberResult) {\r\n      const title = intl.formatMessage({ id: 'notification.success' });\r\n      const message = intl.formatMessage({ id: updateMemberResult.message });\r\n      SuccessNotification(title, message);\r\n      // close the modal and clean state\r\n      onClose();\r\n      // re-call get User detail api\r\n      getMembers && getMembers();\r\n    }\r\n    // show error notification\r\n  }, [onClose, intl, updateMemberResult, dispatch, getMembers]);\r\n\r\n  useEffect(() => {\r\n    if (updateMemberError) {\r\n      const title = intl.formatMessage({ id: 'notification.error' });\r\n      const message = intl.formatMessage({ id: 'users.updateUser.message.error' });\r\n      ErrorNotification(title, message);\r\n      // clean state\r\n      dispatch(memberActions.updateMemberCleanError());\r\n    }\r\n  }, [dispatch, intl, updateMemberError, updateMemberErrors]);\r\n\r\n  const handleSubmit = () => {\r\n    form.validateFields(async(err, values) => {\r\n      if (!err) {\r\n        const body = {\r\n          staff_code: userChange.staff_code,\r\n          full_name: userChange.full_name,\r\n          email: userChange.email,\r\n          permission: userChange.permission,\r\n          type: userChange.type,\r\n          phone_number: userChange.phone_number\r\n        };\r\n\r\n        const oldBody = {\r\n          staff_code: data.staff_code,\r\n          full_name: data.full_name,\r\n          email: data.email,\r\n          permission: data.permission,\r\n          type: data.type,\r\n          phone_number: data.phone_number\r\n        };\r\n        // check if value is not change\r\n        if (JSON.stringify(body) === JSON.stringify(oldBody)) {\r\n          const title = intl.formatMessage({ id: 'notification.error' });\r\n          const message = intl.formatMessage({ id: 'notification.message.form.noChanging' });\r\n          return ErrorNotification(title, message);\r\n        }\r\n\r\n        if (userChange.hidden) {\r\n          const title = intl.formatMessage({ id: 'notification.error' });\r\n          const message = intl.formatMessage({ id: 'notification.message.form.deletedUser' });\r\n          return ErrorNotification(title, message);\r\n        }\r\n        updateMember &&  updateMember(body);\r\n      } else {\r\n        // showing error form input notification\r\n        const title = intl.formatMessage({ id: 'notification.error' });\r\n        const message = intl.formatMessage({ id: 'notification.message.form.error' });\r\n        ErrorNotification(title, message);\r\n      }\r\n      return null;\r\n    });\r\n  };\r\n\r\n  const handleSelect = (value) => {\r\n    const newRole = listRole.filter((item) => item.type === value)[0];\r\n    setUserChange({ ...userChange, ...newRole });\r\n    return userChange;\r\n  };\r\n\r\n  return (\r\n    <Drawer\r\n      title={<FormattedMessage id=\"users.drawerUpdate.tile\" />}\r\n      placement=\"right\"\r\n      onClose={onClose}\r\n      visible={drawerVisible}\r\n      maskClosable={false}\r\n      width={550}>\r\n      <Form onSubmit={() => handleSubmit()} {...formItemLayout}>\r\n        <Row style={{ marginBottom: 10 }}>\r\n          <Icon type=\"user\" style={{ marginRight: 10 }} />\r\n          <Typography.Text style={{ fontWeight: 'bold' }}>\r\n            <FormattedMessage id=\"users.drawerUpdate.userInformation\" />\r\n          </Typography.Text>\r\n        </Row>\r\n        <Form.Item\r\n          style={{ display: 'flex' }}\r\n          label={<FormattedMessage id=\"users.role.title\" />}\r\n          validateStatus={form.getFieldError('type') ? 'error' : 'validating'}>\r\n          {form.getFieldDecorator('type', {\r\n            rules: [\r\n              {\r\n                required: true,\r\n                message: intl.formatMessage({ id: 'projects.createProject.error.status' })\r\n              }\r\n            ],\r\n            initialValue: listRole.find((e) => {\r\n              return e.type === data.type;\r\n            }).type\r\n          })(\r\n            <Select\r\n              allowClear\r\n              autoClearSearchValue\r\n              onSelect={(value) => handleSelect(value)}\r\n              notFoundContent={memberLoading && <Spin size=\"small\" />}>\r\n              {(listRole || []).map((e) => {\r\n                return (\r\n                  <Select.Option key={e.type} value={e.type}>\r\n                    {e.type}\r\n                  </Select.Option>\r\n                );\r\n              })}\r\n            </Select>\r\n          )}\r\n        </Form.Item>\r\n        <Row>\r\n          <Col span={8}></Col>\r\n          <Col span={16}>\r\n            <Descriptions column={1}>\r\n              <Descriptions.Item label={<FormattedMessage id=\"users.name.title\" />}>\r\n                {userChange.full_name || null}\r\n              </Descriptions.Item>\r\n              <Descriptions.Item label={<FormattedMessage id=\"users.email.title\" />}>\r\n                {userChange.email || null}\r\n              </Descriptions.Item>\r\n              <Descriptions.Item label={<FormattedMessage id=\"users.permission.title\" />}>\r\n                {userChange.permission || null}\r\n              </Descriptions.Item>\r\n              <Descriptions.Item label={<FormattedMessage id=\"users.role.title\" />}>\r\n                {userChange.type || null}\r\n              </Descriptions.Item>\r\n            </Descriptions>\r\n            {userChange.hidden && (\r\n              <Typography.Text className={styles.deletedUserMsg}>\r\n                <FormattedMessage id=\"projects.updateProject.deletedCustomer\" />\r\n              </Typography.Text>\r\n            )}\r\n          </Col>\r\n        </Row>\r\n      </Form>\r\n      <Row className={styles.drawerFooter}>\r\n        <Popconfirm\r\n          title={<FormattedMessage id=\"users.drawerUpdate.confirm.add\" />}\r\n          onConfirm={() => handleSubmit()}\r\n          okText={<FormattedMessage id=\"button.confirm.yes\" />}\r\n          cancelText={<FormattedMessage id=\"button.confirm.no\" />}>\r\n          <Button icon=\"edit\" type=\"primary\" loading={loading}>\r\n            {<FormattedMessage id=\"button.update\" />}\r\n          </Button>\r\n        </Popconfirm>\r\n        <Button\r\n          style={{ marginLeft: 15 }}\r\n          icon=\"close-circle\"\r\n          type=\"default\"\r\n          key=\"close\"\r\n          onClick={onClose}>\r\n          {<FormattedMessage id=\"button.close\" />}\r\n        </Button>\r\n      </Row>\r\n    </Drawer>\r\n  );\r\n};\r\n\r\nUpdateUserDrawer.propTypes = propTypes;\r\n\r\nUpdateUserDrawer.defaultProps = defaultProps;\r\n\r\nconst UpdateUserForm = Form.create({ name: 'updateUser' })(UpdateUserDrawer);\r\n\r\nexport default injectIntl(UpdateUserForm, {});\r\n","import React, { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { FormattedMessage, injectIntl } from 'react-intl';\r\nimport { Table, Button, Tooltip, Row } from 'antd';\r\n\r\nimport UpdateUserDrawer from '../../editUser/components/UpdateUserDrawer';\r\n\r\nconst propTypes = {\r\n  intl: PropTypes.shape({}).isRequired,\r\n  users: PropTypes.arrayOf(PropTypes.shape({})).isRequired,\r\n\r\n  getMembers: PropTypes.func.isRequired,\r\n  updateMember: PropTypes.func.isRequired\r\n};\r\n\r\nconst defaultProps = {};\r\n\r\nconst UsersTable = ({ users, updateMember, getMembers }) => {\r\n  const [dataItem, setDataItem] = useState({});\r\n  const [drawerVisible, setDrawerVisible] = useState(false);\r\n\r\n  const columns = [\r\n    {\r\n      title: <FormattedMessage id=\"users.name.title\" />,\r\n      dataIndex: 'full_name',\r\n      key: 'full_name'\r\n    },\r\n    {\r\n      title: <FormattedMessage id=\"users.email.title\" />,\r\n      dataIndex: 'email',\r\n      key: 'email'\r\n    },\r\n    {\r\n      title: <FormattedMessage id=\"users.role.title\" />,\r\n      dataIndex: 'type',\r\n      key: 'type'\r\n    },\r\n    {\r\n      title: '',\r\n      dataIndex: '',\r\n      key: 'x',\r\n      align: 'right',\r\n      render: (record) => (\r\n        <React.Fragment>\r\n          <Tooltip placement=\"top\" title={<FormattedMessage id=\"users.button.edit\" />}>\r\n            <Button\r\n              shape=\"circle\"\r\n              icon=\"edit\"\r\n              type=\"primary\"\r\n              style={{ margin: '0px 5px' }}\r\n              // eslint-disable-next-line no-use-before-define\r\n              onClick={() => handleEditSelected(record)}\r\n            />\r\n          </Tooltip>\r\n        </React.Fragment>\r\n      )\r\n    }\r\n  ];\r\n  const handleEditSelected = (data) => {\r\n    data && setDataItem(data);\r\n    setDrawerVisible(!drawerVisible);\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Row>\r\n        <Table\r\n          columns={columns}\r\n          rowKey={(record, index) => index}\r\n          dataSource={users}\r\n        />\r\n      </Row>\r\n      {drawerVisible && (\r\n        <UpdateUserDrawer\r\n          drawerVisible={drawerVisible}\r\n          updateMember={updateMember}\r\n          getMembers={getMembers}\r\n          onClose={() => handleEditSelected()}\r\n          data={dataItem}\r\n        />\r\n      )}\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nUsersTable.propTypes = propTypes;\r\n\r\nUsersTable.defaultProps = defaultProps;\r\n\r\nexport default injectIntl(UsersTable, {});\r\n","import React, { useEffect, useCallback, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { injectIntl } from 'react-intl';\r\nimport { css } from 'emotion';\r\nimport { Row, Col, Input } from 'antd';\r\n\r\nimport HeaderTitle from '../components/Content/HeaderTitle';\r\nimport UsersTable from '../modules/user/users/components/UsersTable';\r\nimport ErrorNotification from '../components/Notification/Error';\r\n\r\nimport { actions as layoutActions } from '../modules/layout/store';\r\nimport { actions as memberActions } from '../modules/member/store';\r\nimport searchColumn from '../utils/searchColumn';\r\n\r\nconst styles = {\r\n  container: css`\r\n    height: 100% !important;\r\n  `,\r\n  table: css`\r\n    paddingtop: 20 !important;\r\n  `\r\n};\r\n\r\nconst propTypes = {\r\n  history: PropTypes.shape({}).isRequired,\r\n  intl: PropTypes.shape({}).isRequired\r\n};\r\n\r\nconst defaultProps = {};\r\n\r\nconst UsersPage = ({ history, intl }) => {\r\n  const dispatch = useDispatch();\r\n\r\n  // selector\r\n  const { list, getMembersError, getMembersErrors } = useSelector((state) => state.members);\r\n\r\n  const [searchInput, setSearchInput] = useState('');\r\n  const [filteredData, setFilteredData] = useState([]);\r\n  // get users function\r\n  useEffect(() => {\r\n    dispatch(\r\n      memberActions.getMembers({\r\n        path: 'members'\r\n      })\r\n    );\r\n  }, [dispatch]);\r\n\r\n  useEffect(() => {\r\n    setFilteredData(list);\r\n  }, [list]);\r\n\r\n  const getMembers = useCallback(() => {\r\n    dispatch(\r\n      memberActions.getMembers({\r\n        path: 'members'\r\n      })\r\n    );\r\n  }, [dispatch]);\r\n\r\n  const updateMember = useCallback(\r\n    (body) => {\r\n      dispatch(memberActions.updateMember({ body, path: 'members', param: body.staff_code }));\r\n    },\r\n    [dispatch]\r\n  );\r\n\r\n  // show notification if get users list failure\r\n  useEffect(() => {\r\n    if (getMembersError) {\r\n      const title = intl.formatMessage({ id: 'notification.error' });\r\n      const message = intl.formatMessage({\r\n        id: getMembersErrors.message ? getMembersErrors.message : 'users.getMembers.message.error'\r\n      });\r\n      ErrorNotification(title, message);\r\n      dispatch(memberActions.getMembersCleanError());\r\n    }\r\n  }, [dispatch, getMembersError, getMembersErrors, intl]);\r\n\r\n  useEffect(() => {\r\n    dispatch(layoutActions.selectItem(['roles']));\r\n  }, [dispatch]);\r\n\r\n  const handleChange = (e) => {\r\n    const currValue = e.target.value;\r\n    setSearchInput(currValue);\r\n    const data = list.filter((value) => {\r\n      return searchColumn(currValue, value.full_name) || searchColumn(currValue, value.email);\r\n    });\r\n    setFilteredData(data);\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Row className={styles.container}>\r\n        <Row>\r\n          <Col>\r\n            <HeaderTitle title={intl.formatMessage({ id: 'users.header.title' })} />\r\n          </Col>\r\n          <Col span={10} offset={14}>\r\n            <Input placeholder=\"Search\" value={searchInput} onChange={handleChange} />\r\n          </Col>\r\n        </Row>\r\n        <Row style={{ paddingTop: 20 }}>\r\n          <UsersTable users={filteredData} getMembers={getMembers} updateMember={updateMember} />\r\n        </Row>\r\n      </Row>\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nUsersPage.propTypes = propTypes;\r\n\r\nUsersPage.defaultProps = defaultProps;\r\n\r\nexport default injectIntl(UsersPage, {});\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { css } from 'emotion';\r\nimport { FormattedMessage } from 'react-intl';\r\nimport { formShape } from 'rc-form';\r\nimport {\r\n    Form,\r\n    Select,\r\n    Button,\r\n    Input,\r\n    Spin,\r\n    Row,\r\n    Icon,\r\n    Typography,\r\n    Checkbox,\r\n    Modal,\r\n    Popconfirm\r\n} from 'antd';\r\nimport { actions as settingActions } from '../store';\r\n\r\nimport ErrorNotification from '../../../components/Notification/Error';\r\nimport SuccessNotification from '..//../../components/Notification/Success';\r\n\r\nimport modalConfig from '../../../utils/modal.config';\r\n\r\n\r\n\r\nconst propTypes = {\r\n    form: formShape.isRequired,\r\n    intl: PropTypes.shape({}).isRequired,\r\n    createCustomField: PropTypes.func.isRequired,\r\n    visible: PropTypes.bool.isRequired,\r\n    close: PropTypes.func.isRequired,\r\n};\r\n\r\nconst defaultProps = {};\r\n\r\n\r\nconst styles = {\r\n    buttonSubmit: css`\r\n    background: #49a32b !important;\r\n    color: #fff !important;\r\n    margin-bottom: 10px;\r\n  `\r\n};\r\nconst CreateCustomField = ({ form, intl, createCustomField, visible, close, getCustomFields, getProjects, global }) => {\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const { list, loading } = useSelector(\r\n        (state) => state.projects\r\n    );\r\n\r\n    const { valueTypes } = useSelector(\r\n        (state) => state.setting\r\n    );\r\n    useEffect(() => {\r\n        // get value type\r\n        dispatch(\r\n            settingActions.getValueTypes({\r\n                path: 'data/valueType'\r\n            })\r\n        );\r\n    }, [dispatch]);\r\n\r\n    const [defaultValue, setDefaultValue] = useState({})\r\n\r\n    const { createCustomFieldResult, createCustomFieldError, createCustomFieldErrors } = useSelector(\r\n        (state) => state.setting\r\n    )\r\n\r\n    // Get all projects after open modal\r\n    useEffect(() => {\r\n        getProjects && getProjects();\r\n        dispatch(settingActions.createCustomFieldCleanData());\r\n        dispatch(settingActions.createCustomFieldCleanError());\r\n    }, [getProjects, dispatch]);\r\n\r\n    const handleSubmit = () => {\r\n        form.validateFields((err, values) => {\r\n            if (!err && defaultValue.status === \"success\") {``````\r\n                // call api when valid data\r\n                global ? values.is_global = true : values.is_global = false\r\n                createCustomField && createCustomField(values);\r\n                // form.resetFields();\r\n                setTimeout(() => {\r\n                    window.location.reload()\r\n                }, 0)\r\n            } else {\r\n                // showing error form input notification\r\n                const title = intl.formatMessage({ id: 'notification.error' });\r\n                const message = intl.formatMessage({ id: 'notification.message.form.error' });\r\n                ErrorNotification(title, message);\r\n            }\r\n        });\r\n    };\r\n\r\n    //handle change value type\r\n    const handleChange = (e) => {\r\n        setDefaultValue({ status: \"success\", help: \"\", type: e });\r\n        form.setFieldsValue({ ...form.getFieldsValue(), defaultValue: '' })\r\n    }\r\n\r\n    // Handle showing notification after add new customfield\r\n    useEffect(() => {\r\n        // show success notification\r\n        if (createCustomFieldResult) {\r\n            const title = intl.formatMessage({ id: 'notification.success' });\r\n            const message = intl.formatMessage({ id: 'createCustomFieldResult.message' });\r\n            SuccessNotification(title, message);\r\n            // close the modal and clean data\r\n            close();\r\n            // re-call get all customfields api\r\n            getCustomFields && getCustomFields();\r\n        }\r\n    }, [close, intl, createCustomFieldResult, getCustomFields]);\r\n\r\n    useEffect(() => {\r\n        // show error notification\r\n        if (createCustomFieldError) {\r\n            const title = intl.formatMessage({ id: 'notification.error' });\r\n            const message = intl.formatMessage({\r\n                id: 'setting.createCustomField.message.error'\r\n            });\r\n            ErrorNotification(title, message);\r\n            // clean error\r\n            dispatch(settingActions.createCustomFieldCleanError(false));\r\n        }\r\n    }, [dispatch, intl, createCustomFieldError, createCustomFieldErrors]);\r\n\r\n    //regex default value \r\n    const regex = (value) => {\r\n        let re;\r\n        switch (defaultValue.type) {\r\n            case \"Url\":\r\n                re = /(http(s)?:\\/\\/.)?(www\\.)?[-a-zA-Z0-9@:%._~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_.~#?&//=]*)/g\r\n                return (value.match(re) !== null)\r\n            case \"Number\":\r\n                re = /^[0-9]*$/\r\n                return (value.match(re) !== null)\r\n            default: return true\r\n        }\r\n    }\r\n\r\n    const handleChangeInput = (e) => {\r\n        if (!e.target.value) { setDefaultValue({ ...defaultValue, status: \"error\", help: <FormattedMessage id=\"setting.label.defaultValue.validate\" /> }) }\r\n        else if (!regex(e.target.value)) {\r\n            setDefaultValue({ ...defaultValue, status: \"error\", help: intl.formatMessage({ id: `setting.label.defaultValue.${defaultValue.type}` }) });\r\n        }\r\n        else {\r\n            setDefaultValue({ ...defaultValue, status: \"success\", help: \"\" })\r\n        }\r\n    }\r\n\r\n    const formItemLayout = {\r\n        labelCol: { span: 6 },\r\n        wrapperCol: { span: 14 },\r\n    };\r\n    return (\r\n        <Modal\r\n            title={<FormattedMessage id={global ? \"setting.createGlobalCustomField.title\" : \"setting.createCustomField.title\"} />}\r\n            cancelText=\"Close\"\r\n            visible={visible}\r\n            width={550}\r\n            className={styles.modal}\r\n            onCancel={() => close()}\r\n            footer={[\r\n                <Row type=\"flex\" key=\"abc\" justify=\"end\">\r\n                    <Popconfirm\r\n                        title={<FormattedMessage id=\"setting.createCustomField.confirm\" />}\r\n                        onConfirm={() => handleSubmit()}\r\n                        okText={<FormattedMessage id=\"button.confirm.yes\" />}\r\n                        cancelText={<FormattedMessage id=\"button.confirm.no\" />}>\r\n                        <Button className={styles.buttonSubmit} loading={loading}>\r\n                            <FormattedMessage id=\"button.add\" />\r\n                        </Button>\r\n                    </Popconfirm>\r\n                    <Button\r\n                        icon=\"close-circle\"\r\n                        type=\"default\"\r\n                        key=\"close\"\r\n                        onClick={() => close()}\r\n                        disabled={loading}>\r\n                        <FormattedMessage id=\"button.close\" />\r\n                    </Button>\r\n                </Row>\r\n            ]}\r\n            {...modalConfig}>\r\n            <Form {...formItemLayout} onSubmit={handleSubmit}>\r\n                <Row style={{ marginBottom: 10 }}>\r\n                    <Icon type=\"project\" style={{ marginRight: 10 }} />\r\n                    <Typography.Text style={{ fontWeight: 'bold' }}>\r\n                        {<FormattedMessage id=\"setting.header.customfield\" />}\r\n                    </Typography.Text>\r\n                </Row>\r\n                <Form.Item\r\n                    style={{ display: 'flex' }}\r\n                    label={<FormattedMessage id=\"setting.label.fieldName\" />}\r\n                    validateStatus={form.getFieldError('name') ? 'error' : 'validating'}>\r\n                    {form.getFieldDecorator('name', {\r\n                        rules: [\r\n                            {\r\n                                required: true,\r\n                                message: <FormattedMessage id=\"setting.label.fieldName.validate\" />\r\n                            }\r\n                        ]\r\n                    })(<Input placeholder={intl.formatMessage({ id: \"setting.placeholder.fieldName\" })}\r\n                    />)}\r\n                </Form.Item>\r\n                <Form.Item label={<FormattedMessage id=\"setting.label.fieldProjects\" />}>\r\n                    {form.getFieldDecorator('assignee', {\r\n                        rules: [\r\n                            {\r\n                                required: true,\r\n                                message: intl.formatMessage({ id: \"setting.label.fieldprojects.validate\" }),\r\n                                type: 'array'\r\n                            },\r\n                        ],\r\n                        initialValue: global ? list.map(e => e.id) : undefined\r\n                    })(\r\n                        <Select\r\n                            mode=\"multiple\"\r\n                            placeholder={<FormattedMessage id=\"setting.placeholder.fieldProjects\" />}\r\n                            notFoundContent={loading && <Spin size=\"small\" />}\r\n                            //add all projects    \r\n                            onSelect={value => {\r\n                                if (value === 0) {\r\n                                    form.setFieldsValue({ ...form.getFieldsValue(), assignee: list.map(e => e.id) })\r\n                                }\r\n                            }}\r\n                            disabled={global}>\r\n                            <Select.Option title=\"setting.allProject\" value={0}>{<FormattedMessage id=\"setting.allProject\" />}</Select.Option>\r\n                            {(list || []).map((e) => {\r\n                                return (\r\n                                    <Select.Option key={e.id} value={e.id}>\r\n                                        {e.name}\r\n                                    </Select.Option>\r\n                                );\r\n                            })}\r\n                        </Select>,\r\n                    )}\r\n                </Form.Item>\r\n                <Form.Item\r\n                    style={{ display: 'flex' }}\r\n                    label={<FormattedMessage id=\"setting.label.valueType\" />}\r\n                    validateStatus={form.getFieldError('valueType') ? 'error' : 'validating'}>\r\n                    {form.getFieldDecorator('valueType', {\r\n                        rules: [\r\n                            {\r\n                                required: true,\r\n                                message: <FormattedMessage id=\"setting.label.valueType.validate\" />\r\n                            }\r\n                        ]\r\n                    })(<Select onChange={handleChange} placeholder={<FormattedMessage id=\"setting.placeholder.valueType\" />}>\r\n                        {valueTypes && valueTypes.map(e => <Select.Option style={{ textTransform: 'capitalize' }} key={e.id} value={e.value}>{e.value}</Select.Option>)}\r\n                    </Select>)}\r\n                </Form.Item>\r\n                <Form.Item\r\n                    style={{ display: 'flex' }}\r\n                    label={<FormattedMessage id=\"setting.label.defaultValue\" />}\r\n                    validateStatus={defaultValue.status}\r\n                    help={defaultValue.help}\r\n                >{form.getFieldDecorator('defaultValue', {\r\n                    rules: [\r\n                        {\r\n                            required: true,\r\n                            message: <FormattedMessage id=\"setting.label.defaultValue.validate\" />\r\n                        }\r\n                    ]\r\n                })(defaultValue.type === \"Text Area\" ?\r\n                    <Input.TextArea onChange={handleChangeInput} placeholder={intl.formatMessage({ id: \"setting.placeholder.defaultValue\" })} />\r\n                    : <Input onChange={handleChangeInput} placeholder={intl.formatMessage({ id: \"setting.placeholder.defaultValue\" })} />)}\r\n                </Form.Item>\r\n                <Form.Item wrapperCol={{ span: 12, offset: 6 }}>\r\n                    {form.getFieldDecorator('require', {\r\n                        valuePropName: 'checked',\r\n                        initialValue: false,\r\n                    })(<Checkbox>{<FormattedMessage id=\"setting.label.fieldOptions\" />}</Checkbox>)}\r\n                </Form.Item>\r\n            </Form>\r\n        </Modal>\r\n    );\r\n}\r\nconst FormCreateCustomfield = Form.create({ name: 'dynamic_form_item' })(CreateCustomField);\r\n\r\nFormCreateCustomfield.propTypes = propTypes;\r\n\r\nFormCreateCustomfield.defaultProps = defaultProps;\r\n\r\nexport default FormCreateCustomfield;","import React, { useState, useEffect } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { css } from 'emotion';\r\nimport { formShape } from 'rc-form';\r\nimport { FormattedMessage, injectIntl } from 'react-intl';\r\nimport { actions as settingActions } from '../store';\r\n\r\nimport {\r\n    Drawer,\r\n    Form,\r\n    Icon,\r\n    Row,\r\n    Select,\r\n    Typography,\r\n    Button,\r\n    Popconfirm,\r\n    Input,\r\n    Spin,\r\n    Checkbox\r\n} from 'antd';\r\n\r\nimport ErrorNotification from '../../../components/Notification/Error';\r\nimport SuccessNotification from '../../../components/Notification/Success';\r\n\r\nconst propTypes = {\r\n    intl: PropTypes.shape({}).isRequired,\r\n    onClose: PropTypes.func.isRequired,\r\n    visible: PropTypes.bool.isRequired,\r\n    form: formShape.isRequired,\r\n\r\n    updateCustomField: PropTypes.func.isRequired,\r\n    removeAssigneeProject: PropTypes.func.isRequired,\r\n    createAssigneeProject: PropTypes.func.isRequired\r\n};\r\n\r\nconst defaultProps = {};\r\n\r\nconst styles = {\r\n    drawerFooter: css`\r\n    position: absolute;\r\n    bottom: 0;\r\n    right: 24px;\r\n    left: 24px;\r\n    padding: 24px 0px;\r\n  `\r\n};\r\n\r\n\r\nconst formItemLayout = {\r\n    labelCol: {\r\n        span: 8\r\n    },\r\n    wrapperCol: {\r\n        span: 16\r\n    }\r\n};\r\n\r\nconst UpdateCustomFieldDrawer = ({\r\n    intl,\r\n    onClose,\r\n    visible,\r\n    form,\r\n    customfield,\r\n    getCustomFields,\r\n    updateCustomField,\r\n    removeAssigneeProject,\r\n    createAssigneeProject,\r\n    getProjects\r\n}) => {\r\n    const dispatch = useDispatch();\r\n    const {\r\n        updateCustomFieldResult,\r\n        updateCustomFieldError,\r\n        updateCustomFieldErrors,\r\n        loading, removeAssigneeProjectResult,\r\n        removeAssigneeProjectError,\r\n        removeAssigneeProjectErrors,\r\n        createAssigneeProjectResult,\r\n        createAssigneeProjectError,\r\n        createAssigneeProjectErrors } = useSelector(\r\n            (state) => state.setting\r\n        );\r\n    const { list } = useSelector(\r\n        (state) => state.projects\r\n    );\r\n    const [arrRemove, setArrRemove] = useState([]);\r\n    const [arrCreate, setArrCreate] = useState([]);\r\n\r\n\r\n    useEffect(() => {\r\n        getProjects && getProjects();\r\n        return () => {\r\n            dispatch(settingActions.updateCustomFieldCleanError());\r\n            dispatch(settingActions.updateCustomFieldCleanData(false));\r\n        };\r\n    }, [dispatch, getProjects]);\r\n\r\n    // Handle showing notification after update project\r\n    useEffect(() => {\r\n        // show success notification\r\n        if (updateCustomFieldResult) {\r\n            const title = intl.formatMessage({ id: 'notification.success' });\r\n            const message = intl.formatMessage({ id: 'updateCustomFieldResult.message' });\r\n            SuccessNotification(title, message);\r\n            // close the modal and clean state\r\n            onClose();\r\n            // re-call get project detail api\r\n            getCustomFields && getCustomFields();\r\n        }\r\n    }, [onClose, intl, updateCustomFieldResult, getCustomFields]);\r\n\r\n    useEffect(() => {\r\n        // show error notification\r\n        if (updateCustomFieldError) {\r\n            const title = intl.formatMessage({ id: 'notification.error' });\r\n            const message = intl.formatMessage({\r\n                id: updateCustomFieldErrors.message\r\n                    ? updateCustomFieldErrors.message\r\n                    : 'projects.updateMemberInProject.message.error'\r\n            });\r\n            ErrorNotification(title, message);\r\n            // clean state\r\n            dispatch(settingActions.updateCustomFieldCleanError(false));\r\n        }\r\n    }, [dispatch, intl, updateCustomFieldError, updateCustomFieldErrors]);\r\n\r\n\r\n\r\n    // Handle showing notification after update AssigneeProject\r\n    useEffect(() => {\r\n        // show success notification\r\n        if (removeAssigneeProjectResult) {\r\n            const title = intl.formatMessage({ id: 'notification.success' });\r\n            const message = intl.formatMessage({ id: 'updateCustomFieldResult.message' });\r\n            SuccessNotification(title, message);\r\n            // close the modal and clean state\r\n            onClose();\r\n            // re-call get project detail api\r\n            getCustomFields && getCustomFields();\r\n        }\r\n    }, [onClose, intl, removeAssigneeProjectResult, getCustomFields]);\r\n\r\n    useEffect(() => {\r\n        // show error notification\r\n        if (removeAssigneeProjectError) {\r\n            const title = intl.formatMessage({ id: 'notification.error' });\r\n            const message = intl.formatMessage({\r\n                id: removeAssigneeProjectErrors.message\r\n                    ? removeAssigneeProjectErrors.message\r\n                    : 'projects.updateMemberInProject.message.error'\r\n            });\r\n            ErrorNotification(title, message);\r\n            // clean state\r\n            dispatch(settingActions.removeAssigneeProjectCleanError(false));\r\n        }\r\n    }, [dispatch, intl, removeAssigneeProjectError, removeAssigneeProjectErrors]);\r\n\r\n\r\n    // Handle showing notification after createAssigneeProject\r\n    useEffect(() => {\r\n        // show success notification\r\n        if (createAssigneeProjectResult) {\r\n            const title = intl.formatMessage({ id: 'notification.success' });\r\n            const message = intl.formatMessage({ id: 'updateCustomFieldResult.message' });\r\n            SuccessNotification(title, message);\r\n            // close the modal and clean state\r\n            onClose();\r\n            // re-call get project detail api\r\n            getCustomFields && getCustomFields();\r\n        }\r\n    }, [onClose, intl, createAssigneeProjectResult, getCustomFields]);\r\n\r\n    useEffect(() => {\r\n        // show error notification\r\n        if (createAssigneeProjectError) {\r\n            const title = intl.formatMessage({ id: 'notification.error' });\r\n            const message = intl.formatMessage({\r\n                id: createAssigneeProjectErrors.message\r\n                    ? createAssigneeProjectErrors.message\r\n                    : 'projects.updateMemberInProject.message.error'\r\n            });\r\n            ErrorNotification(title, message);\r\n            // clean state\r\n            dispatch(settingActions.createAssigneeProjectCleanError(false));\r\n        }\r\n    }, [dispatch, intl, createAssigneeProjectError, createAssigneeProjectErrors]);\r\n\r\n\r\n    const handleSubmit = () => {\r\n        form.validateFields(async (err, values) => {\r\n            if (!err) {\r\n                const body = {\r\n                    id: customfield.id,\r\n                    name: values.name,\r\n                    assignee: values.assignee,\r\n                    require: values.require\r\n                };\r\n                const oldBody = {\r\n                    id: customfield.id,\r\n                    name: customfield.name,\r\n                    assignee: customfield.infocustomField.map(e => { return (e.project.id) }),\r\n                    require: customfield.require\r\n                };\r\n                // check if value is not change\r\n                if (JSON.stringify(body) === JSON.stringify(oldBody)) {\r\n                    const title = intl.formatMessage({ id: 'notification.error' });\r\n                    const message = intl.formatMessage({ id: 'notification.message.form.noChanging' });\r\n                    return ErrorNotification(title, message);\r\n                } else {\r\n                    const bodyCreateAssignee = {\r\n                        idCustomField: customfield.id,\r\n                        projects: arrCreate\r\n                    }\r\n                    const bodyRemoveAssignee = {\r\n                        idCustomField: customfield.id,\r\n                        projects: arrRemove\r\n                    }\r\n                    removeAssigneeProject && removeAssigneeProject(bodyRemoveAssignee);\r\n                    createAssigneeProject && createAssigneeProject(bodyCreateAssignee);\r\n                    updateCustomField(body);\r\n                    setTimeout(() => {\r\n                        window.location.reload()\r\n                    }, 0)\r\n\r\n                }\r\n\r\n\r\n            } else {\r\n                // showing error form input notification\r\n                const title = intl.formatMessage({ id: 'notification.error' });\r\n                const message = intl.formatMessage({ id: 'notification.message.form.error' });\r\n                ErrorNotification(title, message);\r\n            }\r\n            return null;\r\n        });\r\n    };\r\n    return (\r\n        <Drawer\r\n            title={<FormattedMessage id=\"setting.project.drawerUpdate.tile\" />}\r\n            placement=\"right\"\r\n            onClose={onClose}\r\n            visible={visible}\r\n            maskClosable={false}\r\n            width={500}>\r\n            <Form onSubmit={() => handleSubmit()} {...formItemLayout}>\r\n                <Row style={{ marginBottom: 10 }}>\r\n                    <Icon type=\"project\" style={{ marginRight: 10 }} />\r\n                    <Typography.Text style={{ fontWeight: 'bold' }}>\r\n                        {<FormattedMessage id=\"setting.header.customfield\" />}\r\n                    </Typography.Text>\r\n                </Row>\r\n                <Form.Item\r\n                    style={{ display: 'flex' }}\r\n                    label={<FormattedMessage id=\"setting.label.fieldName\" />}\r\n                    validateStatus={form.getFieldError('name') ? 'error' : 'validating'}>\r\n                    {form.getFieldDecorator('name', {\r\n                        initialValue: customfield.name,\r\n                        rules: [\r\n                            {\r\n                                required: true,\r\n                                message: <FormattedMessage id=\"setting.label.fieldName.validate\" />\r\n                            }\r\n                        ]\r\n                    })(<Input placeholder={intl.formatMessage({ id: \"setting.placeholder.fieldName\" })}\r\n                    />)}\r\n                </Form.Item>\r\n                <Form.Item label={<FormattedMessage id=\"setting.label.fieldProjects\" />}>\r\n                    {form.getFieldDecorator('assignee', {\r\n                        initialValue: customfield.infocustomField.map(e => { return (e.project.id) }),\r\n                        rules: [\r\n                            {\r\n                                required: false,\r\n                                message: intl.formatMessage({ id: \"setting.label.fieldprojects.validate\" }),\r\n                                type: 'array'\r\n                            },\r\n                        ],\r\n                    })(\r\n                        <Select mode=\"multiple\"\r\n                            onDeselect={value => {\r\n                                if (arrCreate.includes(value)) {\r\n                                    setArrCreate(arrCreate.filter(created => created !== value\r\n                                    ))\r\n                                } else {\r\n                                    setArrRemove([...arrRemove, value])\r\n                                }\r\n                            }\r\n                            }\r\n                            onSelect={value => {\r\n                                //event when onselect option \"All\"\r\n                                if (value === 0) {\r\n                                    let listProject = customfield.infocustomField.map(e => { return (e.project.id) });\r\n                                    form.setFieldsValue({ ...form.getFieldsValue(), assignee: list.map(e => e.id) });\r\n                                    setArrRemove([]);\r\n                                    setArrCreate(\r\n                                        // add all except selected projects\r\n                                        list.reduce((accumulator, currentValue) => {\r\n                                            if (!listProject.includes(currentValue.id)) {\r\n                                                return [...accumulator, currentValue.id]\r\n                                            }\r\n                                            return accumulator\r\n                                        }, [])\r\n                                    )\r\n                                }\r\n                                else {\r\n                                    if (arrRemove.includes(value)) {\r\n                                        setArrRemove(arrRemove.filter(removed => removed !== value))\r\n                                    } else {\r\n                                        setArrCreate([...arrCreate, value])\r\n                                    }\r\n                                }\r\n                            }\r\n                            }\r\n                            placeholder={<FormattedMessage id=\"setting.placeholder.fieldProjects\" />} notFoundContent={loading && <Spin size=\"small\" />}>\r\n                            {/* add option All */}\r\n                            <Select.Option title=\"setting.allProject\" value={0}>{<FormattedMessage id=\"setting.allProject\" />}</Select.Option>\r\n                            {(list || []).map(e => {\r\n                                return (\r\n                                    <Select.Option key={e.id} value={e.id}>\r\n                                        {e.name}\r\n                                    </Select.Option>\r\n                                );\r\n                            })}\r\n                        </Select>,\r\n                    )}\r\n                </Form.Item>\r\n                <Form.Item wrapperCol={{ span: 12, offset: 6 }}>\r\n                    {form.getFieldDecorator('require', {\r\n                        valuePropName: 'checked',\r\n                        initialValue: customfield.require,\r\n                    })(<Checkbox>{<FormattedMessage id=\"setting.label.fieldOptions\" />}</Checkbox>)}\r\n                </Form.Item>\r\n                <Row className={styles.drawerFooter}>\r\n                    <Popconfirm\r\n                        title={<FormattedMessage id=\"setting.updateCustomField.confirm\" />}\r\n                        onConfirm={() => handleSubmit()}\r\n                        okText={<FormattedMessage id=\"button.confirm.yes\" />}\r\n                        cancelText={<FormattedMessage id=\"button.confirm.no\" />}>\r\n                        <Button icon=\"edit\" type=\"primary\" loading={loading}>\r\n                            {<FormattedMessage id=\"button.update\" />}\r\n                        </Button>\r\n                    </Popconfirm>\r\n                    <Button\r\n                        style={{ marginLeft: 15 }}\r\n                        icon=\"close-circle\"\r\n                        type=\"default\"\r\n                        key=\"close\"\r\n                        onClick={onClose}>\r\n                        {<FormattedMessage id=\"button.close\" />}\r\n                    </Button>\r\n                </Row>\r\n            </Form>\r\n        </Drawer>\r\n    );\r\n};\r\n\r\nUpdateCustomFieldDrawer.propTypes = propTypes;\r\n\r\nUpdateCustomFieldDrawer.defaultProps = defaultProps;\r\n\r\nconst UpdateCustomFieldForm = Form.create({ name: 'updateCustomField' })(UpdateCustomFieldDrawer);\r\n\r\nexport default injectIntl(UpdateCustomFieldForm, {});\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { FormattedMessage, injectIntl } from 'react-intl';\r\nimport { Table, Tooltip, Popconfirm, Button, Tag } from 'antd';\r\nimport PropTypes from 'prop-types';\r\n\r\n\r\nimport { actions as settingActions } from '../store';\r\nimport SuccessNotification from '../../../components/Notification/Success';\r\nimport ErrorNotification from '../../../components/Notification/Error';\r\nimport WithRole from '../../../hocs/WithRole';\r\nimport UpdateCustomFieldDrawer from '../updateCustomField/UpdateCustomFieldDrawer';\r\n\r\nconst propTypes = {\r\n  intl: PropTypes.shape({}).isRequired,\r\n\r\n  updateCustomField: PropTypes.func.isRequired,\r\n  removeCustomField: PropTypes.func.isRequired,\r\n  getCustomFields: PropTypes.func.isRequired,\r\n  removeAssigneeProject: PropTypes.func.isRequired,\r\n  createAssigneeProject: PropTypes.func.isRequired\r\n};\r\n\r\n\r\nconst defaultProps = {};\r\nconst ButtonEditCustomField = ({ handleEditSelected, record }) => {\r\n  return (\r\n    <Button\r\n      onClick={() => {\r\n        handleEditSelected(record);\r\n      }}\r\n      shape=\"circle\"\r\n      icon=\"edit\"\r\n      type=\"primary\"\r\n      style={{ margin: '0px 5px' }}\r\n    />\r\n  );\r\n};\r\n\r\nconst ButtonDeleteCustomField = ({ removeCustomField, record }) => {\r\n  return (\r\n    <Popconfirm\r\n      title={<FormattedMessage id=\"setting.deleteCustomField.confirm\" />}\r\n      onConfirm={() => removeCustomField && removeCustomField(record)}\r\n      okText={<FormattedMessage id=\"button.confirm.yes\" />}\r\n      cancelText={<FormattedMessage id=\"button.confirm.no\" />}>\r\n      <Button shape=\"circle\" icon=\"delete\" type=\"danger\" style={{ margin: '0px 5px' }} />\r\n    </Popconfirm>\r\n  );\r\n};\r\nconst TableCustomFields = ({ intl,\r\n  customfields,\r\n  updateCustomField,\r\n  removeCustomField,\r\n  getCustomFields,\r\n  removeAssigneeProject,\r\n  createAssigneeProject,\r\n  getProjects\r\n}) => {\r\n  const dispatch = useDispatch();\r\n  const [drawerVisible, setDrawerVisible] = useState(false);\r\n  const [dataItem, setDataItem] = useState({});\r\n  const { loading, removeCustomFieldError, removeCustomFieldErrors, removeCustomFieldResult } = useSelector(\r\n    (state) => state.setting\r\n  );\r\n\r\n  const handleEditSelected = (data) => {\r\n    data && setDataItem(data);\r\n    setDrawerVisible(!drawerVisible);\r\n  };\r\n  const columns = [\r\n    {\r\n      title: <FormattedMessage id=\"setting.label.fieldName\" />,\r\n      dataIndex: 'name',\r\n      key: 'name',\r\n    },\r\n    {\r\n      title: <FormattedMessage id=\"setting.label.fieldProjects\" />,\r\n      dataIndex: 'infocustomField',\r\n      key: 'infocustomField',\r\n      render: (infocustomField) => {\r\n        return (\r\n          <span>\r\n            {infocustomField.map(i => (\r\n              <Tag color=\"green\" key={i.project.id}>\r\n                {i.project.name}\r\n              </Tag>\r\n            ))}\r\n          </span>\r\n        )\r\n      }\r\n    },\r\n    {\r\n      title: '',\r\n      dataIndex: '',\r\n      key: 'x',\r\n      align: 'right',\r\n      render: (record) => (\r\n        <React.Fragment>\r\n          <Tooltip\r\n            placement=\"top\"\r\n            title={<FormattedMessage id=\"members.memberTable.buttonDelete.title\" />}>\r\n            <WithRole\r\n              type={['admin']}\r\n              component={ButtonDeleteCustomField}\r\n              removeCustomField={removeCustomField}\r\n              record={record}\r\n            />\r\n          </Tooltip>\r\n          <Tooltip\r\n            placement=\"top\"\r\n            title={<FormattedMessage id=\"members.memberTable.buttonEdit.title\" />}>\r\n            <WithRole\r\n              type={['admin']}\r\n              component={ButtonEditCustomField}\r\n              handleEditSelected={handleEditSelected}\r\n              record={record}\r\n            />\r\n          </Tooltip>\r\n        </React.Fragment>\r\n      )\r\n    }\r\n  ];\r\n\r\n  useEffect(() => {\r\n    if (removeCustomFieldResult) {\r\n      // show success notification\r\n      const title = intl.formatMessage({ id: 'notification.success' });\r\n      const message = intl.formatMessage({ id: 'removeCustomFieldResult.message' });\r\n      SuccessNotification(title, message);\r\n      // clean data\r\n      dispatch(settingActions.removeCustomFieldCleanData());\r\n      // re-call get Members list\r\n      getCustomFields && getCustomFields();\r\n    }\r\n  }, [removeCustomFieldResult, intl, getCustomFields, dispatch]);\r\n\r\n  useEffect(() => {\r\n    if (removeCustomFieldError) {\r\n      // show error notification\r\n      const title = intl.formatMessage({ id: 'notification.error' });\r\n      const message = intl.formatMessage({\r\n        id: removeCustomFieldErrors.message\r\n          ? removeCustomFieldErrors.message\r\n          : 'members.removeCustomField.message.error'\r\n      });\r\n      ErrorNotification(title, message);\r\n      // clean error\r\n      dispatch(settingActions.removeCustomFieldCleanError(false));\r\n    }\r\n  }, [intl, removeCustomFieldError, removeCustomFieldErrors, dispatch]);\r\n\r\n\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Table\r\n        columns={columns}\r\n        rowKey={(record, index) => index}\r\n        dataSource={customfields}\r\n        loading={loading}\r\n      />\r\n      {drawerVisible && (\r\n        <UpdateCustomFieldDrawer\r\n          visible={drawerVisible}\r\n          updateCustomField={updateCustomField}\r\n          onClose={() => handleEditSelected()}\r\n          customfield={dataItem}\r\n          removeAssigneeProject={removeAssigneeProject}\r\n          createAssigneeProject={createAssigneeProject}\r\n          getCustomFields={getCustomFields}\r\n          getProjects={getProjects}\r\n        />\r\n      )}\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nTableCustomFields.propTypes = propTypes;\r\nTableCustomFields.defaultProps = defaultProps;\r\n\r\nexport default injectIntl(TableCustomFields, {});\r\n\r\n\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { FormattedMessage, injectIntl } from 'react-intl';\r\nimport { Table, Tooltip, Popconfirm, Button, Form, Input, Select, Row } from 'antd';\r\nimport PropTypes from 'prop-types';\r\nimport WithRole from '../../../hocs/WithRole';\r\nimport '../../../assets/styles/firstSettingGlobalCustomField/main.scss';\r\nimport { actions as settingActions } from '../store';\r\nimport ErrorNotification from '../../../components/Notification/Error';\r\n\r\nconst propTypes = {\r\n    intl: PropTypes.shape({}).isRequired,\r\n    createCustomField: PropTypes.func.isRequired\r\n};\r\n\r\nconst defaultProps = {};\r\n\r\nconst ButtonDeleteCustomField = ({ record, handleDelete }) => {\r\n    return (\r\n        <Popconfirm\r\n            title={<FormattedMessage id=\"setting.deleteCustomField.confirm\" />}\r\n            onConfirm={() => handleDelete(record)}\r\n            okText={<FormattedMessage id=\"button.confirm.yes\" />}\r\n            cancelText={<FormattedMessage id=\"button.confirm.no\" />}>\r\n            <Button shape=\"circle\" icon=\"delete\" type=\"danger\" style={{ margin: '0px 5px' }} />\r\n        </Popconfirm>\r\n    );\r\n};\r\n\r\nconst EditableCell = ({\r\n    title,\r\n    editable,\r\n    children,\r\n    dataIndex,\r\n    record,\r\n    handleSave,\r\n    validateCell,\r\n    ...restProps\r\n}) => {\r\n    const dispatch = useDispatch();\r\n    useEffect(() => {\r\n        // get value type/baseCustomField\r\n        dispatch(\r\n            settingActions.getValueTypes({\r\n                path: 'data/valueType'\r\n            })\r\n        );\r\n        dispatch(\r\n            settingActions.getBaseCustomFields({\r\n                path: 'data/baseCustomField'\r\n            })\r\n        );\r\n    }, [dispatch]);\r\n    const { valueTypes } = useSelector(\r\n        (state) => state.setting\r\n    );\r\n    const [validate, setValidate] = useState([\r\n        {\r\n            status: \"\",\r\n            help: \"\"\r\n        }\r\n    ]);\r\n\r\n    const handleChangeSelect = (e) => {\r\n        record[dataIndex] = e;\r\n        save()\r\n    }\r\n    //handle change input\r\n    const handleChange = (e) => {\r\n        if (!e.target.value) {\r\n            setValidate({\r\n                ...validate, status: \"error\", help: <FormattedMessage id={`setting.label.${dataIndex}.validate`} />\r\n            })\r\n            validateCell(record, dataIndex, true)\r\n        }\r\n        else {\r\n            setValidate({ ...validate, status: \"success\", help: \"\" });\r\n            validateCell(record, dataIndex, false)\r\n        }\r\n        record[dataIndex] = e.target.value\r\n    }\r\n\r\n    const save = e => {\r\n        handleSave({ ...record });\r\n    };\r\n\r\n    let childNode = children;\r\n\r\n    if (editable) {\r\n        childNode = (\r\n            <Form.Item\r\n                style={{\r\n                    margin: 0\r\n                }}\r\n                validateStatus={validate.status}\r\n                help={validate.help}\r\n            >\r\n                {dataIndex === \"valueType\"\r\n                    ? <Select style={{ width: \"100%\" }}\r\n                        onChange={handleChangeSelect}\r\n                        placeholder={<FormattedMessage id=\"setting.placeholder.valueType\" />}\r\n                        defaultValue={record[dataIndex]}\r\n                    >\r\n                        {valueTypes && valueTypes.map(e =>\r\n                            <Select.Option style={{ textTransform: 'capitalize' }} key={e.id} value={e.value}>{e.value}</Select.Option>)}\r\n                    </Select>\r\n                    : <Input onChange={handleChange} defaultValue={record[dataIndex]} onPressEnter={save} onBlur={save} />}\r\n            </Form.Item>\r\n        )\r\n    }\r\n    return <td {...restProps}>{childNode}</td>;\r\n};\r\n\r\n\r\nconst FirstSettingCustomField = ({ intl, createCustomField, getProjects }) => {\r\n    const dispatch = useDispatch();\r\n    const { baseCustomFields } = useSelector(\r\n        (state) => state.setting\r\n    );\r\n    const [globalCustomFields, setGlobalCustomFields] = useState([]);\r\n    const { list } = useSelector(\r\n        (state) => state.projects\r\n    );\r\n    const [dataSource, setDataSource] = useState([]);\r\n    const [count, setCount] = useState(1)\r\n    const [validateError, setValidateError] = useState([])\r\n\r\n    useEffect(() => {\r\n        // get value type/baseCustomField\r\n        dispatch(\r\n            settingActions.getBaseCustomFields({\r\n                path: 'data/baseCustomField'\r\n            })\r\n        );\r\n    }, [dispatch]);\r\n\r\n    // Get all projects after open modal\r\n    useEffect(() => {\r\n        getProjects && getProjects();\r\n    }, [getProjects, dispatch]);\r\n    const handleAdd = () => {\r\n        setDataSource([...dataSource, {\r\n            key: count,\r\n            fieldName: \"fieldName\",\r\n            valueType: \"Text\",\r\n            defaultValue: \"https://google.com\"\r\n        }])\r\n        setCount(count + 1)\r\n        setValidateError([...validateError, { key: count, fieldName: false, valueType: false, defaultValue: false, error: false }])\r\n    }\r\n\r\n    const handleSave = row => {\r\n        const newData = dataSource;\r\n        const index = newData.findIndex(item => row.key === item.key);\r\n        const item = newData[index];\r\n        newData.splice(index, 1, { ...item, ...row });\r\n        setDataSource([...newData]);\r\n    };\r\n    const handleChangeCustomField = (e) => {\r\n        let listCustomField = baseCustomFields.filter(obj => e.includes(obj.id))\r\n        setGlobalCustomFields(listCustomField)\r\n    }\r\n    const handleSubmit = () => {\r\n\r\n        if (validateError.filter(obj => obj.error === true).length > 0) {\r\n            // showing error form input notification\r\n            const title = intl.formatMessage({ id: 'notification.error' });\r\n            const message = intl.formatMessage({ id: 'notification.message.form.error' });\r\n            ErrorNotification(title, message);\r\n\r\n        }\r\n        else {\r\n            let global = [...globalCustomFields];\r\n            let projects = list.map(obj => obj.id)\r\n            dataSource.map(obj => {\r\n                global.push({\r\n                    id: globalCustomFields.length + obj.key * 1,\r\n                    name: obj.fieldName,\r\n                    require: true,\r\n                    default_value: obj.defaultValue,\r\n                    value_type: obj.valueType\r\n                })\r\n                return undefined\r\n            })\r\n            global.map(obj => {\r\n                createCustomField && createCustomField({\r\n                    name: obj.name,\r\n                    assignee: projects,\r\n                    valueType: obj.value_type,\r\n                    defaultValue: obj.default_value,\r\n                    require: obj.require,\r\n                    is_global: true\r\n                });\r\n\r\n            })\r\n            window.location.reload()\r\n        }\r\n    }\r\n    const handleDelete = (record) => {\r\n        setDataSource(dataSource.filter(item => item.key !== record.key))\r\n        setValidateError(validateError.filter(obj => obj.key !== record.key))\r\n    }\r\n    //validate on cell\r\n    const validateCell = (record, fieldName, boolean) => {\r\n        for (let i = 0; i < validateError.length; i++) {\r\n            if (validateError[i].key === record.key) {\r\n                let cloneValidateCell = [...validateError];\r\n                if (boolean) {\r\n                    cloneValidateCell[i][`${fieldName}`] = true\r\n                } else cloneValidateCell[i][`${fieldName}`] = false\r\n                if (Object.values(cloneValidateCell[i]).slice(1, 4).includes(true)) cloneValidateCell[i].error = true\r\n                else cloneValidateCell[i].error = false;\r\n                setValidateError([...cloneValidateCell])\r\n            }\r\n        }\r\n    }\r\n\r\n    const columns = [\r\n        {\r\n            title: <FormattedMessage id=\"setting.label.fieldName\" />,\r\n            dataIndex: 'fieldName',\r\n            key: 'fieldName',\r\n            editable: true,\r\n            width: '300px',\r\n            onCell: record => ({\r\n                record,\r\n                title: <FormattedMessage id=\"setting.label.fieldName\" />,\r\n                dataIndex: 'fieldName',\r\n                editable: true,\r\n                handleSave: handleSave,\r\n                validateCell: validateCell\r\n            })\r\n        },\r\n        {\r\n            title: <FormattedMessage id=\"setting.label.valueType\" />,\r\n            dataIndex: 'valueType',\r\n            key: 'valueType',\r\n            editable: true,\r\n            width: '240px',\r\n            onCell: record => ({\r\n                record,\r\n                title: <FormattedMessage id=\"setting.label.valueType\" />,\r\n                dataIndex: 'valueType',\r\n                editable: true,\r\n                handleSave: handleSave,\r\n                validateCell: validateCell\r\n            })\r\n        },\r\n        {\r\n            title: <FormattedMessage id=\"setting.label.defaultValue\" />,\r\n            dataIndex: 'defaultValue',\r\n            key: 'defaultValue',\r\n            editable: true,\r\n            onCell: record => ({\r\n                record,\r\n                title: <FormattedMessage id=\"setting.label.defaultValue\" />,\r\n                dataIndex: 'defaultValue',\r\n                editable: true,\r\n                handleSave: handleSave,\r\n                validateCell: validateCell\r\n            })\r\n        },\r\n        {\r\n            title: '',\r\n            dataIndex: '',\r\n            key: 'x',\r\n            align: 'right',\r\n            width: '180px',\r\n            render: (record) => (\r\n                <React.Fragment>\r\n                    <Tooltip\r\n                        placement=\"top\"\r\n                        title={<FormattedMessage id=\"members.memberTable.buttonDelete.title\" />}>\r\n                        <WithRole\r\n                            type={['admin']}\r\n                            component={ButtonDeleteCustomField}\r\n                            record={record}\r\n                            handleDelete={handleDelete}\r\n                        />\r\n                    </Tooltip>\r\n                </React.Fragment>\r\n            )\r\n        }\r\n    ];\r\n    return (\r\n        <React.Fragment>\r\n            <Row justify=\"space-between\" align=\"middle\">\r\n                <Button\r\n                    onClick={handleAdd}\r\n                    icon=\"plus\"\r\n                    type=\"primary\"\r\n                    style={{\r\n                        marginBottom: 16,\r\n                    }}\r\n                >\r\n                    {<FormattedMessage id=\"button.add\" />}\r\n                </Button>\r\n                <Select\r\n                    mode=\"multiple\"\r\n                    style={{ width: \"500px\", float: \"right\" }}\r\n                    onChange={handleChangeCustomField}\r\n                    placeholder={<FormattedMessage id=\"setting.placeholder.baseCustomFields\" />}\r\n                >\r\n                    {baseCustomFields && baseCustomFields.map(e =>\r\n                        <Select.Option style={{ textTransform: 'capitalize' }} key={e.id} value={e.id}>{e.name}</Select.Option>)}\r\n                </Select>\r\n            </Row>\r\n            <Table\r\n                columns={columns}\r\n                rowClassName={() => \"editable-row\"}\r\n                components={{ body: { cell: EditableCell } }}\r\n                dataSource={dataSource}\r\n                pagination={false}\r\n            />\r\n            <Row style={{ display: 'flex', justifyContent: 'center' }}>\r\n                <Button type=\"primary\" style={{ marginTop: \"30px\" }} onClick={handleSubmit}>\r\n                    {<FormattedMessage id=\"setting.button.addCustomFields\" />}\r\n                </Button>\r\n            </Row>\r\n        </React.Fragment>\r\n    )\r\n\r\n\r\n}\r\nFirstSettingCustomField.propTypes = propTypes;\r\nFirstSettingCustomField.defaultProps = defaultProps;\r\nexport default injectIntl(FirstSettingCustomField, {});","import React, { useEffect, useCallback, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { actions } from '../modules/layout/store';\r\nimport { actions as projectActions } from '../modules/project/store';\r\nimport { actions as settingActions } from '../modules/setting/store';\r\n\r\nimport PropTypes from 'prop-types';\r\nimport { FormattedMessage, injectIntl } from 'react-intl';\r\nimport { Form, Row, Button, Col, Input, Tabs } from 'antd';\r\nimport { css } from 'emotion';\r\n\r\nimport searchColumn from '../utils/searchColumn';\r\nimport HeaderTitle from '../components/Content/HeaderTitle';\r\nimport FormCreateCustomField from '../modules/setting/createCustomField/CreateCustomField';\r\nimport TableCustomFields from '../modules/setting/tableCustomFields/TableCustomFields';\r\nimport WithRole from '../hocs/WithRole';\r\nimport ErrorNotification from '../components/Notification/Error';\r\nimport FirstSettingCustomField from '../modules/setting/firstSettingCustomField/firstSettingCustomField';\r\n\r\nconst { TabPane } = Tabs;\r\n\r\nconst styles = {\r\n  addCustomFieldButton: css`\r\n    background: #49a32b !important;\r\n    color: #fff !important;\r\n    margin-bottom: 10px;\r\n  `,\r\n  addGlobalCustomFieldButton: css`\r\n    background: #1890ff !important;\r\n    color: #fff !important;\r\n    margin-bottom: 10px;\r\n    margin-left: 10px\r\n  `\r\n};\r\n\r\nconst propTypes = {\r\n  history: PropTypes.shape({}).isRequired\r\n};\r\n\r\nconst defaultProps = {};\r\n\r\nconst ButtonCreateCustomField = ({ handleCreateModal }) => {\r\n  return (\r\n    <Button icon=\"plus-square\" className={styles.addCustomFieldButton} onClick={handleCreateModal}>\r\n      <FormattedMessage id=\"setting.button.addCustomField\" />\r\n    </Button>\r\n  );\r\n};\r\nconst ButtonCreateGlobalCustomField = ({ handleCreateModal }) => {\r\n  return (\r\n    <Button icon=\"plus-circle\" className={styles.addGlobalCustomFieldButton} onClick={handleCreateModal}>\r\n      <FormattedMessage id=\"setting.button.addGlobalCustomField\" />\r\n    </Button>\r\n  );\r\n};\r\n\r\nconst SettingForm = ({ intl, form }) => {\r\n  const { customfields, getCustomFieldsError, getCustomFieldsErrors } = useSelector(\r\n    (state) => state.setting\r\n  );\r\n  const { user } = useSelector((state) => state.auth)\r\n  const { listCustomField } = customfields;\r\n  const [visibleCustomField, setVisibleCustomField] = useState(false);\r\n  const [visibleGlobalCustomField, setVisibleGlobalCustomField] = useState(false);\r\n  const [customField, setCustomField] = useState([]);\r\n  const [globalCustomField, setGlobalCustomField] = useState([]);\r\n  const [searchInput, setSearchInput] = useState('');\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    dispatch(actions.selectItem(['setting']));\r\n    setCustomField(listCustomField && listCustomField.filter(obj => !obj.is_global));\r\n    setGlobalCustomField(listCustomField && listCustomField.filter(obj => obj.is_global));\r\n  }, [dispatch, listCustomField]);\r\n\r\n  useEffect(() => {\r\n    dispatch(\r\n      settingActions.getCustomFields({\r\n        path: 'customFields'\r\n      })\r\n    );\r\n  }, [dispatch]);\r\n\r\n  // show notification if get customfields list failure\r\n  useEffect(() => {\r\n    if (getCustomFieldsError) {\r\n      const title = intl.formatMessage({ id: 'notification.error' });\r\n      const message = intl.formatMessage({\r\n        id: getCustomFieldsErrors.message\r\n          ? getCustomFieldsErrors.message\r\n          : 'projects.getProjects.message.error'\r\n      });\r\n      ErrorNotification(title, message);\r\n      dispatch(settingActions.getCustomFieldsCleanError());\r\n    }\r\n  }, [dispatch, getCustomFieldsError, getCustomFieldsErrors, intl]);\r\n\r\n  const getProjects = useCallback(() => {\r\n    user.type === \"admin\" ?\r\n      dispatch(\r\n        projectActions.getProjects({\r\n          path: 'projects'\r\n        })\r\n      ) : dispatch(\r\n        projectActions.getProjects({\r\n          path: `projects/byUser/${user.staff_code}`\r\n        })\r\n      );\r\n  }, [dispatch, user]);\r\n\r\n  const createCustomField = useCallback(\r\n    (body) => {\r\n      dispatch(settingActions.createCustomField({ body, path: 'customFields' }));\r\n    },\r\n    [dispatch]\r\n  );\r\n\r\n  const getCustomFields = useCallback(() => {\r\n    dispatch(settingActions.getCustomFields({ path: 'customFields' }));\r\n  }, [dispatch]);\r\n\r\n  const removeCustomField = useCallback(\r\n    (data) => {\r\n      dispatch(settingActions.removeCustomField({ param: data.id, path: 'customFields' }));\r\n    },\r\n    [dispatch]\r\n  );\r\n\r\n  const createAssigneeProject = useCallback(\r\n    (body) => {\r\n      dispatch(\r\n        settingActions.createAssigneeProject({\r\n          body,\r\n          path: `customFields/${body.idCustomField}/assigneeProject`\r\n        })\r\n      );\r\n    },\r\n    [dispatch]\r\n  );\r\n\r\n  const removeAssigneeProject = (body) => {\r\n    dispatch(\r\n      settingActions.removeAssigneeProject({\r\n        body,\r\n        path: `customFields/${body.idCustomField}/assigneeProject`\r\n      })\r\n    );\r\n  };\r\n\r\n  const updateCustomField = useCallback(\r\n    (body) => {\r\n      dispatch(settingActions.updateCustomField({ body, path: 'customFields', param: body.id }));\r\n    },\r\n    [dispatch]\r\n  );\r\n\r\n  const handleChange = (e) => {\r\n    const currValue = e.target.value;\r\n    setSearchInput(currValue);\r\n    const data = listCustomField.filter(obj => obj.is_global).filter((value) => {\r\n      return searchColumn(currValue, value.name);\r\n    });\r\n    setCustomField(data);\r\n    const dataGlobal = listCustomField.filter(obj => obj.is_global).filter((value) => {\r\n      return searchColumn(currValue, value.name);\r\n    });\r\n    setGlobalCustomField(dataGlobal);\r\n  };\r\n  //change list when onchange search\r\n  const handleCreateModal = () => {\r\n    setVisibleCustomField(!visibleCustomField);\r\n  };\r\n\r\n  const handleCreateModalGlobal = () => {\r\n    setVisibleGlobalCustomField(!visibleGlobalCustomField)\r\n  }\r\n\r\n  return (\r\n    <Row>\r\n      <Row>\r\n        <HeaderTitle title={intl.formatMessage({ id: 'setting.header.title' })} />\r\n      </Row>\r\n      {(customField && customField.length > 0) || (globalCustomField && globalCustomField.length > 0) ? <Row>\r\n        <Row>\r\n          <Col>\r\n            <WithRole\r\n              type={['admin']}\r\n              component={ButtonCreateCustomField}\r\n              handleCreateModal={handleCreateModal}\r\n              intl={intl}\r\n            />\r\n            <WithRole\r\n              type={['admin']}\r\n              component={ButtonCreateGlobalCustomField}\r\n              handleCreateModal={handleCreateModalGlobal}\r\n              intl={intl}\r\n            />\r\n          </Col>\r\n          <Col span={10} offset={14}>\r\n            <Input placeholder=\"Search\" value={searchInput} onChange={handleChange} />\r\n          </Col>\r\n        </Row>\r\n        {visibleCustomField && (\r\n          <FormCreateCustomField\r\n            global={false}\r\n            visible={visibleCustomField}\r\n            close={() => setVisibleCustomField(!visibleCustomField)}\r\n            form={form}\r\n            intl={intl}\r\n            createCustomField={createCustomField}\r\n            getCustomFields={getCustomFields}\r\n            getProjects={getProjects}\r\n          />\r\n        )}\r\n        {visibleGlobalCustomField && (\r\n          <FormCreateCustomField\r\n            global={true}\r\n            visible={visibleGlobalCustomField}\r\n            close={() => setVisibleGlobalCustomField(!visibleGlobalCustomField)}\r\n            form={form}\r\n            intl={intl}\r\n            createCustomField={createCustomField}\r\n            getCustomFields={getCustomFields}\r\n            getProjects={getProjects}\r\n          />\r\n        )}\r\n\r\n        <Tabs defaultActiveKey=\"1\">\r\n          <TabPane tab={intl.formatMessage({ id: 'setting.tabsLabel.customField' })} key=\"1\">\r\n            <TableCustomFields\r\n              customfields={customField}\r\n              removeCustomField={removeCustomField}\r\n              getCustomFields={getCustomFields}\r\n              updateCustomField={updateCustomField}\r\n              createAssigneeProject={createAssigneeProject}\r\n              removeAssigneeProject={removeAssigneeProject}\r\n              getProjects={getProjects}\r\n            />\r\n          </TabPane>\r\n          <TabPane tab={intl.formatMessage({ id: 'setting.tabsLabel.globalCustomField' })} key=\"2\">\r\n            <TableCustomFields\r\n              customfields={globalCustomField}\r\n              removeCustomField={removeCustomField}\r\n              getCustomFields={getCustomFields}\r\n              updateCustomField={updateCustomField}\r\n              createAssigneeProject={createAssigneeProject}\r\n              removeAssigneeProject={removeAssigneeProject}\r\n              getProjects={getProjects}\r\n            />\r\n          </TabPane>\r\n        </Tabs>\r\n      </Row>\r\n        :\r\n        <FirstSettingCustomField\r\n          createCustomField={createCustomField}\r\n          intl={intl}\r\n          getProjects={getProjects}\r\n\r\n        />}\r\n    </Row>\r\n  );\r\n};\r\nconst SettingPage = Form.create({ name: 'dynamic_form_item' })(SettingForm);\r\n\r\nSettingPage.propTypes = propTypes;\r\n\r\nSettingPage.defaultProps = defaultProps;\r\n\r\nexport default injectIntl(SettingPage, {});\r\n","import React, { useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { FormattedMessage, injectIntl } from 'react-intl';\r\nimport { css } from 'emotion';\r\nimport { formShape } from 'rc-form';\r\n\r\nimport { Row, Drawer, Button, Input, Form, Popconfirm, notification, Icon, Typography } from 'antd';\r\n\r\nimport ErrorNotification from '../../../../components/Notification/Error';\r\nimport SuccessNotification from '../../../../components/Notification/Success';\r\nimport { actions as customerActions } from '../../store';\r\n\r\nconst propTypes = {\r\n  intl: PropTypes.shape({}).isRequired,\r\n  onClose: PropTypes.func.isRequired,\r\n  drawerVisible: PropTypes.bool.isRequired,\r\n  form: formShape.isRequired,\r\n  getCustomer: PropTypes.func.isRequired,\r\n\r\n  customer: PropTypes.shape({})\r\n};\r\n\r\nconst defaultProps = {\r\n  customer: {}\r\n};\r\n\r\nconst styles = {\r\n  drawerFooter: css`\r\n    position: absolute;\r\n    bottom: 0;\r\n    right: 24px;\r\n    left: 24px;\r\n    padding: 24px 0px;\r\n  `\r\n};\r\n\r\nconst formItemLayout = {\r\n  labelCol: {\r\n    span: 8\r\n  },\r\n  wrapperCol: {\r\n    span: 16\r\n  }\r\n};\r\n\r\nconst UpdateCustomer = ({ intl, drawerVisible, onClose, form, customer, getCustomer }) => {\r\n  const dispatch = useDispatch();\r\n  const { loading, updateCustomerResult, updateCustomerError, updateCustomerErrors } = useSelector(\r\n    (state) => state.customers\r\n  );\r\n\r\n  // Handle showing notification after update project\r\n  useEffect(() => {\r\n    // show success notification\r\n    if (updateCustomerResult) {\r\n      const title = intl.formatMessage({ id: 'notification.success' });\r\n      const message = intl.formatMessage({ id: updateCustomerResult.message });\r\n      SuccessNotification(title, message);\r\n      // close the modal and clean data\r\n      onClose();\r\n      // re-call get customers list\r\n      getCustomer && getCustomer();\r\n    }\r\n  }, [onClose, dispatch, intl, updateCustomerResult, getCustomer]);\r\n\r\n  // show error if update member failure\r\n  useEffect(() => {\r\n    if (updateCustomerError) {\r\n      const title = intl.formatMessage({ id: 'notification.error' });\r\n      const message = intl.formatMessage({\r\n        id: updateCustomerErrors.message\r\n          ? updateCustomerErrors.message\r\n          : 'projects.updateProject.message.error'\r\n      });\r\n      ErrorNotification(title, message);\r\n      // clean error\r\n      dispatch(customerActions.updateCustomerCleanError(false));\r\n    }\r\n  }, [dispatch, intl, updateCustomerError, updateCustomerErrors]);\r\n\r\n  // Form submit\r\n  const handleSubmit = () => {\r\n    form.validateFields((err, values) => {\r\n      if (!err) {\r\n        const body = {\r\n          name: values.name,\r\n          address: values.address,\r\n          phone_number: values.phone_number,\r\n          email: values.email\r\n        };\r\n\r\n        const oldBody = {\r\n          name: customer.name,\r\n          address: customer.address,\r\n          phone_number: customer.phone_number,\r\n          email: customer.email\r\n        };\r\n        // check if value is not change\r\n        if (JSON.stringify(body) === JSON.stringify(oldBody)) {\r\n          const title = intl.formatMessage({ id: 'notification.error' });\r\n          const message = intl.formatMessage({ id: 'notification.message.form.noChanging' });\r\n          return ErrorNotification(title, message);\r\n        }\r\n\r\n        dispatch(customerActions.updateCustomer({ body, path: 'customers', param: customer.id }));\r\n      } else {\r\n        notification.open({\r\n          message: (\r\n            <span style={{ color: '#f5222d', fontWeight: 'bold' }}>\r\n              {intl.formatMessage({ id: 'notification.error' })}\r\n            </span>\r\n          ),\r\n          description: intl.formatMessage({ id: 'notification.message.form.error' }),\r\n          duration: 2,\r\n          icon: <Icon type=\"frown\" style={{ color: '#f5222d' }} />\r\n        });\r\n      }\r\n      return null;\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Drawer\r\n      title={<FormattedMessage id=\"customer.updateCustomer.title\" />}\r\n      placement=\"right\"\r\n      onClose={onClose}\r\n      visible={drawerVisible}\r\n      maskClosable={false}\r\n      width={550}>\r\n      <Form onSubmit={() => handleSubmit()} {...formItemLayout}>\r\n        <Row style={{ marginBottom: 10 }}>\r\n          <Icon type=\"user\" style={{ marginRight: 10 }} />\r\n          <Typography.Text style={{ fontWeight: 'bold' }}>\r\n            {<FormattedMessage id=\"customers.createCustomers.customerInformation\" />}\r\n          </Typography.Text>\r\n        </Row>\r\n\r\n        <Form.Item\r\n          style={{ display: 'flex' }}\r\n          label={<FormattedMessage id=\"customers.customerModal.form.customerName.title\" />}\r\n          validateStatus={form.getFieldError('name') ? 'error' : 'validating'}>\r\n          {form.getFieldDecorator('name', {\r\n            initialValue: customer.name,\r\n            rules: [\r\n              {\r\n                required: true,\r\n                message: (\r\n                  <FormattedMessage id=\"customers.customerModal.form.customerName.validate\" />\r\n                )\r\n              }\r\n            ]\r\n          })(<Input />)}\r\n        </Form.Item>\r\n        <Form.Item\r\n          style={{ display: 'flex' }}\r\n          label={<FormattedMessage id=\"customers.customerModal.form.customerAddress.title\" />}\r\n          validateStatus={form.getFieldError('address') ? 'error' : 'validating'}>\r\n          {form.getFieldDecorator('address', {\r\n            initialValue: customer.address,\r\n\r\n            rules: [\r\n              {\r\n                required: true,\r\n                message: (\r\n                  <FormattedMessage id=\"customers.customerModal.form.customerAddress.validate\" />\r\n                )\r\n              }\r\n            ]\r\n          })(<Input />)}\r\n        </Form.Item>\r\n        <Form.Item\r\n          style={{ display: 'flex' }}\r\n          label={<FormattedMessage id=\"customers.customerModal.form.customerEmail.title\" />}\r\n          validateStatus={form.getFieldError('email') ? 'error' : 'validating'}>\r\n          {form.getFieldDecorator('email', {\r\n            initialValue: customer.email,\r\n\r\n            rules: [\r\n              {\r\n                type: 'email',\r\n                message: (\r\n                  <FormattedMessage id=\"customers.customerModal.form.customerEmail.validate.type\" />\r\n                )\r\n              },\r\n              {\r\n                required: true,\r\n                message: (\r\n                  <FormattedMessage id=\"customers.customerModal.form.customerEmail.validate\" />\r\n                )\r\n              }\r\n            ]\r\n          })(<Input />)}\r\n        </Form.Item>\r\n        <Form.Item\r\n          style={{ display: 'flex' }}\r\n          label={<FormattedMessage id=\"customers.customerModal.form.customerPhonenumber.title\" />}\r\n          validateStatus={form.getFieldError('phone_number') ? 'error' : 'validating'}>\r\n          {form.getFieldDecorator('phone_number', {\r\n            initialValue: customer.phone_number,\r\n\r\n            rules: [\r\n              {\r\n                required: true,\r\n                message: (\r\n                  <FormattedMessage id=\"customers.customerModal.form.customerPhonenumber.validate\" />\r\n                )\r\n              }\r\n            ]\r\n          })(<Input />)}\r\n        </Form.Item>\r\n      </Form>\r\n      <Row className={styles.drawerFooter}>\r\n        <Popconfirm\r\n          title={<FormattedMessage id=\"projects.updateProject.confirm.add\" />}\r\n          onConfirm={() => handleSubmit()}\r\n          okText={<FormattedMessage id=\"button.confirm.yes\" />}\r\n          cancelText={<FormattedMessage id=\"button.confirm.no\" />}>\r\n          <Button icon=\"edit\" type=\"primary\" loading={loading}>\r\n            {<FormattedMessage id=\"button.update\" />}\r\n          </Button>\r\n        </Popconfirm>\r\n        <Button\r\n          style={{ marginLeft: 15 }}\r\n          icon=\"close-circle\"\r\n          type=\"default\"\r\n          key=\"close\"\r\n          onClick={onClose}>\r\n          {<FormattedMessage id=\"button.close\" />}\r\n        </Button>\r\n      </Row>\r\n    </Drawer>\r\n  );\r\n};\r\n\r\nUpdateCustomer.propTypes = propTypes;\r\n\r\nUpdateCustomer.defaultProps = defaultProps;\r\n\r\nconst UpdateCustomerForm = Form.create({ name: 'updateCustomer' })(UpdateCustomer);\r\n\r\nexport default injectIntl(UpdateCustomerForm, {});\r\n","import React, { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useDispatch } from 'react-redux';\r\nimport { FormattedMessage, injectIntl } from 'react-intl';\r\nimport moment from 'moment';\r\nimport {\r\n  Table,\r\n  Row,\r\n  Typography,\r\n  Button,\r\n  Col,\r\n  Descriptions,\r\n  Divider,\r\n  Skeleton,\r\n  Tag\r\n} from 'antd';\r\n\r\nimport WithRole from '../../../hocs/WithRole';\r\nimport { actions as customerActions } from '../store';\r\nimport UpdateCustomerDrawer from '../updateCustomer/components/UpdateCustomerDrawer';\r\n\r\n\r\nconst propTypes = {\r\n  match: PropTypes.shape({}).isRequired,\r\n  intl: PropTypes.shape({}).isRequired,\r\n\r\n  project: PropTypes.shape({}),\r\n  loading: PropTypes.bool,\r\n};\r\n\r\nconst defaultProps = {\r\n  loading: false,\r\n  customer: null,\r\n  joinedProjects: [],\r\n};\r\n\r\nconst ButtonEditCustomer = ({ handleEditCustomerDrawer, customer }) => {\r\n  return (\r\n    <Button icon=\"edit\" type=\"primary\" disabled={!customer} onClick={handleEditCustomerDrawer}>\r\n      <FormattedMessage id=\"button.update\" />\r\n    </Button>\r\n  );\r\n};\r\n\r\nconst CustomerDetail = ({\r\n  customer,\r\n  joinedProjects,\r\n  loading,\r\n  history,\r\n  getCustomer\r\n}) => {\r\n  const dispatch = useDispatch();\r\n  const [drawerVisible, setDrawerVisible] = useState(false);\r\n  const handleEditCustomerDrawer = () => {\r\n    setDrawerVisible(!drawerVisible);\r\n  };\r\n\r\n    // Handle control open/close update customer drawer\r\n  const handleControlDrawer = () => {\r\n    setDrawerVisible(!drawerVisible);\r\n    dispatch(customerActions.updateCustomerCleanError());\r\n    dispatch(customerActions.updateCustomerCleanData());\r\n  };\r\n\r\n  const onSelectProject = (item) => {\r\n    history.push(`/project/detail/${item.id}`);\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      title: <FormattedMessage id=\"projects.detail.name\" />,\r\n      dataIndex: 'name',\r\n      key: 'name',\r\n    },\r\n    {\r\n      title: <FormattedMessage id=\"projects.detail.start_time\" />,\r\n      dataIndex: 'start_time',\r\n      key: 'start_time',\r\n      render: (date) => {\r\n        return moment(date).format('DD/MM/YYYY')\r\n      }\r\n    },\r\n    {\r\n      title: <FormattedMessage id=\"projects.detail.end_time\" />,\r\n      dataIndex: 'end_time',\r\n      key: 'end_time',\r\n      render: (date) => {\r\n        return moment(date).format('DD/MM/YYYY');\r\n      }\r\n    },\r\n    {\r\n      title: <FormattedMessage id=\"projects.detail.totalMember\" />,\r\n      dataIndex: 'project_member_detail.length',\r\n      key: 'total',\r\n    },\r\n    {\r\n      title: <FormattedMessage id=\"projects.detail.member.status\" />,\r\n      dataIndex: 'status',\r\n      key: 'status',\r\n      render: (status) => {\r\n        switch (status) {\r\n          case 'running':\r\n            return (\r\n              <Tag color=\"#108ee9\">\r\n                <FormattedMessage id=\"projects.status.running\" />\r\n              </Tag>\r\n            );\r\n          case 'completed':\r\n            return (\r\n              <Tag color=\"#87d068\">\r\n                <FormattedMessage id=\"projects.status.completed\" />\r\n              </Tag>\r\n            );\r\n          case 'stopped':\r\n            return (\r\n              <Tag color=\"#f5222D\">\r\n                <FormattedMessage id=\"projects.status.stopped\" />\r\n              </Tag>\r\n            );\r\n          default:\r\n            return null;\r\n        }\r\n      }\r\n    }\r\n  ];\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Row style={{ marginBottom: 75 }}>\r\n        <Skeleton active loading={loading} paragraph={{ rows: 4 }}>\r\n          <Row>\r\n            <Col span={12}>\r\n              <Descriptions title={customer && customer.name ? customer.name : ''} column={1}>\r\n                <Descriptions.Item label={<FormattedMessage id=\"customerDetail.email\" />}>\r\n                  {customer ? customer.email : ''}\r\n                </Descriptions.Item>\r\n                <Descriptions.Item label={<FormattedMessage id=\"customerDetail.address\" />}>\r\n                  {customer ? customer.address : ''}\r\n                </Descriptions.Item>\r\n                <Descriptions.Item label={<FormattedMessage id=\"customerDetail.phoneNumber\" />}>\r\n                  {customer ? customer.phone_number : ''}\r\n                </Descriptions.Item>\r\n              </Descriptions>\r\n            </Col>\r\n          </Row>\r\n        </Skeleton>\r\n        <Row>\r\n          <WithRole\r\n            type={['admin', 'manager']}\r\n            component={ButtonEditCustomer}\r\n            customer={customer}\r\n            handleEditCustomerDrawer={handleEditCustomerDrawer}\r\n          />\r\n        </Row>\r\n\r\n        <Divider />\r\n        <Row>\r\n          <Row>\r\n            <Col span={12} style={{ display: 'flex' }}>\r\n              <Typography.Title level={4}>\r\n                <FormattedMessage id=\"customerDetail.currentProjects.title\" />\r\n              </Typography.Title>\r\n            </Col>\r\n          </Row>\r\n          <Table\r\n            columns={columns}\r\n            rowKey={(record) => record.id}\r\n            dataSource={joinedProjects ? joinedProjects : []}\r\n            loading={loading}\r\n            onRow={(item) => ({\r\n              onClick: () => onSelectProject(item)\r\n            })}\r\n          />\r\n        </Row>\r\n        {drawerVisible && (\r\n        <UpdateCustomerDrawer\r\n          drawerVisible={drawerVisible}\r\n          onClose={() => handleControlDrawer()}\r\n          customer={customer}\r\n          getCustomer={getCustomer}\r\n        />\r\n      )}\r\n      </Row>\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nCustomerDetail.propTypes = propTypes;\r\nCustomerDetail.defaultProps = defaultProps;\r\n\r\nexport default injectIntl(CustomerDetail, {});\r\n","import React, { useEffect, useCallback } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { FormattedMessage, injectIntl } from 'react-intl';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { Row, Popconfirm, Button, Icon } from 'antd';\r\nimport { css } from 'emotion';\r\n\r\nimport { actions as layoutActions } from '../modules/layout/store';\r\nimport { actions as customerActions } from '../modules/customer/store';\r\nimport HeaderTitle from '../components/Content/HeaderTitle';\r\nimport CustomerDetail from '../modules/customer/customerDetail/customerDetail';\r\nimport ErrorNotification from '../components/Notification/Error';\r\nimport SuccessNotification from '../components/Notification/Success';\r\nimport WithRole from '../hocs/WithRole';\r\n\r\nconst propTypes = {\r\n  match: PropTypes.shape({}).isRequired,\r\n  history: PropTypes.shape({}).isRequired,\r\n  intl: PropTypes.shape({}).isRequired\r\n};\r\n\r\nconst styles = {\r\n  footer: css`\r\n    position: absolute !important;\r\n    bottom: 0;\r\n    left: 0;\r\n    right: 0;\r\n  `\r\n};\r\n\r\nconst ButtonRemoveCustomer = ({ loading, match }) => {\r\n  const dispatch = useDispatch();\r\n\r\n  return (\r\n    <Popconfirm\r\n      title={<FormattedMessage id=\"customerDetail.removeCustomer.confirm.remove\" />}\r\n      onConfirm={\r\n        () =>\r\n          dispatch(\r\n            customerActions.removeCustomer({\r\n              path: 'customers/remove',\r\n              param: match.params.id\r\n            })\r\n          )\r\n        // eslint-disable-next-line react/jsx-curly-newline\r\n      }\r\n      okText={<FormattedMessage id=\"button.confirm.yes\" />}\r\n      cancelText={<FormattedMessage id=\"button.confirm.no\" />}>\r\n      <Button style={{ marginRight: 15 }} type=\"danger\" disabled={loading}>\r\n        <Icon type={loading ? 'loading' : 'delete'} />\r\n        <FormattedMessage id=\"customerDetail.removeCustomer\" />\r\n      </Button>\r\n    </Popconfirm>\r\n  );\r\n};\r\n\r\nconst CustomerDetailPage = ({ match, history, intl }) => {\r\n  const dispatch = useDispatch();\r\n  const { customer, projectsOfCustomer, loading, removeCustomerResult, removeCustomerError, removeCustomerErrors } = useSelector(\r\n    (state) => state.customers\r\n  );\r\n\r\n\r\n  const cleanError = useCallback(() => {\r\n    dispatch(customerActions.cleanError(false));\r\n  }, [dispatch])\r\n\r\n  useEffect(() => {\r\n    dispatch(layoutActions.selectItem(['customers']));\r\n  }, [dispatch])\r\n\r\n  const getCustomer = useCallback(() => {\r\n    dispatch(\r\n      customerActions.getCustomer({\r\n        param: match.params.id,\r\n        path: 'customers'\r\n      })\r\n    );\r\n  }, [dispatch, match])\r\n\r\n  useEffect(() => {\r\n    // get project detail\r\n    dispatch(\r\n      customerActions.getCustomer({\r\n        param: match.params.id,\r\n        path: 'customers'\r\n      })\r\n    );\r\n    // get joined projects\r\n    dispatch(\r\n      customerActions.getProjectsByCustomer({\r\n        path: `customers/${match.params.id}/projects`\r\n      })\r\n    );\r\n  }, [dispatch, match.params.id]);\r\n\r\n\r\n  // Handle showing notification after remove customer\r\n  useEffect(() => {\r\n    // show success notification\r\n    if (removeCustomerResult) {\r\n      const title = intl.formatMessage({ id: 'notification.success' });\r\n      const message = intl.formatMessage({ id: removeCustomerResult.message });\r\n      SuccessNotification(title, message);\r\n      // clean data\r\n      dispatch(customerActions.removeCustomerCleanData(false));\r\n      history.push('/customers');\r\n    }\r\n  }, [dispatch, intl, removeCustomerResult, history]);\r\n\r\n  // Showing error if remove customer failure\r\n  useEffect(() => {\r\n    if (removeCustomerError) {\r\n      const title = intl.formatMessage({ id: 'notification.error' });\r\n      const message = intl.formatMessage({\r\n        id: removeCustomerErrors.message\r\n          ? removeCustomerErrors.message\r\n          : 'customers.removeCustomer.message.error'\r\n      });\r\n      ErrorNotification(title, message);\r\n      // clean error\r\n      dispatch(customerActions.removeCustomerCleanError(false));\r\n    }\r\n  }, [dispatch, intl, removeCustomerError, removeCustomerErrors]);\r\n\r\n  return (\r\n    <Row>\r\n      <Row>\r\n        <HeaderTitle title={<FormattedMessage id=\"customerDetail.title\" />} />\r\n      </Row>\r\n      <Row>\r\n        <CustomerDetail\r\n          customer={customer}\r\n          loading={loading}\r\n          cleanError={cleanError}\r\n          match={match}\r\n          joinedProjects={projectsOfCustomer ? projectsOfCustomer.listProject : null}\r\n          history={history}\r\n          getCustomer={getCustomer}\r\n        />\r\n      </Row>\r\n      <Row className={styles.footer} type=\"flex\" justify=\"start\">\r\n        <WithRole\r\n          type={['admin']}\r\n          component={ButtonRemoveCustomer}\r\n          match={match}\r\n          loading={loading}\r\n        />\r\n      </Row>\r\n    </Row>\r\n  );\r\n};\r\n\r\nCustomerDetailPage.propTypes = propTypes;\r\n\r\nexport default injectIntl(CustomerDetailPage, {});\r\n","import React from 'react';\r\nimport { Switch, Route } from 'react-router-dom';\r\n\r\nimport RouteNormal from './hocs/RouteNormal';\r\nimport RouteWithManager from './hocs/RouteWithManager';\r\nimport RouteWithAdmin from './hocs/RouteWithAdmin';\r\n\r\nimport Dashboard from './pages/Dashbroad.page';\r\nimport ProjectPage from './pages/Projects.page';\r\nimport ProjectDetail from './pages/ProjectDetail.page';\r\nimport ProjectMemberHistory from './pages/ProjectMemberHistory.page';\r\nimport LoginPage from './pages/Login.page';\r\nimport ListMemberPage from './pages/ListMember.page';\r\nimport Customerpage from './pages/Customers.page';\r\nimport NotFound from './pages/NotFound';\r\nimport CallbackOAuth from './pages/CallbackOAuth';\r\nimport UsersPage from './pages/User.page';\r\nimport SettingPage from './pages/Setting.page';\r\nimport CustomerDetail from './pages/CustomerDetail.page';\r\n\r\n\r\nfunction AppRoutes() {\r\n  return (\r\n    <Switch>\r\n      <Route component={LoginPage} path=\"/login\"></Route>\r\n      <Route component={CallbackOAuth} path=\"/callback\" />\r\n\r\n      <RouteWithAdmin component={Dashboard} path=\"/\" exact></RouteWithAdmin>\r\n      <RouteWithAdmin component={UsersPage} path=\"/admin/roles\"></RouteWithAdmin>\r\n      <RouteWithAdmin component={SettingPage} path=\"/admin/setting\"></RouteWithAdmin>\r\n\r\n\r\n      <RouteNormal component={ProjectPage} path=\"/project\" exact></RouteNormal>\r\n      <RouteNormal component={ProjectDetail} path=\"/project/detail/:id\"></RouteNormal>\r\n      <RouteNormal component={ProjectMemberHistory} path=\"/project/memberHistory/:id\"></RouteNormal>\r\n\r\n      <RouteWithManager component={Customerpage} path=\"/customers\" exact></RouteWithManager>\r\n\r\n      <RouteWithManager component={ListMemberPage} path=\"/member/list\" exact></RouteWithManager>\r\n      <RouteWithManager component={CustomerDetail} path=\"/customer/detail/:id\" exact></RouteWithManager>\r\n\r\n      <RouteNormal component={NotFound} />\r\n    </Switch>\r\n  );\r\n}\r\n\r\nexport default AppRoutes;\r\n","export const languageOptions = [\r\n  {\r\n    id: 'vi',\r\n    value: 'languageSwitcher.vi'\r\n  },\r\n  {\r\n    id: 'en',\r\n    value: 'languageSwitcher.en'\r\n  }\r\n];\r\n","import React from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { FormattedMessage } from 'react-intl';\r\nimport { actions } from '../store';\r\nimport { Select } from 'antd';\r\nimport { languageOptions } from './options';\r\n\r\nconst LanguageSwitcher = () => {\r\n  const dispatch = useDispatch();\r\n  const { locale } = useSelector((state) => state.languageSwitcher);\r\n\r\n  const defaultValue = () => {\r\n    const { id } = languageOptions.find((item) => item.id === locale);\r\n    return id;\r\n  };\r\n\r\n  const handleChangeLanguage = (value) => {\r\n    dispatch(actions.switchLanguage(value));\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Select\r\n        style={{ width: 140 }}\r\n        defaultValue={defaultValue()}\r\n        onChange={(value) => handleChangeLanguage(value)}>\r\n        {languageOptions.map((item, index) => (\r\n          <Select.Option key={index} value={item.id}>\r\n            <FormattedMessage id={item.value} />\r\n          </Select.Option>\r\n        ))}\r\n      </Select>\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default LanguageSwitcher;\r\n","import React from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { actions } from '../store';\r\nimport { Layout, Icon, Row } from 'antd';\r\nimport LanguageSwitcher from '../../languageSwitcher/components/LanguagaSwitcher';\r\nimport { css } from 'emotion';\r\n\r\nconst styles = {\r\n  header: css`\r\n    align-items: center;\r\n    display: flex;\r\n    padding: 0px 24px;\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    z-index: 2;\r\n  `,\r\n  trigger: css`\r\n    color: #fff !important;\r\n    font-size: 25px;\r\n    &:hover {\r\n      color: #1890ff !important;\r\n    }\r\n  `,\r\n  leftContents: css`\r\n    flex: 1;\r\n  `,\r\n  rightContents: css`\r\n    flex: 1;\r\n    justify-content: flex-end;\r\n  `\r\n};\r\n\r\nconst Header = () => {\r\n  const dispatch = useDispatch();\r\n  const layoutCheck = useSelector((state) => state.layout);\r\n  const { isCollapsed } = useSelector((state) => state.layoutSlider);\r\n\r\n  const toggle = () => {\r\n    dispatch(actions.setCollapse(!isCollapsed));\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {layoutCheck.isShow && (\r\n        <Layout.Header className={styles.header}>\r\n          <Row className={styles.leftContents}>\r\n            <Icon\r\n              className={styles.trigger}\r\n              type={isCollapsed ? 'menu-unfold' : 'menu-fold'}\r\n              onClick={() => toggle()}\r\n            />\r\n          </Row>\r\n          <Row type=\"flex\" className={styles.rightContents}>\r\n            <LanguageSwitcher />\r\n          </Row>\r\n        </Layout.Header>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","import React from 'react';\r\nimport { Menu, Icon } from 'antd';\r\nimport { FormattedMessage } from 'react-intl';\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction CustomMenu(props) {\r\n  const { key, to, typeIcon, message, ...rest } = props;\r\n\r\n  return (\r\n    <Menu.Item key={key} {...rest}>\r\n      <Link to={to}>\r\n        <Icon type={typeIcon} />\r\n        <FormattedMessage id={message} />\r\n      </Link>\r\n    </Menu.Item>\r\n  );\r\n}\r\n\r\n\r\nexport default CustomMenu;\r\n","import React from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { actions } from '../store';\r\nimport { Layout, Menu, Icon } from 'antd';\r\nimport { css } from 'emotion';\r\nimport { FormattedMessage } from 'react-intl';\r\nimport CustomMenu from './CustomMenu';\r\nimport WithRole from '../../../hocs/WithRole';\r\nimport Cookies from 'js-cookie';\r\nimport { authApi } from '../../../api/auth/authApi';\r\n\r\nconst { SubMenu } = Menu;\r\n\r\nconst styles = {\r\n  sider: css`\r\n    width: 200px;\r\n    margin-top: 64px;\r\n    background-color: #fff;\r\n  `,\r\n  menu: css`\r\n    height: 100%;\r\n    border-right: 0;\r\n    width: 200px !important;\r\n    position: fixed\r\n  `,\r\n  menu_collapse: css`\r\n    height: 100%;\r\n    border-right: 0;\r\n    position: fixed\r\n  `,\r\n  logo: css`\r\n    height: 56px;\r\n    background-color: transparent;\r\n    margin: 4px;\r\n  `,\r\n  //change style when collapse\r\n  user: css`\r\n    position: fixed;\r\n    bottom: 0;\r\n    width: 200px\r\n  `,\r\n  user_collapse: css`\r\n    position: fixed;\r\n    bottom: 0;\r\n  `\r\n};\r\nconst Sider = () => {\r\n  const {\r\n    user: { staff_code },\r\n    user\r\n  } = useSelector((state) => state.auth);\r\n  const dispacth = useDispatch();\r\n  const layoutCheck = useSelector((state) => state.layout);\r\n  const { selectedItem, selectedSubMenu, isCollapsed } = useSelector((state) => state.layoutSlider);\r\n  const handleSelectSubMenu = (selectedKeys) => {\r\n    dispacth(actions.selectSubMenu(selectedKeys));\r\n  };\r\n  const handleLogout = () => {\r\n    localStorage.clear();\r\n    Cookies.remove('access-token');\r\n    authApi.logout(staff_code);\r\n    window.location.reload();\r\n  };\r\n  return (\r\n    <>\r\n      {layoutCheck.isShow && (\r\n        <Layout.Sider className={styles.sider} trigger={null} collapsible collapsed={isCollapsed}>\r\n          <Menu\r\n            mode=\"inline\"\r\n            theme=\"dark\"\r\n            className={isCollapsed ? styles.menu_collapse : styles.menu}\r\n            selectedKeys={selectedItem}\r\n            openKeys={selectedSubMenu}\r\n            onOpenChange={(selectedKeys) => handleSelectSubMenu(selectedKeys)}>\r\n            <WithRole\r\n              component={CustomMenu}\r\n              key=\"dashboard\"\r\n              to=\"/\"\r\n              typeIcon=\"pie-chart\"\r\n              message=\"dashboard.title\"\r\n              type={['admin']}></WithRole>\r\n            <WithRole\r\n              component={CustomMenu}\r\n              key=\"project\"\r\n              to=\"/project\"\r\n              typeIcon=\"project\"\r\n              message=\"projects.title\"\r\n              type={['admin', 'manager', 'normal']}\r\n            />\r\n            <WithRole\r\n              component={CustomMenu}\r\n              key=\"customers\"\r\n              to=\"/customers\"\r\n              typeIcon=\"team\"\r\n              message=\"customers.title\"\r\n              type={['admin', 'manager']}\r\n            />\r\n            <WithRole\r\n              component={CustomMenu}\r\n              key=\"member\"\r\n              to=\"/member/list\"\r\n              typeIcon=\"smile\"\r\n              message=\"members.title\"\r\n              type={['admin', 'manager']}\r\n            />\r\n            <WithRole\r\n              component={CustomMenu}\r\n              key=\"roles\"\r\n              to=\"/admin/roles\"\r\n              typeIcon=\"user\"\r\n              message=\"users.title\"\r\n              type={['admin']}\r\n            />\r\n            <WithRole\r\n              key=\"sub1-2\"\r\n              title={\r\n                <span>\r\n                  <Icon type=\"setting\" />\r\n                  <FormattedMessage id=\"setting.title\" />\r\n                </span>\r\n              }\r\n              component={SubMenu}\r\n              type={['admin']}>\r\n              <WithRole\r\n                component={CustomMenu}\r\n                key=\"setting\"\r\n                to=\"/admin/setting\"\r\n                typeIcon=\"project\"\r\n                message=\"setting.customfield.title\"\r\n                type={['admin']}\r\n              />\r\n            </WithRole>\r\n            <WithRole\r\n              key=\"logout\"\r\n              title={<span>\r\n                <Icon type=\"user\" />\r\n                {isCollapsed ? null : user.full_name}\r\n              </span>}\r\n              component={SubMenu}\r\n              className={isCollapsed ? styles.user_collapse : styles.user}\r\n              type={['admin', 'manager', 'normal']}>\r\n              <WithRole\r\n                component={CustomMenu}\r\n                to=\"\"\r\n                typeIcon=\"logout\"\r\n                onClick={handleLogout}\r\n                key=\"logout-option\"\r\n                message=\"logout.title\"\r\n                type={['admin', 'manager', 'normal']}\r\n              />\r\n            </WithRole>\r\n          </Menu>\r\n        </Layout.Sider>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Sider;\r\n","import React from 'react';\r\nimport { Router } from 'react-router-dom';\r\nimport { ConfigProvider, Layout as AntdLayout } from 'antd';\r\nimport { IntlProvider } from 'react-intl';\r\nimport { useSelector } from 'react-redux';\r\nimport { history } from './store';\r\nimport AppLocale from './languageProvider';\r\nimport { css } from 'emotion';\r\n\r\nimport AppRoutes from './AppRoutes';\r\nimport Header from './modules/layout/components/Header';\r\nimport Sider from './modules/layout/components/Sider';\r\n\r\nconst App = () => {\r\n  const { locale } = useSelector((state) => state.languageSwitcher);\r\n  const layoutCheck = useSelector((state) => state.layout);\r\n  const currentAppLocale = AppLocale[locale];\r\n\r\n  const styles = {\r\n    container: css`\r\n      min-height: 100vh !important;\r\n    `,\r\n    content: css`\r\n      background: #fff;\r\n      padding: 24px;\r\n      margin: 0;\r\n      minheight: 280px;\r\n      border-radius: 3px;\r\n    `\r\n  };\r\n\r\n  return (\r\n    <ConfigProvider locale={currentAppLocale.antd}>\r\n      <IntlProvider locale={currentAppLocale.locale} messages={currentAppLocale.messages}>\r\n        <Router history={history}>\r\n          <AntdLayout className={styles.container}>\r\n            <Sider/>\r\n            <Header />\r\n            <AntdLayout style={{ padding: layoutCheck.isShow ? '88px 24px 24px 24px' : '0' }}>\r\n              {/* <BackTop style={{ right: '15px' }} visibilityHeight={250} /> */}\r\n              <AntdLayout.Content className={layoutCheck.isShow ? styles.content : null}>\r\n                <AppRoutes></AppRoutes>\r\n              </AntdLayout.Content>\r\n            </AntdLayout>\r\n          </AntdLayout>\r\n        </Router>\r\n      </IntlProvider>\r\n    </ConfigProvider>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport './index.css';\r\nimport ReactDOM from 'react-dom';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nimport { ConfigProvider } from 'antd';\r\nimport Provider from 'react-redux/es/components/Provider';\r\nimport store from './store';\r\nimport App from './App';\r\nimport AppLocale from './languageProvider';\r\n\r\nReactDOM.render(\r\n  <ConfigProvider locale={AppLocale.vi.antd}>\r\n    <Provider store={store}>\r\n      <App />\r\n    </Provider>\r\n  </ConfigProvider>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}